(function(){ 
var p2p$={ns:function(c){var d=(c+"").split(".");var f=this;for(var a=0;a<d.length;a++){var b=d[a];var e=typeof(f[b]);if(e!="object"&&e!="undefined"){throw"Invalid namespace "+c+", sub: "+b}f=f[b]=f[b]||{}}}};var _m457=false;var _m$cde18=function(){};_m$cde18._m41=function(d){var b=null;if(this!==_m$cde18){b=this}function c(){if(!_m457){if(b){this._superprototype=b.prototype}this.init.apply(this,arguments)}}if(b){_m457=true;c.prototype=new b();c.prototype.constructor=c;_m457=false}c._m41=arguments.callee;for(var a in d){if(d.hasOwnProperty(a)){if(b&&typeof(d[a])==="function"&&typeof(c.prototype[a])==="function"&&/\b_super\b/.test(d[a])){c.prototype[a]=(function(e,f){return function(){this._super=b.prototype[e];return f.apply(this,arguments)}})(a,d[a])}else{c.prototype[a]=d[a]}}}return c};_m$cde18.apply=function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a.prototype[c]=b[c]}}};p2p$.util={apply:function(b,c){for(var a in c){b[a]=c[a]}return b},applyIf:function(b,c){for(var a in c){if(typeof(b[a])=="undefined"){b[a]=c[a]}}return b}};p2p$.ns("$n5");p2p$.$n5.$c50={apply:function(a,b){for(var c in b){a[c]=b[c]}},applyIf:function(a,b){for(var c in b){if(typeof(a[c])!="undefined"){a[c]=b[c]}}},namespace:function(e){var d=e.split(".");var c=$$root;for(var b=0;b<d.length;b++){var a=d[b];if(typeof(c[a])=="undefined"){c[a]={}}c=c[a]}},format:function(a){var b=[];for(var c=1;c<arguments.length;c++){b.push(arguments[c])}return(a||"").replace(/\{(\d+)\}/g,function(d,e){return b[e]})},_m226:function(a,b){if(!a){a="Y-m-d H:i:s"}if(!b){return"-"}else{if(typeof(b)=="number"){b=new Date(b)}}return a.replace(/Y/g,b.getFullYear()).replace(/m/g,this.pad(b.getMonth()+1,2)).replace(/d/g,this.pad(b.getDate(),2)).replace(/H/g,this.pad(b.getHours(),2)).replace(/i/g,this.pad(b.getMinutes(),2)).replace(/s/g,this.pad(b.getSeconds(),2)).replace(/U/g,this.pad(b.getMilliseconds(),3))},_m1054:function(b){var a="";if(b>3600){a+=(Math.floor(b/3600)+":")}if(b>60){a+=(this.pad(Math.floor((b%3600)/60),2)+":")}if(b>=0){a+=this.pad(Math.floor(b%60),2)}return a},size:function(b){var a=1024;if(b<a){return b.toFixed(0)+" B"}else{if(b<(a*a)){return(b/a).toFixed(1)+" KB"}else{if(b<(a*a*a)){return(b/a/a).toFixed(1)+" MB"}else{if(b<(a*a*a*a)){return(b/a/a/a).toFixed(1)+" GB"}}}}},speed:function(c,a){c=(c||0);var b=1024;var d="B/s";if(a){c*=8;b=1000;d="bps"}if(c<1024){return c.toFixed(0)+" "+d}else{if(c<(b*b)){return(c/b).toFixed(1)+" K"+d}else{if(c<(b*b*b)){return(c/b/b).toFixed(1)+" M"+d}else{if(c<(b*b*b*b)){return(c/b/b/b).toFixed(1)+" G"+d}}}}},pad:function(a,b){var c=a+"";while(c.length<b){c="0"+c}return c},trim:function(b){var a=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g;return(b+"").replace(a,"")},_m1128:function(c){var h={};var g=c.indexOf("?")>=0?(c.substr(c.indexOf("?")+1)||""):c;var b=g.split("&");for(var e=0;e<b.length;e++){var a=b[e].split("=");var d="";var f=null;if(a.length>0){d=decodeURIComponent(a[0])}if(a.length>1){f=decodeURIComponent(a[1])}h[d]=f}return h},_m1163:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};window.JSON=window.JSON||{};window.URL=(window.URL||window.webkitURL||window.msURL||window.oURL);window.RTCPeerConnection=(window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection);window.RTCIceCandidate=(window.mozRTCIceCandidate||window.RTCIceCandidate);window.RTCSessionDescription=(window.mozRTCSessionDescription||window.RTCSessionDescription);var CdeByteArray=function(a){this.length=0;this._position=0;this.uInt8Array=new Uint8Array();if(a){this.uInt8Array=new Uint8Array(a)}this.writeBytes=function(c){var b=null;if(this.uInt8Array){b=new Uint8Array(this.uInt8Array.length+c.length);b.set(this.uInt8Array,0);b.set(c,this.uInt8Array.length)}else{b=c}this.uInt8Array=b};this.setBytes=function(b){this.position=0;this.uInt8Array=b};this.readBytes=function(b,g,e){g=g||0;e=e||this.uInt8Array.length;if(e===0){e=this.uInt8Array.length}if((g===0||(g>0&&g<b.uInt8Array.length))&&e>0&&(this.position+e)<=this.uInt8Array.length){var f=new Uint8Array(g);f=b.uInt8Array.subarray(0,g);var d=new Uint8Array(f.length+e);var c=new Uint8Array(e);c=this.uInt8Array.subarray(this.position,e);d.set(f);d.set(c,f.length);b.uInt8Array=new Uint8Array(d)}else{console.log("readBytes error")}};this.generationByteArray=function(b){this.position=0;this.uInt8Array=b};this.clear=function(){this.position=0;this.uInt8Array=new Uint8Array()};this.__defineGetter__("position",function(){return this._position});this.__defineSetter__("position",function(b){this._position=b});this.__defineGetter__("length",function(){return this.uInt8Array.length});this.__defineGetter__("bytesAvailable",function(){return this.length-this._position});this.__defineGetter__("CdeByteArray",function(){return this.uInt8Array})};JSON.stringify=JSON.stringify||function(e){var d=typeof(e);if(d!="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(d=="string"){b='"'+b+'"'}else{if(d=="object"&&b!==null){b=JSON.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}return(a?"[":"{")+String(c)+(a?"]":"}")}};p2p$.ns("$n2");p2p$.$n2.$c60=_m$cde18._m41({_m31:null,length:0,init:function(){this._m31=new Array();this.length=0},size:function(){return this._m31.length},isEmpty:function(){return(this._m31.length<1)},empty:function(){return(this._m31.length<1)},front:function(){if(!this.isEmpty()){return this._m31[0].value}return null},pop_front:function(){if(!this.isEmpty()){this._m31.splice(0,1);this.length--;return true}return false},clear:function(){this._m31=new Array();this.length=0},set:function(c,a){for(var b=0;b<this._m31.length;b++){if(this._m31[b].key==c){this._m31[b].value=a;return}}this._m31.push({key:c,value:a});this.length++},remove:function(b){var d=false;try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){this._m31.splice(a,1);this.length--;return true}}}catch(c){d=false}return d},erase:function(b){var d=false;try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){this._m31.splice(a,1);this.length--;return true}}}catch(c){d=false}return d},get:function(b){try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){return this._m31[a].value}}return null}catch(c){return null}},element:function(a){if(a<0||a>=this._m31.length){return null}return this._m31[a]},has:function(b){var d=false;try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){d=true}}}catch(c){d=false}return d},find:function(b){var d=false;try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){d=true}}}catch(c){d=false}return d},find2:function(b,d){var f=false;try{for(var a=0;a<this._m31.length;a++){if(this._m31[a].key==b){d.value=this._m31[a].value;f=true}}}catch(c){f=false}return f},containsValue:function(a){var d=false;try{for(var b=0;b<this._m31.length;b++){if(this._m31[b].value==a){d=true}}}catch(c){d=false}return d},values:function(){var a=new Array();for(var b=0;b<this._m31.length;b++){a.push(this._m31[b].value)}return a},keys:function(){var a=new Array();for(var b=0;b<this._m31.length;b++){a.push(this._m31[b].key)}return a}});p2p$.ns("$n2");p2p$.$n2.$c57={hexcase:0,chrsz:8,_m1185:function(a){return this._m1199(this._m1198(this._m1205(a),a.length*this.chrsz))},_m1198:function(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=this.ff(o,n,m,l,p[g+0],7,-680876936);l=this.ff(l,o,n,m,p[g+1],12,-389564586);m=this.ff(m,l,o,n,p[g+2],17,606105819);n=this.ff(n,m,l,o,p[g+3],22,-1044525330);o=this.ff(o,n,m,l,p[g+4],7,-176418897);l=this.ff(l,o,n,m,p[g+5],12,1200080426);m=this.ff(m,l,o,n,p[g+6],17,-1473231341);n=this.ff(n,m,l,o,p[g+7],22,-45705983);o=this.ff(o,n,m,l,p[g+8],7,1770035416);l=this.ff(l,o,n,m,p[g+9],12,-1958414417);m=this.ff(m,l,o,n,p[g+10],17,-42063);n=this.ff(n,m,l,o,p[g+11],22,-1990404162);o=this.ff(o,n,m,l,p[g+12],7,1804603682);l=this.ff(l,o,n,m,p[g+13],12,-40341101);m=this.ff(m,l,o,n,p[g+14],17,-1502002290);n=this.ff(n,m,l,o,p[g+15],22,1236535329);o=this.gg(o,n,m,l,p[g+1],5,-165796510);l=this.gg(l,o,n,m,p[g+6],9,-1069501632);m=this.gg(m,l,o,n,p[g+11],14,643717713);n=this.gg(n,m,l,o,p[g+0],20,-373897302);o=this.gg(o,n,m,l,p[g+5],5,-701558691);l=this.gg(l,o,n,m,p[g+10],9,38016083);m=this.gg(m,l,o,n,p[g+15],14,-660478335);n=this.gg(n,m,l,o,p[g+4],20,-405537848);o=this.gg(o,n,m,l,p[g+9],5,568446438);l=this.gg(l,o,n,m,p[g+14],9,-1019803690);m=this.gg(m,l,o,n,p[g+3],14,-187363961);n=this.gg(n,m,l,o,p[g+8],20,1163531501);o=this.gg(o,n,m,l,p[g+13],5,-1444681467);l=this.gg(l,o,n,m,p[g+2],9,-51403784);m=this.gg(m,l,o,n,p[g+7],14,1735328473);n=this.gg(n,m,l,o,p[g+12],20,-1926607734);o=this.hh(o,n,m,l,p[g+5],4,-378558);l=this.hh(l,o,n,m,p[g+8],11,-2022574463);m=this.hh(m,l,o,n,p[g+11],16,1839030562);n=this.hh(n,m,l,o,p[g+14],23,-35309556);o=this.hh(o,n,m,l,p[g+1],4,-1530992060);l=this.hh(l,o,n,m,p[g+4],11,1272893353);m=this.hh(m,l,o,n,p[g+7],16,-155497632);n=this.hh(n,m,l,o,p[g+10],23,-1094730640);o=this.hh(o,n,m,l,p[g+13],4,681279174);l=this.hh(l,o,n,m,p[g+0],11,-358537222);m=this.hh(m,l,o,n,p[g+3],16,-722521979);n=this.hh(n,m,l,o,p[g+6],23,76029189);o=this.hh(o,n,m,l,p[g+9],4,-640364487);l=this.hh(l,o,n,m,p[g+12],11,-421815835);m=this.hh(m,l,o,n,p[g+15],16,530742520);n=this.hh(n,m,l,o,p[g+2],23,-995338651);o=this.ii(o,n,m,l,p[g+0],6,-198630844);l=this.ii(l,o,n,m,p[g+7],10,1126891415);m=this.ii(m,l,o,n,p[g+14],15,-1416354905);n=this.ii(n,m,l,o,p[g+5],21,-57434055);o=this.ii(o,n,m,l,p[g+12],6,1700485571);l=this.ii(l,o,n,m,p[g+3],10,-1894986606);m=this.ii(m,l,o,n,p[g+10],15,-1051523);n=this.ii(n,m,l,o,p[g+1],21,-2054922799);o=this.ii(o,n,m,l,p[g+8],6,1873313359);l=this.ii(l,o,n,m,p[g+15],10,-30611744);m=this.ii(m,l,o,n,p[g+6],15,-1560198380);n=this.ii(n,m,l,o,p[g+13],21,1309151649);o=this.ii(o,n,m,l,p[g+4],6,-145523070);l=this.ii(l,o,n,m,p[g+11],10,-1120210379);m=this.ii(m,l,o,n,p[g+2],15,718787259);n=this.ii(n,m,l,o,p[g+9],21,-343485551);o=this.add(o,j);n=this.add(n,h);m=this.add(m,f);l=this.add(l,e)}return Array(o,n,m,l)},cmn:function(h,e,d,c,g,f){return this.add(this.br(this.add(this.add(e,h),this.add(c,f)),g),d)},ff:function(g,f,k,j,e,i,h){return this.cmn((f&k)|((~f)&j),g,f,e,i,h)},gg:function(g,f,k,j,e,i,h){return this.cmn((f&j)|(k&(~j)),g,f,e,i,h)},hh:function(g,f,k,j,e,i,h){return this.cmn(f^k^j,g,f,e,i,h)},ii:function(g,f,k,j,e,i,h){return this.cmn(k^(f|(~j)),g,f,e,i,h)},add:function(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)},br:function(a,b){return(a<<b)|(a>>>(32-b))},_m1205:function(d){var c=Array();var a=(1<<this.chrsz)-1;for(var b=0;b<d.length*this.chrsz;b+=this.chrsz){c[b>>5]|=(d.charCodeAt(b/this.chrsz)&a)<<(b%32)}return c},_m1293:function(c){var d="";var a=(1<<this.chrsz)-1;for(var b=0;b<c.length*32;b+=this.chrsz){d+=String.fromCharCode((c[b>>5]>>>(b%32))&a)}return d},_m1199:function(c){var b=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var d="";for(var a=0;a<c.length*4;a++){d+=b.charAt((c[a>>2]>>((a%4)*8+4))&15)+b.charAt((c[a>>2]>>((a%4)*8))&15)}return d}};p2p$.ns("$n2");p2p$.$n2.$c46={_m195:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_m518:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],trim:function(b){var a=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g;return(b+"").replace(a,"")},_m403:function(a){return a},_m503:function(d,b){var a=new Date();a.setTime(d);if(!b){b="yyyy-M-d h:m:s.S"}var e={"M+":this._m501(a.getMonth()+1,2),"d+":this._m501(a.getDate(),2),"h+":this._m501(a.getHours(),2),"m+":this._m501(a.getMinutes(),2),"s+":this._m501(a.getSeconds(),2),"q+":Math.floor((a.getMonth()+3)/3),S:this._m501(a.getMilliseconds(),3)};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in e){if(new RegExp("("+c+")").test(b)){b=b.replace(RegExp.$1,(RegExp.$1.length==1)?(e[c]):(("00"+e[c]).substr((""+e[c]).length)))}}return b},_m501:function(d,b,c){var a=d+"";while(a.length<b){a=(c||"0")+a}return a},_m861:function(b,d){var a=b.indexOf("://");if(a!=-1){return b}else{var c=new p2p$.$n1.$c58();this._m1105(d,c,false);if(b.length>=2&&b.substring(0,1)=="/"&&b.substring(1,2)=="/"){return this.format("{0}:{1}",c._m181,b)}else{if(b.length>=1&&b.substring(0,1)=="/"){if(0==c._m161){return this.format("{0}://{1}{2}",c._m181,c._m201,b)}else{return this.format("{0}://{1}:{2}{3}",c._m181,c._m201,c._m161,b)}}else{if(0==c._m161){return this.format("{0}://{1}{2}{3}",c._m181,c._m201,c._m763,b)}else{return this.format("{0}://{1}:{2}{3}{4}",c._m181,c._m201,c._m161,c._m763,b)}}}}},format:function(a){var b=[];for(var c=1;c<arguments.length;c++){b.push(arguments[c])}return(a||"").replace(/\{(\d+)\}/g,function(d,e){return b[e]})},isSpace:function(a){},isDigit:function(b){var a=/^[a-zA-Z0-9]+$/g;return a.test(b)},fromNumber:function(a){return""+a},parseFloat:function(c,d){if(typeof d=="undefined"){d=0}var a=parseFloat(c);var b=isNaN(a)?d:a;return isNaN(b)?0:b},_m94:function(c,d){if(typeof d=="undefined"){d=0}var a=parseInt(c);var b=isNaN(a)?d:a;return isNaN(b)?0:b},_m1239:function(a){return(a||"").toUpperCase()},_m1181:function(a){return a.toUpperCase()},_m1064:function(a){return a.toLowerCase()},_m504:function(b,a){return b.slice(0,a.length)===a},_m1297:function(b,a){return b.indexOf(a,b.length-a.length)!==-1},_m1029:function(a){return a.toLowerCase()},_m118:function(b,a){return b.localeCompare(a)},_m1065:function(a){a=(a+"").toString();return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},split:function(h,l,k,f,g,c){var i=0;var j=0;var a=0;var b=k.length;var e=(-1>>>0==c)?h.length:c;if(k.length==0){return 0}else{if(e<=0||e>=h.length){e=h.length}}while(i<e){j=h.indexOf(k,i);if(j<0||j>=e||(f>0&&a==f-1)){j=e}if(j<i){break}if(j>i||!g){var d=(j>i)?h.substr(i,j-i):"";l.push(d);a++}i=j+b}return a},_m1006:function(i,f,h,k,a,d,j){var l=0;var e=[];this.split(i,e,h,-1,false,-1>>>0);for(var c=0;c<e.length;c++){var b=e[c];var g=[];if(this.split(b,g,k,2,false,-1>>>0)==0){continue}if(a){g[0]=this._m1029(g[0])}if(d){this.trim(g.front())}if(j&&g.length>1){this.trim(g[g.length-1])}if(g.length<2){if(g.length>=1){f.set(g[0],"")}}else{f.set(g[0],g[g.length-1])}l++}return l},_m1105:function(c,q,h){var d=-1;if(c){d=c.indexOf(":")}else{return}var r=0;if(-1!=d){var b=true;for(var e=0;e<d;e++){if(!this.isDigit(c[e])){b=false;break}}if(b){q._m181=this._m1029(c.substr(0,d));r=d+1;while(r<c.length&&"/"==c[r]){r++}}}var g=c.indexOf(":",r)>>>0;var a=c.indexOf("/",r)>>>0;if(g>a){g=-1}g=g<<0;if(-1!=g){q._m201=c.substr(r,g-r);q._m161=this._m94(c.substr(g+1),0)}var m;if(-1==a){m="/";if(q._m201.length==0){q._m201=c.substr(r)}}else{m=c.substr(a);if(q._m201.length==0){q._m201=c.substr(r,a-r)}}var k=m.indexOf("?")>>>0;var f=m.indexOf("#")>>>0;q._m429=m.substr(0,k>f?f:k);if((k+1)<m.length&&k!=-1&&k<f){var o=m.substr(k+1,-1==f<<0?-1>>>0:(f-k-1));var j=new p2p$.$n2.$c60();this._m1006(o,j,"&","=",false,false,false);for(var e=0;e<j.size();e++){var p=j.element(e);var l=decodeURIComponent(p.key);q._m7.set(l,decodeURIComponent(p.value))}}if(f!=-1){q._m899=m.substr(f+1)}var i=q._m429.lastIndexOf("/")>>>0;if(i==-1||i==0){q._m763="/"}else{q._m763=q._m429.substr(0,i)}if(q._m763.length==0||q._m763[q._m763.length-1]!="/"){q._m763+="/"}if(h){q._m429=m}},_m1118:function(g){var c,e,a;var f,d,b;a=g.length;e=0;c="";while(e<a){f=g.charCodeAt(e++)&255;if(e==a){c+=this._m195.charAt(f>>2);c+=this._m195.charAt((f&3)<<4);c+="==";break}d=g.charCodeAt(e++);if(e==a){c+=this._m195.charAt(f>>2);c+=this._m195.charAt(((f&3)<<4)|((d&240)>>4));c+=this._m195.charAt((d&15)<<2);c+="=";break}b=g.charCodeAt(e++);c+=this._m195.charAt(f>>2);c+=this._m195.charAt(((f&3)<<4)|((d&240)>>4));c+=this._m195.charAt(((d&15)<<2)|((b&192)>>6));c+=this._m195.charAt(b&63)}return c},_m1273:function(h){var g,f,d,b;var e,a,c;a=h.length;e=0;c="";while(e<a){do{g=this._m518[h.charCodeAt(e++)&255]}while(e<a&&g==-1);if(g==-1){break}do{f=this._m518[h.charCodeAt(e++)&255]}while(e<a&&f==-1);if(f==-1){break}c+=String.fromCharCode((g<<2)|((f&48)>>4));do{d=h.charCodeAt(e++)&255;if(d==61){return c}d=this._m518[d]}while(e<a&&d==-1);if(d==-1){break}c+=String.fromCharCode(((f&15)<<4)|((d&60)>>2));do{b=h.charCodeAt(e++)&255;if(b==61){return c}b=this._m518[b]}while(e<a&&b==-1);if(b==-1){break}c+=String.fromCharCode(((d&3)<<6)|b)}return c},_m1296:function(e){var b,d,a,f;b="";a=e.length;for(d=0;d<a;d++){f=e.charCodeAt(d);if((f>=1)&&(f<=127)){b+=e.charAt(d)}else{if(f>2047){b+=String.fromCharCode(224|((f>>12)&15));b+=String.fromCharCode(128|((f>>6)&63));b+=String.fromCharCode(128|((f>>0)&63))}else{b+=String.fromCharCode(192|((f>>6)&31));b+=String.fromCharCode(128|((f>>0)&63))}}}return b},_m1291:function(g){var b,e,a,h;var f,d;b="";a=g.length;e=0;while(e<a){h=g.charCodeAt(e++);switch(h>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=g.charAt(e-1);break;case 12:case 13:f=g.charCodeAt(e++);b+=String.fromCharCode(((h&31)<<6)|(f&63));break;case 14:f=g.charCodeAt(e++);d=g.charCodeAt(e++);b+=String.fromCharCode(((h&15)<<12)|((f&63)<<6)|((d&63)<<0));break}}return b},_m1288:function(f){var b,d,a,g,e;b="";a=f.length;d=0;while(d<a){g=f.charCodeAt(d++);e=g.toString(16);if(e.length<2){e="0"+e}b+="\\x"+e+" ";if(d>0&&d%8==0){b+="\r\n"}}return b}};p2p$.ns("$n2");p2p$.$n2.$c44={max:function(b,a){return b>a?b:a},min:function(b,a){return b>a?a:b},_m751:function(){return -1>>>0},_m1116:function(d,f,e){var b=null;switch(d){case"2":b=new Uint8Array(2);b[0]=(parseInt(f)>>8)&255;b[1]=parseInt(f)&255;e.push(b);break;case"4":b=new Uint8Array(4);b[0]=(parseInt(f)>>24)&255;b[1]=(parseInt(f)>>16)&255;b[2]=(parseInt(f)>>8)&255;b[3]=parseInt(f)&255;e.push(b);break;case"8":b=new Uint8Array(8);var a=Math.floor(f/4294967296);b[0]=(a>>24)&255;b[1]=(a>>16)&255;b[2]=(a>>8)&255;b[3]=(a)&255;var g=Math.floor(f%4294967296);b[4]=(g>>24)&255;b[5]=(g>>16)&255;b[6]=(g>>8)&255;b[7]=(g)&255;e.push(b);break;case"utf":b=new Uint8Array(f.length);for(var c=0;c<f.length;c++){b[c]=f.charCodeAt(c)}e.push(b);break;case"d":if(f&&f.length>0){e.push(f)}break}},_m73:function(n,a,d,e){var l;var k;var g;var f;var m=null;switch(n){case"2":l=a[d];k=a[d+1];m=(l<<8)+k;break;case"4":l=a[d];k=a[d+1];g=a[d+2];f=a[d+3];m=(l*Math.pow(2,24))+(k<<16)+(g<<8)+f;break;case"8":l=a[d];k=a[d+1];g=a[d+2];f=a[d+3];var b=(l*Math.pow(2,24))+(k<<16)+(g<<8)+f;l=a[d+4];k=a[d+5];g=a[d+6];f=a[d+7];var j=(l*Math.pow(2,24))+(k<<16)+(g<<8)+f;m=(b*4294967296)+j;break;case"utf":var h="";for(var c=0;c<e;c++){h+=String.fromCharCode(a[d+c])}m=h;break;case"d":m=a.subarray(d,d+e);break}return m}};p2p$.ns("$n2");p2p$.$n2.META_DATA_TYPE={_k6:0,_k7:1,_k22:2,_k59:3};p2p$.$n2.META_PIECE_TYPE={_k1:0,_k16:1};p2p$.$n2.ERROR_CODE={_k4:0,_k44:1,_k57:2,_k76:3,_k23:4,_k84:5,_k51:6,_k75:7,_k85:8,_k63:9,_k73:10,_k87:11,_k30:12,_k95:13,_k91:14,_k101:15,_k92:16,_k88:17,_k80:18,_k79:19,_k69:20,_k77:21,_k67:22,_k96:23};p2p$.$n2.SERVER_TYPES={_k111:0,_k114:1,_k112:2,_k129:4,_k48:8,_k34:16,_k108:32,_k37:64,_k109:128};p2p$.$n2.$c54={_m37:function(a){switch(a){case p2p$.$n2.META_DATA_TYPE._k6:return"vod";case p2p$.$n2.META_DATA_TYPE._k7:return"live";case p2p$.$n2.META_DATA_TYPE._k22:return"download";case p2p$.$n2.META_DATA_TYPE._k59:return"stream";default:return"unknown"}},_m272:function(a){switch(a){case p2p$.$n2.META_PIECE_TYPE._k1:return"tn";case p2p$.$n2.META_PIECE_TYPE._k16:return"pn";default:return"unknown"}}};p2p$.ns("$n2");p2p$.$n2.ERROR_CODE={_k4:0,_k44:1,_k57:2,_k76:3,_k23:4,_k84:5,_k51:6,_k75:7,_k85:8,_k63:9,_k73:10,_k87:11,_k30:12,_k95:13,_k91:14,_k92:15,_k88:16,_k80:17,_k79:18,_k69:19,_k77:20,_k67:21,_k96:22};p2p$.ns("$n2");p2p$.$n2.LOG_LEVEL={_k35:0,_k65:1,_k70:2,_k56:4,_k64:8,_k136:16,_k140:255};p2p$.$n2.LOG_OUTPUT={_k139:0,_k134:1,_k135:2,_k141:4,_k137:8,_k142:255,_k128:0,_k118:1,_k115:2,_k117:3,_k127:4,_k138:5};p2p$.$n2.$c59={_m1278:false,_m1227:false,_m1250:false,_m1230:false,_m1279:false,_m32:0,_m962:0,_m1272:0,_m1274:0,_m49:0,_m1286:0,_m1285:0,_m1252:0,_m1298:"",_m244:null,init:function(c,a){var b=p2p$.$n2.LOG_LEVEL;this._m962=c>=0?c:(b._k65|b._k70|b._k56|b._k64);this._m244=new p2p$.$n15.$c11(a)},trace:function(b,a){var d=p2p$.$n2.LOG_LEVEL._k65;if((this._m962&d)==p2p$.$n2.LOG_LEVEL._k35){return}try{console.log("CDE: ["+b+" - TRC]",a)}catch(c){}if(this._m244){this._m244._m764(d,"TRC",a)}},info:function(b,a){var d=p2p$.$n2.LOG_LEVEL._k70;if((this._m962&d)==p2p$.$n2.LOG_LEVEL._k35){return}try{console.info("CDE: ["+b+" - INF]",a)}catch(c){}if(this._m244){this._m244._m764(d,"INF",a)}},warning:function(b,a){var d=p2p$.$n2.LOG_LEVEL._k56;if((this._m962&d)==p2p$.$n2.LOG_LEVEL._k35){return}try{console.warn("CDE: ["+b+" - WRN]",a)}catch(c){}if(this._m244){this._m244._m764(d,"WRN",a)}},error:function(b,a){var d=p2p$.$n2.LOG_LEVEL._k64;if((this._m962&d)==p2p$.$n2.LOG_LEVEL._k35){return}try{console.error("CDE: ["+b+" - ERR]",a)}catch(c){}if(this._m244){this._m244._m764(d,"ERR",d)}}};function _m$cde14(a){var c=p2p$.$n2.$c47._m357();for(var b=0;b<arguments.length;b++){p2p$.$n2.$c59.trace(c,arguments[b])}}function _m$cde5(a){var c=p2p$.$n2.$c47._m357();for(var b=0;b<arguments.length;b++){p2p$.$n2.$c59.info(c,arguments[b])}}function _m$cde1236(a){var c=p2p$.$n2.$c47._m357();for(var b=0;b<arguments.length;b++){p2p$.$n2.$c59.warning(c,arguments[b])}}function _m$cde15(a){var c=p2p$.$n2.$c47._m357();for(var b=0;b<arguments.length;b++){p2p$.$n2.$c59.error(c,arguments[b])}}function logr(){var c=-1,a=arguments.length,b=[],d="console.log(args)";while(++c<a){b.push("args["+c+"]")}d=new Function("args",d.replace(/args/,b.join(",")));d(arguments)}function _m$cde1(a){var b=[];for(var c=1;c<arguments.length;c++){b.push(arguments[c])}return(a||"").replace(/\{(\d+)\}/g,function(d,e){return b[e]})}p2p$.ns("$n2");p2p$.$n2.$c43={_k145:"2015-07-02",_k89:"2015-07-02 10:54:42",_k144:"",_k148:"bin",_k143:"config",_k149:"log",_k146:"share",_k150:"web",_k147:"data",_k86:"1.3m3u8_12272000",_k12:0,_k13:9,_k14:65,_m1251:function(){return this._k86},_m683:function(){return this._k12*1000+this._k13*100+this._k14}};p2p$.ns("$n2");p2p$.$n2.$c47={_k122:1024,_k125:1024,_k120:1024,_k126:1024*1024,_k123:1024*1024*1024,_k121:1024*1024*1024*1024*1024,_k124:1000,_k74:1000,_k116:1000,_k83:1000,_k132:1000*1000,_k100:60,KMinuteUnitsPerHour:60,_k130:24,_k110:60*60,_k113:60*60*24,_m1263:function(){return Math.floor((new Date()).getTime()/1000)},_m9:function(){return(new Date()).getTime()},_m1289:function(){return Math.floor((new Date()).getTime())},_m357:function(d){var a=new Date();if(typeof d!="undefined"){a.setTime(d*1000)}var i=a.getFullYear();var h=a.getMonth()+1;var j=a.getDate();var c=a.getHours();var e=a.getMinutes();var g=a.getSeconds();var f=a.getMilliseconds();var b=i+"-";if(h<10){b+="0"}b+=h+"-";if(j<10){b+="0"}b+=j+" ";if(c<10){b+="0"}b+=c+":";if(e<10){b+="0"}b+=e+":";if(g<10){b+="0"}b+=g+".";if(f<100){b+="0"}if(f<10){b+="0"}b+=f;return(b)},speed:function(c,a){c=(c||0);var b=1024;var d="B/s";if(a){c*=8;b=1000;d="bps"}if(c<1024){return c.toFixed(0)+" "+d}else{if(c<(b*b)){return(c/b).toFixed(1)+" K"+d}else{if(c<(b*b*b)){return(c/b/b).toFixed(1)+" M"+d}else{if(c<(b*b*b*b)){return(c/b/b/b).toFixed(1)+" G"+d}}}}}};p2p$.ns("$n15");p2p$.$n15.$c18={_m203:false,_m222:null,_m56:null,_m66:null,_m192:"",init:function(){if(this._m203){return}this._m192="";this._m203=true;this._m66=p2p$.$n1.$c23;this._m66._m144();this._m1124();this._m222=new p2p$.$n12.$c1(this._m66);this._m56=p2p$.$n14.$c33;this._m56._m144(this._m222);this._m860(5000)},_m1124:function(){var d=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(d){this._m192=d.type;try{var g=this;d.onchange=function(i){g._m628(i)};d.addEventListener("change",function(i){g._m628(i)})}catch(h){_m$cde5(_m$cde1("core::entrance::VideoStream::Add network change event failed: {0}",(h||"").toString()))}_m$cde5(_m$cde1("core::entrance::VideoStream::Check network, type: {0}",this._m192))}else{var b="unknown";try{var c=navigator.userAgent;var a=(navigator.platform=="Win32")||(navigator.platform=="Windows");var f=(navigator.platform=="Mac68K")||(navigator.platform=="MacPPC")||(navigator.platform=="Macintosh")||(navigator.platform=="MacIntel");if(f){b="mac"}else{if(String(navigator.platform).toLowerCase().indexOf("android")>-1||c.toLowerCase().indexOf("android")>-1){b="android"}else{b=a?"windows":"other"}}}catch(h){}this._m192=(b=="windows"||b=="mac")?"ethernet":"mobile";_m$cde5(_m$cde1("core::entrance::VideoStream::Check network not support, os {0} default as {1}",b,this._m192))}this._m66._m811(this._m192)},_m628:function(b){var a=this._m192;this._m192=navigator.connection.type;_m$cde5(_m$cde1("core::entrance::VideoStream::Network changed from ({0}) to ({1})",a,this._m192));this._m66._m811(connectionType);this._m222._m907()},_m1042:function(){this._m222._m907();this._m860(5000)},_m860:function(a){var b=this;this._m1283=setTimeout(function(){b._m1042()},a)},_m893:function(b,a){a._m108(b)},_m1140:function(c){_m$cde14(_m$cde1("core::entrance::VideoStream::Request play, url({0})",c));var b=null;var a=new p2p$.$n1.$c58();this._m776=c;this._m893(c,a);b=this._m222.openChannel(this._m776,a._m7,this);if(!b){_m$cde15(_m$cde1("core::entrance::VideoStream::Open channel failed"))}return b},_m991:function(e,f,d){var b="";var c=this._m222._m1051(e);if(c==null){b="Channel Not Found";_m$cde5(_m$cde1("core::entrance::VideoStream::Request play slice {0}",b));return null}_m$cde14(_m$cde1("core::entrance::VideoStream::Request play slice urgent segment id: {0}",f));var a=c._m510(f,d);if(a.segment!=null&&a.stream!=null){_m$cde5(_m$cde1("core::entrance::VideoStream::Request play slice request urgent({0}) success",f))}else{_m$cde14(_m$cde1("core::entrance::VideoStream::Request play slice request urgent({0}) failed",f))}return a},_m772:function(a){_m$cde5(_m$cde1("core::entrance::VideoStream::Request stop {0}",a));this._m222._m602(a)},_m1172:function(){},_m863:function(b){var a=new p2p$.$n1.$c58();a._m108(b);return a._m7},_m895:function(c){var d,a={};d=this._m863(c);var b=0;this._m791(d,a,b);return a},_m791:function(e,a,b){var c=a.module={};c.version=p2p$.$n2.$c46.format("CDE-{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14);c.buildTime=p2p$.$n2.$c43._k89;a.system={};this._m851(e,a.system);a.enviroment={};this._m66._m65(a.enviroment);if(!e.get("ignoreChannels")){this._m222._m65(e,a)}if(e.get("needLogPipe")){var d=p2p$.$n2.$c59._m244.require(parseInt(e.get("logPipeId")||0),parseInt(e.get("logPipeTime")||0),parseInt(e.get("logPipeLevel")||255),e.get("logPipeFilter")||"",parseInt(e.get("logPipeLimit")||1),b);b=d.maxLogTime;a.logs=d.records}return b},_m851:function(e,a){a.currentTime=new Date().getTime()/1000;var c=p2p$.$n14.$c33._m753();var d=a.storage={};var b=d["default"]={};b.name=c._m769();b.dataSize=c._m1148();b.dataCapacity=c._m482()}};p2p$.ns("$n15");p2p$.$n15.$c11=_m$cde18._m41({_m420:null,_m937:null,_m888:null,_m694:null,_m1037:500,_m1052:0,init:function(a){this._m420=[];this._m937=null;this._m888=a;this._m1052=1;this._m694=document.getElementById("cde-log-container")},_m985:function(a){var b=this;this._m937=setTimeout(function(){b._m1028()},a)},_m1028:function(){this.upload();this._m985(2000)},_m764:function(h,a,b){var c=p2p$.$n2.$c47._m357();var g="["+c+" - "+a+"]"+b;if(this._m888){$.post(this._m888,{sessionid:p2p$.$n1.$c23._m636,log:g},function(i,e){})}if(this._m694){try{if(this._m694.value.length>100000){this._m694.value=""}if(this._m694.value){this._m694.value+="\r\n"}this._m694.value+=g}catch(f){}}if(this._m420.length>=this._m1037){this._m420.shift()}var d=new Date().getTime()*1000;this._m420.push({level:h,id:this._m1052++,localTime:d,absTime:d,content:b})},upload:function(){var a="";for(var b=0;b<this._m420.length;b++){a+=this._m420[b]+"\r\n"}this._m420=[];this._m10=new p2p$.$n1.$c7("http://127.0.0.1:8000/",this,"POST","","upload::log",{log:a});this._m10.load()},_m106:function(a){var b=false;this._m10=null;if("upload::log"==a._m294){if(!a._m107||a._m40<200||a._m40>=300){return b}else{}}},require:function(e,b,a,d,f,c){var j={records:[],maxLogTime:c};for(var g=0;g<this._m420.length;g++){var h=this._m420[g];if(h.id<=e||h.absTime<=b){continue}else{if((h.level&a)==0){continue}else{if(d&&h.content.indexOf(d)<0){continue}}}j.maxLogTime=Math.max(j.maxLogTime,h.absTime);j.records.unshift(h);if(j.records.length>=f){break}}return j}});p2p$.ns("$n14");p2p$.$n14.$c41Static={_k17:30*1024*1024,_k39:60*1024*1024,_k78:1000*1024*1024},p2p$.$n14.$c41=_m$cde18._m41({_m830:"",_m78:false,_m279:0,_m122:0,_m452:0,_m872:0,init:function(a){this._m830=a;this._m78=false;this._m279=0;this._m122=p2p$.$n14.$c41Static._k17;this._m452=p2p$.$n14.$c41Static._k78;this._m872=500},_m769:function(){return this._m830},_m1148:function(){return this._m279},_m482:function(){return this._m122},_m757:function(){return this._m872},_m1240:function(b){var a=this._m122;if(b<=this._m452){this._m122=p2p$.$n14.$c41Static._k17>b?p2p$.$n14.$c41Static._k17:b}else{this._m122=this._m452}return a},available:function(){return this._m78}});p2p$.ns("$n14");p2p$.$n14.MemoryBlock=_m$cde18._m41({_m1203:false,_m17:0,_m570:0,_m1137:0,_m90:"",init:function(){this._m1203=false;this._m17=0;this._m570=0;this._m1137=0;this._m90=""}});p2p$.$n14.$c13=p2p$.$n14.$c41._m41({_m775:false,_m247:null,_m22:null,init:function(a){this._m22=a;this._super("memory");this._m775=false;this._m247=new p2p$.$n2.$c60()},open:function(){this._m247.clear();this._m775=false;this._m122=200*1024*1024;this._m452=this._m122;if(this._m122<p2p$.$n14.$c41Static._k17){this._m775=true;this._m122=p2p$.$n14.$c41Static._k17;this._m452=this._m122}else{if(this._m122>p2p$.$n14.$c41Static._k39){this._m122=p2p$.$n14.$c41Static._k39}}_m$cde5(_m$cde1("core::storage::MemoryBucket::Open successfully"));this._m78=true;return true},close:function(){_m$cde5(_m$cde1("core::storage::MemoryBucket::losing...."));this._m78=false;this._m247.clear();_m$cde5(_m$cde1("core::storage::MemoryBucket::Closed"));return true},_m916:function(g){var i=0;var a=-1;var h=null;for(var b=0;b<this._m247.length;b++){var c=this._m247.element(b);if(c.key==g){continue}if(a<0||c.value._m570<a){h=c;a=c.value._m570}}if(h!=this._m247.element(this._m247.length-1)){_m$cde5(_m$cde1("core::storage::MemoryBucket::Clear expire block({0}), size({1}), last write({2})",h.key,h.value._m90.length,p2p$.$n2.$c46._m503(h.value._m570,"yyyy-M-d h:m:s")));i++;this._m279-=h.value._m90.length;this._m247.erase(h.key);var f=h.key.split("//");if(f.length>=3){for(var b=0;b<this._m22._m91.length;b++){var d=this._m22._m91.element(b);if(d.value.id_==f[1]){var e=d.value;e._m700(f[2])}}}}return i},exists:function(a){return this._m247.find(a)},archived:function(a){},read:function(a,f,c){var b=this._m247.find(a);if(!b){return -1}if(typeof c=="undefined"){c=p2p$.$n2.$c44._m751()}var e=this._m247.get(a);var d=null;if(c==p2p$.$n2.$c44._m751()){d=e._m90}else{if(f==0&&c==e._m90.length){d=e._m90}else{d=e._m90.subarray(f,f+c)}}return d},write:function(a,g,d,c){if(this._m279+c>this._m122){while(this._m279+c>this._m122){if(this._m916(a)<=0){break}}}var f=this._m247.get(a);f._m17=f._m570=p2p$.$n2.$c47._m9();var e=g+c;var b=(e>f._m90.length)?(e-f._m90.length):0;if(b>0){f._m90=new Uint8Array(e);this._m279+=b}f._m90.set(d,g);return true},archive:function(a,b){},reserve:function(a,c){var d=this._m247.get(a);if(typeof d=="undefined"||d==null){d=new p2p$.$n14.MemoryBlock();this._m247.set(a,d)}d._m17=d._m570=p2p$.$n2.$c47._m9();var b=(c>d._m90.length)?(c-d._m90.length):0;if(b>0){d._m90=new Uint8Array(c);this._m279+=b}return true},remove:function(a){var b=this._m247.find(a);if(!b){return -1}var c=this._m247.get(a);this._m279-=c._m90.length;this._m247.erase(a);return true}});p2p$.ns("$n14");p2p$.$n14.$c33={_m699:null,_m497:null,_m144:function(a){this._m699=[];this._m497=null;this._m497=new p2p$.$n14.$c13(a);this._m699.push(this._m497);for(var c=0;c<this._m699.length;c++){var b=this._m699[c];if(!b.open()){_m$cde5(_m$cde1("core::storage::Pool::Open bucket({0}) failed",b._m769()));return false}}_m$cde5(_m$cde1("core::storage::Pool::Initialize successfully"));return true},exit:function(){_m$cde5(_m$cde1("core::storage::Pool::Exiting...."));for(var b=0;b<this._m699.length;b++){var a=this._m699[b];a.close()}_m$cde5(_m$cde1("core::storage::Pool::Exited"))},_m753:function(){return this._m497},_m1231:function(){return this._m497}};p2p$.ns("$n1");p2p$.$n1.$c58=_m$cde18._m41({_m181:"",_m201:"",_m161:0,_m763:"",_m429:"",_m899:"",_m7:null,init:function(){this._m181="";this._m201="";this._m161=0;this._m763="";this._m429="";this._m899="";this._m7=new p2p$.$n2.$c60()},getParams:function(){return this._m7},_m108:function(a){p2p$.$n2.$c46._m1105(a,this,false)},toString:function(){var b=(this._m161==0)||(this._m181=="http"&&this._m161==80)||(this._m181=="https"&&this._m161==443);var a=this._m181==""?"http":this._m181;var c;if(b){c=a+"://"+this._m201+this._m429}else{c=a+"://"+this._m201+":"+this._m161+this._m429}return c+this._m693()},_m693:function(a){var d="";var b=true;if(typeof a=="undefined"){b=true}else{b=a}if(!this._m7.empty()){for(var c=0;c<this._m7._m31.length;c++){if(b){d+="?"}else{d+="&"}d+=(p2p$.$n2.$c46._m403(this._m7._m31[c].key)+"="+p2p$.$n2.$c46._m403(this._m7._m31[c].value));b=false}}if(this._m899!=""){d+="#";d+=_m899}return d}});p2p$.ns("$n1");p2p$.$n1.NetworkType={_k107:0,_k25:1,_k45:2,_k54:3,_k106:4,_k102:5,_k104:6,_k105:7,_k133:8};p2p$.$n1.$c23={_m203:false,_m867:false,_m351:false,_m151:false,_m739:false,_m143:false,_m154:false,_m534:0,_m1153:0,_m1265:"",_m248:"",_m680:"",_m679:"",_m282:"",_m213:"",_m636:"",_m645:"",_m436:"",_m316:"",_m145:"",_m332:"",_m1161:"",_m1075:"",_m818:"",_m819:"",_m862:0,_m95:0,_m86:0,_m113:0,_m129:0,_m265:false,_m121:false,_m48:false,_m72:false,_m471:"",_m723:"",_m990:null,_m535:"",_m511:"",_m732:false,_m426:false,_m669:false,_m617:"",_m144:function(){if(this._m203){return}this._m203=true;this._m990=new p2p$.$n2.$c60();this._m867=false;this._m351=true;this._m151=true;this._m739=false;this._m143=false;this._m154=false;this._m534=p2p$.$n1.NetworkType._k25;this._m1153=800;this._m248="800";this._m213=p2p$.$n2.$c46.format("CDE-{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14);this._m636=p2p$.$n2.$c46.format("{0}{1}{2}{3}",Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),p2p$.$n2.$c47._m9());this._m818="tvts";this._m819="1";this._m862=0;this._m95=120;this._m86=0;this._m113=0;this._m129=-1;this._m471="";this._m723="";this._m265=false;this._m121=false;this._m48=false;this._m72=false;this._m145=this._m1098();this._m1139=this._m1050();this._m332=this._m1188()},close:function(){},_m238:function(){if(this._m534==p2p$.$n1.NetworkType._k54||this._m534==p2p$.$n1.NetworkType._k25){return false}else{return true}},_m1248:function(){},_m811:function(b){var a=0;if(b=="ethernet"){a=p2p$.$n1.NetworkType._k25}else{if(b=="cellular"||b=="mobile"||b=="wimax"){a=p2p$.$n1.NetworkType._k45}else{if(b=="wifi"){a=p2p$.$n1.NetworkType._k54}else{a=p2p$.$n1.NetworkType._k45}}}this._m534=a;this._m351=!this._m238()},_m1206:function(a){},_m992:function(b){if(!this._m145){var a=b.get("hwtype");if(a){this._m145=a}}if(!this._m332){var a=b.get("ostype");if(a){this._m332=a}}},_m1084:function(a){if(a._m946){this._m645=a._m946}else{if(this._m645){a._m946=this._m645}}if(a._m795){this._m436=a._m795}else{if(this._m436){a._m795=this._m436}}if(a._m316){this._m316=a._m316}else{if(this._m316){a._m316=this._m316}}},_m568:function(a){return a},_m1221:function(a){},_m874:function(){return"FF-EE-DD-CC-BB-AA"},_m1050:function(){var d={};var b=navigator.userAgent.toLowerCase();if(b.indexOf("eui")>-1){return"eui"}var c=/(msie|firefox|chrome|opera|version).*?([\d.]+)/;var a=b.match(c)||[];d.browser=(a[1]||"").replace(/version/,"'safari");d.ver=(a[2]||"");return d.browser},_m1098:function(){var a=navigator.userAgent;var c=a.toLowerCase();if(c.indexOf("x600")>-1){return"Letv-x600"}if(c.indexOf("x800")>-1){return"Letv-x800"}if(c.indexOf("x900")>-1){return"Letv-x900"}if(String(navigator.platform).toLowerCase().indexOf("iphone")>-1||c.indexOf("iphone")>-1){return"iPhone"}var e=c.split(";");for(var b=0;b<e.length;b++){var f=e[b].indexOf("build");if(f>-1){var d=e[b].substring(0,f);return p2p$.$n2.$c46.trim(d)}}return"Unkonwn"},_m1188:function(){var d=navigator.userAgent;var f=(navigator.platform=="Win32")||(navigator.platform=="Windows");var g=(navigator.platform=="Mac68K")||(navigator.platform=="MacPPC")||(navigator.platform=="Macintosh")||(navigator.platform=="MacIntel");if(g){return"Mac"}if(String(navigator.platform).toLowerCase().indexOf("iphone")>-1||d.toLowerCase().indexOf("iphone")>-1){return"iPhone"}if(String(navigator.platform).toLowerCase().indexOf("android")>-1||d.toLowerCase().indexOf("android")>-1){return"Android"}var c=(navigator.platform=="X11")&&!f&&!g;if(c){return"Unix"}var a=(String(navigator.platform).indexOf("Linux")>-1);if(a){return"Linux"}if(f){var e=d.indexOf("Windows NT 5.0")>-1||d.indexOf("Windows 2000")>-1;if(e){return"Win2000"}var j=d.indexOf("Windows NT 5.1")>-1||d.indexOf("Windows XP")>-1;if(j){return"WinXP"}var b=d.indexOf("Windows NT 5.2")>-1||d.indexOf("Windows 2003")>-1;if(b){return"Win2003"}var h=d.indexOf("Windows NT 6.0")>-1||d.indexOf("Windows Vista")>-1;if(h){return"WinVista"}var i=d.indexOf("Windows NT 6.1")>-1||d.indexOf("Windows 7")>-1;if(i){return"Win7"}}return"other"},_m496:function(){var a={mediasource:false,webm:false,mp4:false,ts:false};try{var b=window.MediaSource||window.WebKitMediaSource;if(!!!b){}else{a.mediasource=true;a.webm=b.isTypeSupported('video/webm; codecs="vorbis,vp8"');a.mp4=b.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');a.ts=b.isTypeSupported('video/mp2t; codecs="avc1.42E01E,mp4a.40.2"')}}catch(c){}return a}};p2p$.ns("$n1");p2p$.$n1.$c4=_m$cde18._m41({_m42:null,_m400:null,_m1003:null,_m867:false,_m834:false,_m1104:"",_m213:"",_m145:"",_m1299:"",_m456:"",_m1001:"",_m865:"",_m1047:"",_m797:"",_m1032:"",_m550:"",_m364:"",_m365:"",_m366:"",_m483:0,_m139:0,_m289:0,_m86:0,_m113:0,_m143:false,_m154:0,_m1141:0,_m688:0,_m715:0,_m1072:0,_m1191:0,_m648:"",_m946:"",_m795:"",_m316:"",_m1123:"",_m729:"",_m988:0,_m488:null,_m323:0,_m89:0,_m1007:0,_m1082:false,_m151:false,_m526:false,_m304:0,_m262:0,_m330:0,_m214:false,_m1190:"",_m815:"",_m675:"",_m774:"",_m1121:0,_m199:0,_m147:0,_m157:0,_m174:0,_m327:0,_m942:false,_m296:false,_m485:0,_m909:0,_m370:0,_m129:0,_m265:false,_m121:false,_m48:false,_m72:false,_m373:"",_m274:"",_m781:"",_m246:"",_m115:"",_m326:"",_m232:0,_m196:0,_m486:0,_m85:0,_m112:0,_m547:0,_m470:0,_m105:0,_m155:0,_m667:0,_m665:false,_m740:0,_m719:0,_m938:"",_m368:false,_m381:false,_m444:false,init:function(){this._m42=new p2p$.$n1.$c58();this._m867=false;this._m834=false;this._m139=1;this._m289=60;this._m86=0;this._m113=0;this._m143=false;this._m154=false;this._m797="lm3u8";this._m1141=0;this._m688=0;this._m715=0;this._m1072=0;this._m1191=0;this._m988=1;this._m488=0.1;this._m323=10;this._m89=10;this._m1007=10;this._m1082=true;this._m151=true;this._m214=false;this._m526=false;this._m304=50000;this._m262=120000;this._m330=30000;this._m1121=5;this._m199=30;this._m147=5;this._m157=20;this._m174=1;this._m327=1;this._m942=false;this._m296=true;this._m485=3;this._m909=0;this._m370=0;this._m129=-1;this._m265=false;this._m121=false;this._m48=false;this._m72=false;this._m232=0;this._m196=0;this._m486=0;this._m85=0;this._m112=0;this._m547=0;this._m470=0;this._m105=0;this._m155=0;this._m667=0;this._m665=false;this._m740=0;this._m719=0;this._m368=false;this._m381=false;this._m444=false},_m144:function(a,b){this._m42=a;this._m213=p2p$.$n2.$c46.format("CDE-{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14);this._m145=p2p$.$n2.$c46._m1239(this._m42._m7.get("hwtype"));this._m332=this._m42._m7.get("ostype");this._m139=p2p$.$n2.$c46._m94(this._m42._m7.get("termid"),1);this._m1001=this._m42._m7.get("platid");this._m865=this._m42._m7.get("splatid");this._m1047=this._m42._m7.get("vtype");this._m1104=this._m42._m7.has("stream_id")?this._m42._m7.get("stream_id"):"";this._m1032=this._m42._m7.has("uuid")?this._m42._m7.get("uuid"):"";this._m550=this._m42._m7.has("ch")?this._m42._m7.get("ch"):"";this._m143=b._m143;this._m154=b._m154;if(this._m145==""||!b._m145==""){this._m145=b._m145}if(this._m332==""||!b._m332==""){this._m332=b._m332}if(b._m86!=0){this._m86=b._m86}if(b._m113!=0){this._m113=b._m113}if(b._m129>0){this._m129=b._m129}if(b._m535){this._m381=true;this._m115="ws://"+b._m535}if(b._m511){this._m368=true;this._m274=b._m511}if(b._m617){this._m444=true;this._m326="stun:"+b._m617}if(b._m426){this._m72=b._m426}if(b._m669){this._m48=b._m426}this._m483=="";this._m364=this._m42._m7.has("p1")?this._m42._m7.get("p1"):"";this._m365=this._m42._m7.has("p2")?this._m42._m7.get("p2"):"";this._m366=this._m42._m7.has("p3")?this._m42._m7.get("p3"):"";if(this._m364!=""||this._m365!=""||this._m366!=""){this._m483=p2p$.$n2.$c46.format("p1={0}&p2={1}&p3={2}",this._m364,this._m365,this._m366)}},_m835:function(b,a){if(a.hasOwnProperty("cdnMultiRequest")){this._m296=a.cdnMultiRequest}if(b.hasOwnProperty("debug")){this._m867=b.debug}if(b.hasOwnProperty("mcdn")){this._m296=b.mcdn}if(b.hasOwnProperty("ccdn")){this._m485=b.ccdn}if(b.hasOwnProperty("dsratio")){this._m129=b.dsratio}},_m1208:function(a){this._m400=a;this._m946=a.geo;this._m795=a.desc;this._m316=a.remote;var b=this._m946.split(".");if(b.length>0){this._m648=p2p$.$n2.$c46.trim(b[0]);this._m688=0;for(var c=0;c<this._m648.length&&c<2;c++){this._m688=this._m688*256+(this._m648[c]).charCodeAt()}}if(b.length>1){this._m715=p2p$.$n2.$c46._m94(b[1])}if(b.length>2){this._m1072=p2p$.$n2.$c46._m94(b[2])}if(b.length>3){this._m1141=p2p$.$n2.$c46._m94(b[3])}},_m652:function(){},_m1253:function(){}});p2p$.ns("$n1");p2p$.$n1.$c7=_m$cde18._m41({_m124:null,scope:null,method:"GET",config:null,type:"",_m294:"",_m39:"",endTime:"",_m156:"",_m97:0,_m111:-1,_m40:0,_m190:-1,_m35:"",_m107:false,_m731:0,_m696:0,_m686:0,_m655:0,_m812:"",_m77:null,_m352:0,init:function(f,a,e,d,b,c){this._m124=f;this.scope=a;this.method=e||"GET";this.type=d||"";this._m294=b||"";this._m39=p2p$.$n2.$c47._m9();this._m190=0;this._m731=0;this._m696=0;this._m686=0;this._m655=0;this._m97=0;this._m111=0;this._m40=0;this._m812="";this._m35="";this._m393="";this._m957=null;this._m77=null;if(this.method=="POST"){this._m957=c}this._m352=0},log:function(a){if("cdn::range-data"==this._m294){_m$cde5(_m$cde1("core::supernode::HttpDownloader [{0}] Download {1}, Segment ({2}/{3}-{16}), url({4}), response code({5}), data({6}/{7} Bytes), resolved time({8} ms), connected time({9} ms), responsed time({10} ms), total used time({11} ms), transfered time({12} ms), ready State({13}), speed({14}), bytes({15})",this._m294,(a==""?(this._m107?"OK":"FAILED"):a),this._m812?this._m812._m74:0,this._m812?this._m812._m837:0,this._m124,this._m40,this._m107?this._m35.length:0,this._m190,this._m731,this._m696,this._m686,this._m156,this._m655,this._m352,p2p$.$n2.$c47.speed(this._m97,false),this._m111,this._m812?this._m812._m828:0))}else{_m$cde5(_m$cde1("core::supernode::HttpDownloader [{0}] Download {1}, url({2}), response code({3}), data({4}/{5} Bytes), resolved time({6} ms), connected time({7} ms), responsed time({8} ms), total used time({9} ms), transfered time({10} ms), ready State({11}), speed({12}), bytes({13})",this._m294,(a==""?(this._m107?"OK":"FAILED"):a),this._m124,this._m40,this._m107?this._m35.length:0,this._m190,this._m731,this._m696,this._m686,this._m156,this._m655,this._m352,p2p$.$n2.$c47.speed(this._m97,false),this._m111))}},load:function(){if(this._m294=="cdn::range-data"){this.load2()}else{this.load1()}},load1:function(){var a=this;if(a._m294=="cdn::range-data"){this.type="text"}_m$cde5(_m$cde1("core::supernode::HttpDownloader [{0}] Start download {1}...",this._m294,this._m124));this._m77=$.ajax({url:this._m124,type:this.method,dataType:"text",error:function(b,d,c){a.endTime=p2p$.$n2.$c47._m9();a._m156=a.endTime-a._m39;a._m107=false},complete:function(b,c){a._m40=b.status;a._m352=b.readyState;a._m660()},success:function(h,j){a.endTime=p2p$.$n2.$c47._m9();a._m156=a.endTime-a._m39;a._m35=h;_m$cde14(_m$cde1("core::supernode::HttpDownloader textStatus {0}",j));if(a._m294=="cdn::range-data"){var c=new ArrayBuffer(h.length);var b=new Uint8Array(c);for(var d=0,g=h.length;d<g;d++){b[d]=h.charCodeAt(d)}var f=new Uint8Array(h);a._m35=f;a._m190=f.length;a._m111=f.length}else{a._m111=a._m190=a._m35.length;if("json"==a.type&&typeof(a._m35)=="string"){try{a._m35=JSON.parse(a._m35)}catch(e){_m$cde15(_m$cde1("core::supernode::HttpDownloader::Parse response json data failed, url:{0}, error:{1}",a._m124,(e||"").toString()))}}}a._m97=(a._m111*1000/a._m156);a._m97=Math.round(a._m97*100)/100;a._m107=true}})},close:function(){if(this._m77){this._m77.abort()}},load2:function(){var d=this._m77=this._m1076();var b=this;d.onreadystatechange=function(){if(this.readyState==1){b._m352=1}if(this.readyState==2){b._m352=2}if(this.readyState==3){b._m352=3}if(this.readyState==4){b._m352=4;b.endTime=p2p$.$n2.$c47._m9();b._m40=this.status;b._m35=this.response||"";b._m156=b.endTime-b._m39;if(this.status>=200&&this.status<300){if(b._m294=="cdn::range-data"){var e=new Uint8Array(b._m35);b._m35=e;b._m190=e.length;b._m111=e.length}else{if("json"==b.type){var f=JSON.stringify(b._m35);b._m111=b._m190=f.length}else{b._m111=b._m190=b._m35.length}}b._m97=(b._m111*1000/b._m156);b._m97=Math.round(b._m97*100)/100;b._m107=true}else{b._m107=false}b._m660()}};d.open(b.method,b._m124);try{d.responseType=this.type;_m$cde5(_m$cde1("core::supernode::HttpDownloader [{0}] Start download {1}...",this._m294,this._m124))}catch(c){alert(c);alert(this.type)}var a=new p2p$.$n1.$c58();a._m108(this._m124);this._m393=a._m201+(a._m161==0?"":":"+a._m161);try{if(this._m957){d.send(_m957)}else{d.send(null)}}catch(c){console.log(c)}},_m1226:function(a){this._m812=a},_m1076:function(){var b=null;if(window.ActiveXObject){var a=new Array("Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP");for(var c=0;c<a.length;c++){try{b=new ActiveXObject(a[c])}catch(d){continue}if(b){break}}}else{if(window.XMLHttpRequest){b=new XMLHttpRequest();if(b.overrideMimeType){b.overrideMimeType(this.type)}}}return b},_m1256:function(){if(typeof this.scope._m514!="undefined"&this.scope._m514 instanceof Function){this.scope._m514(this)}},_m1270:function(stringVal){eval("var theJsonVal = "+stringVal);return theJsonVal},_m660:function(){this.log("");this.scope._m106(this)},sendInfo:function(a){var b={};b.code="Mobile.Info.Debug";b.info=a;this.config.sendInfo(b)}});p2p$.ns("$n1");p2p$.$n1.$c27=_m$cde18._m41({id_:0,_m32:0,_m1186:0,_m273:0,_m49:0,_m1184:false,_m131:0,_m344:0,_m730:0,_m859:0,_m620:0,_m355:0,_m98:false,_m328:false,_m116:0,_m27:0,_m703:0,_m26:0,_m906:0,_m850:0,init:function(){this.id_=0;this._m32=p2p$.$n2.META_PIECE_TYPE._k1;this._m1186=0;this._m273=0;this._m49=0;this._m1184=false;this._m131=0;this._m344=0;this._m730=Math.floor(Math.random()*100+1);this._m859=0;this._m620=0;this._m355=0;this._m98=false;this._m328=false;this._m116=0;this._m27=0;this._m703=0;this._m26=0;this._m906=0},fork:function(){var a=new p2p$.$n1.$c27();for(var b in this){a[b]=this[b]}return a},verify:function(e,b){if(this._m49<=0||this._m1184){return true}var d=47;var f=0;var c=4294967295;if(b>=188){f+=4;while(f+d<b){var a=p2p$.$n2.$c44._m73("4",e,f);c^=a;f+=d}}c=(~(((c>>16)&65535)+(c&65535)))&65535;return this._m131==c},_m1008:function(b,a){},_m87:function(){}});p2p$.ns("$n1");p2p$.$n1.$c16=_m$cde18._m41({id_:0,_m39:0,_m358:0,_m50:0,_m477:0,_m344:0,_m605:0,_m487:0,_m49:0,_m673:false,_m709:false,_m295:false,_m158:false,_m1070:false,_m422:false,_m42:"",_m398:"",_m776:"",_m578:"",_m567:"",_m28:null,_m81:null,_m153:0,_m137:0,_m671:0,_m119:0,_m26:0,_m249:0,_m117:0,_m242:0,_m736:0,_m727:0,_m737:0,init:function(){this._m28=[];this.id_=-1;this._m39=0;this._m358=0;this._m50=0;this._m477=-1;this._m344=0;this._m605=0;this._m487=0;this._m49=0;this._m671=0;this._m119=0;this._m26=0;this._m249=0;this._m117=0;this._m242=0;this._m736=0;this._m727=0;this._m673=false;this._m709=false;this._m295=false;this._m158=false;this._m1070=false;this._m422=false;this._m737=0},_m563:function(b,d){for(var c=0;c<this._m28.length;c++){var a=this._m28[c];if(a._m32==b&&a.id_==d){return c}}return -1},_m873:function(){var b=p2p$.$n2.$c47._m9();this._m242=b;this._m119=0;this._m249=0;for(var c=0;c<this._m28.length;c++){var a=this._m28[c];if(a._m850>0){this._m119++;if(a._m49>=0){this._m249+=a._m49}}}if(this._m119==this._m28.length){this._m26=b;_m$cde14(_m$cde1("core::supernode::MetaSegment::Segment({0}) download complete",this.id_,this._m28.length));if(this._m249<=0){this._m249=this._m49}}if(this._m117>0&&b>this._m117){this._m727=this._m249*1000/(b-this._m117)}},_m257:function(){this._m736=0;this._m26=0;this._m119=0;this._m249=0;for(var b=0;b<this._m28.length;b++){var a=this._m28[b];a._m26=0;a._m850=0;a._m703=0;a._m906=0}},_m1096:function(a){return"/play/slices/"+this.id_+".ts?id="+a+"&segment="+this.id_}});p2p$.ns("$n1");p2p$.$n1.DATA_VERIFY_METHOD={_k53:0,_k60:1};p2p$.$n1.$c32=_m$cde18._m41({_m32:0,_m612:false,_m69:false,_m132:false,_m885:"",_m1158:"",_m649:0,_m567:"",_m1122:"",_m672:"",_m1033:"",_m62:"",_m577:"",_m562:0,_m12:0,_m153:0,_m137:0,_m777:0,_m600:0,_m293:0,_m338:0,_m208:0,_m653:0,_m263:0,_m205:0,_m30:0,_m279:0,_m747:0,_m1258:"",_m75:"",_m353:"",_m93:"",_m716:"",_m822:"",_m603:"",_m1234:null,_m6:null,_m188:null,_m187:null,init:function(){this._m6=[];this._m188=new p2p$.$n2.$c60();this._m187=new p2p$.$n2.$c60();this._m32=p2p$.$n2.META_DATA_TYPE._k6;this._m612=true;this._m69=false;this._m132=true;this._m338=p2p$.$n1.DATA_VERIFY_METHOD._k53;this.tidy()},tidy:function(){this._m649=0;this._m153=0;this._m137=0;this._m777=0;this._m600=0;this._m293=0;this._m208=0;this._m653=0;this._m562=0;this._m12=0;this._m205=0;this._m263=p2p$.$n2.$c47._m9();this._m30=-1;this._m279=0;this._m747=0;this._m885="";this._m567="";this._m672="";this._m62="";this._m6=[];this._m577="";this._m188.clear();this._m187.clear()},fork:function(){var a=new p2p$.$n1.$c32();for(var b in this){a[b]=this[b]}return a},load:function(k,p,g){this.tidy();this._m612=true;this._m600=0;var q=k.split("\n");var f=0;var o=0;var h=new p2p$.$n1.$c16();h._m737=p;var c=(this._m69||p2p$.$n2.META_DATA_TYPE._k7==this._m32);if(c){h._m81=[]}this._m205=p2p$.$n2.$c47._m9();for(var b=0;b<q.length;b++){var m=q[b];m=p2p$.$n2.$c46.trim(m);if(""==m){continue}if(m[0]!="#"){if(h.id_<0||(this._m69&&this._m32!=p2p$.$n2.META_DATA_TYPE._k7)){h.id_=this._m6.length}if(this._m69&&h._m709){h._m158=true}h._m137=this._m137;h._m153=this._m153;h._m42=m;h._m398=p2p$.$n2.$c46._m861(h._m42,this._m716);h._m776=h._m1096(this._m75);if(h._m28.length==0){var d=new p2p$.$n1.$c27();d._m32=p2p$.$n2.META_PIECE_TYPE._k16;d.id_=(h.id_>0)?h.id_:this._m6.length;h._m487++;d._m49=0;d._m131=0;d._m273=h._m49;d._m344=h._m28.length;h._m158=true;h._m49+=d._m49;h._m28.push(d)}if(h._m39<=0){h._m39=this._m208}if(this._m32==p2p$.$n2.META_DATA_TYPE._k6||this._m32==p2p$.$n2.META_DATA_TYPE._k22){h._m358=this._m208}else{h._m358=h._m39}if(c){if(h._m81&&h._m81[0]){this._m600=1}if(h._m81&&h._m81[1]){this._m600=2}}this._m6.push(h);this._m293+=(h._m605+h._m487);this._m208+=h._m50;this._m279+=h._m49;if(h._m709&&o<=0){this._m777++;this._m653+=h._m50}else{o++}h=new p2p$.$n1.$c16();h._m737=p;if(this._m69||c){h._m81=[]}continue}var i=0,a="",l="";if((i=m.indexOf(":"))==-1){a=m}else{a=(i>0)?m.substr(0,i):"";l=((i+1)<m.length)?m.substr(i+1):""}a=p2p$.$n2.$c46.trim(a);l=p2p$.$n2.$c46.trim(l);if(p2p$.$n2.$c46._m118(a,"#EXT-X-VERSION",true)==0){this._m885=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-X-ALLOW-CACHE",true)==0){this._m1158=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-X-TARGETDURATION",true)==0){this._m649=p2p$.$n2.$c46._m94(l,0)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-X-MEDIA-SEQUENCE",true)==0){this._m562=p2p$.$n2.$c46._m94(l,0)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-X-PROGRAM-DATE-TIME",true)==0){this._m1033=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-M3U8-TYPE",true)==0){this._m1122=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-M3U8-VER",true)==0){this._m672=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-PROGRAM-ID",true)==0){this._m567=l;h._m567=l;h._m673=true}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-PIC-WIDTH",true)==0){this._m153=p2p$.$n2.$c46.parseFloat(l,0)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-PIC-HEIGHT",true)==0){this._m137=p2p$.$n2.$c46.parseFloat(l,0)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-DIRECT",true)==0){h._m709=p2p$.$n2.$c46._m94(l,0)?true:false}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-PATH1",true)==0&&h._m81!=null){h._m81[0]=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-PATH2",true)==0&&h._m81!=null){h._m81[1]=l}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-AD-MONITOR-URL",true)==0){h._m578=l}}}}}}}}}}}}}}if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-START-TIME",true)==0){h._m39=p2p$.$n2.$c46.parseFloat(l,0)*1000}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-SEGMENT-ID",true)==0){h.id_=p2p$.$n2.$c46._m94(l,0)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-LETV-CKS",true)==0){var d=new p2p$.$n1.$c27();l=p2p$.$n2.$c46._m1181(l);var e=l.indexOf("TN=");var j=l.substr(e);if(-1!=e){d._m32=p2p$.$n2.META_PIECE_TYPE._k1;d.id_=p2p$.$n2.$c46._m94(j.substring(3,j.indexOf("&")));e=l.indexOf("KEY=");j=l.substr(e);if(-1!=e){d._m1186=p2p$.$n2.$c46._m94(j.substring(4,j.indexOf("&")))}h._m605++}else{d._m32=p2p$.$n2.META_PIECE_TYPE._k16;e=l.indexOf("PN=");j=l.substr(e);if(-1!=e){d.id_=p2p$.$n2.$c46._m94(j.substring(3,j.indexOf("&")))}h._m487++}e=l.indexOf("SZ=");j=l.substr(e);if(-1!=e){d._m49=p2p$.$n2.$c46._m94(j.substring(3,j.indexOf("&")))}e=l.indexOf("CKS=");j=l.substr(e);if(-1!=e){d._m131=p2p$.$n2.$c46._m94(j.substring(4))}d._m273=h._m49;d._m344=h._m28.length;h._m49+=d._m49;h._m28.push(d);this.maxPieceId=Math.max(f,d.id_)}else{if(p2p$.$n2.$c46._m118(a,"#EXT-X-DISCONTINUITY",true)==0){h._m295=true;_m$cde14("core::supernode::MetaData Segment is #EXT-X-DISCONTINUITY id("+h.id_+"), start time("+h._m39+")")}else{if(p2p$.$n2.$c46._m118(a,"#EXTINF",true)==0){h._m50=(p2p$.$n2.$c46.parseFloat(l,0)*1000)}}}}}}if(this._m69){}if(g){this._m498()}if(!(this._m567=="")){this._m62=this._m567+this._m672+p2p$.$n2.$c43._k86}return true},_m1152:function(b,c,a){},_m498:function(){this._m188.clear();this._m187.clear();this._m6.sort(function(g,f){return g.id_-f.id_});this._m293=0;this._m208=0;for(var e=0;e<this._m6.length;e++){var d=this._m6[e];d._m344=e;this._m208+=d._m50;if(d._m158){continue}this._m293+=d._m28.length;for(var a=0;a<d._m28.length;a++){var b=d._m28[a];var c=(p2p$.$n2.META_PIECE_TYPE._k1==b._m32)?this._m188:this._m187;c.set(b.id_,d._m344)}}},_m1243:function(b,a,c){},_m788:function(j,l,i){var c=0;var m=0;var e=0;var h=[];if(i){this._m885=j._m885;this._m562=j._m562;this._m153=j._m153;this._m137=j._m137}for(var d=0;d<this._m6.length;d++){var r=this._m6[d];e=e>r.id_?e:r.id_}for(var b=0;b<j._m6.length;b++){var g=j._m6[b];var o=false;var a=0;for(var d=0;d<this._m6.length;d++){var r=this._m6[d];if(r._m39>0){if(r.id_==g.id_){a=d;o=true;break}}else{if(r._m42==g._m42){a=d;o=true;break}}}if(o){if(l){var f=this._m6[a];var q=f;f=g;f._m42=q._m42;f._m398=q._m398;f._m776=q._m776;f._m578=q._m578;f._m422=q._m422;f._m153=q._m153;f._m137=q._m137;c++}continue}h.push(g.id_);this._m6.push(g);var p=this._m6[this._m6.length-1];if(this._m62==""){p.id_=(g._m39>0)?(p._m39/1000):(++e);if(g._m28.length==1){p._m28[0].id_=g.id_}}this._m293+=g._m28.length;m++;c++}if(c>0){this._m498()}return{_m109:m,_m371:h}},_m998:function(g){if(g._m6.length==0){return 0}var h=0;var d=0;var e=[];var c=g._m6.length-1;for(;c>=0;c--){var l=g._m6[c];if(l._m673){break}}if(c<=0){return 0}for(var a=0;a<c;a++){var f=g._m6[a];var i=false;for(var b=0;b<this._m6.length;b++){var l=this._m6[b];if(l._m39>0){if(l.id_==f.id_){i=true;break}}else{if(l._m42==f._m42){i=true;break}}}if(i){continue}e.push(f.id_);this._m6.push(f);var j=this._m6[this._m6.length-1];if(!this._m62){j.id_=(f._m39>0)?(j._m39/1000):(++d);if(f._m28.length==1){j._m28[0].id_=f.id_}}this._m293+=f._m28.length;h++}if(h>0){this._m498()}return{_m109:h,_m371:e}},_m1187:function(a){},_m734:function(){for(var b=0;b<this._m6.length;b++){var a=this._m6[b];a._m158=true}},_m1175:function(){},_m1225:function(){},_m1261:function(c,b,a){},_m1136:function(b,c,a){switch(this._m338){case p2p$.$n1.DATA_VERIFY_METHOD._k60:return b._m1008(c,a);default:return b.verify(c,a)}},_m887:function(){return this._m577},_m269:function(a){return p2p$.$n2.$c46.format("channel://{0}//{1}",this._m75,a)},_m268:function(c){for(var b=0;b<this._m6.length;b++){var a=this._m6[b];if(a.id_==c){return b}}return -1},_m261:function(a,d){var b=(p2p$.$n2.META_PIECE_TYPE._k1==a)?this._m188:this._m187;var c=b.get(d);return(c!=null?c:-1)},_m814:function(d){var b=null;for(var c=0;c<this._m6.length;c++){var a=this._m6[c];if(a.id_==d){b=a;break}}return b},_m1211:function(a){}});p2p$.ns("$n1");p2p$.$n1.$c40Static={_k52:80*1000};p2p$.$n1.$c40=_m$cde18._m41({_m90:null,init:function(){this._m90=new p2p$.$n2.$c60()},getValue:function(f){var b=f%p2p$.$n1.$c40Static._k52;var e=Math.floor(b/8);var d={value:0};if(b<0||e<0||!this._m90.find2(e,d)){return false}var c=d.value;var a=(c&(1<<(b%8)))?true:false;return a},setValue:function(f,e){var b=f%p2p$.$n1.$c40Static._k52;var d=Math.floor(b/8);if(b<0||d<0){return false}var c=this._m90.get(d);if(typeof c=="undefined"||c==null){c=new Uint8Array(1);this._m90.set(d,c)}var a=(c&(1<<(b%8)))?true:false;c|=(1<<(b%8));this._m90.set(d,c);return a},reserve:function(a){},clear:function(b){if(b){for(var a=0;a<this._m90._m31.length;a++){this._m90._m31[a].value=new Uint8Array(1)}}else{this._m90.clear()}}});p2p$.ns("$n12");p2p$.$n12.$c1=_m$cde18._m41({_m91:null,_m741:false,_m794:0,_m750:0,_m591:0,_m66:null,init:function(a){this._m91=new p2p$.$n2.$c60();this._m66=a;this._m741=false;this._m794=3;this._m750=1000;this._m591=1},_m45:function(){return this._m66},openChannel:function(j,e,k){_m$cde14(_m$cde1("openChannel"));var f=e.find("pip")?e.get("pip"):0;var i=e.find("stream")?e.get("stream"):0;if(e.find("group")){f=e.get("group")}var b=e.find("tagtime")?(e.get("tagtime")*1000*1000):0;var g=null;if(this._m91.has(j)){g=this._m91.get(j);g._m576(false);return g}var h=new p2p$.$n1.$c58();h._m108(j);var d=(h._m7.find("tag"))?h._m7.get("tag"):"";var a=(h._m7.find("stream_id"))?h._m7.get("stream_id"):"";var c=(i>0)||a!="";if(c){g=new p2p$.$n18.$c2(j,h,this)}else{g=new p2p$.$n19.$c2(j,h,this)}g.setGroupType(f);g.setReopenMode(false);g._m835(e,this._m66._m471);g._m576(false);g._m1080(b);if(!g.open()){_m$cde15(_m$cde1("logic::base::Manager::Open new {0} channel url({1}) failed",d||"vod",j));g=null;return g}this._m91.set(j,g);_m$cde5(_m$cde1("logic::base::Manager::Open new {0} channel url({1}) OK",d||"vod",j));return g},_m602:function(b){for(var d=0;d<this._m91.length;d++){var c=this._m91.element(d);if(c.key==b){var a=c.value;_m$cde5(_m$cde1("logic::base::Manager::Close channel id({0}), type({1}), url({2}), total {3} channel(s) now",a._m793(),a._m87(),a._m702(),this._m91.size()-1));a.close();this._m91.erase(this._m91.element(d).key);delete a;return true}}},_m907:function(){var d=this._m66._m238();var c=p2p$.$n2.$c47._m9();for(var e=0;e<this._m91.length;e++){var b=this._m91.element(e).value;if(!b._m1202()||!b._m840()){continue}var a=(b._m1091()+b._m979()<c)||d||b._m1210();if(a&&b._m641()){b._m780();_m$cde5(_m$cde1("logic::base::Manager::Deactive slient channel, mobile network({0}), id({1}), type({2}), url({3})",d?"yes":"no",b._m793(),b._m87(),b._m702()))}else{if(!a&&!b._m641()){b._m771();_m$cde5(_m$cde1("logic::base::Manager::Activate slient channel, mobile network({0}), id({1}), type({2}), url({3})",d?"yes":"no",b._m793(),b._m87(),b._m702()))}}}},_m1051:function(d){var b=null;for(var c=0;c<this._m91.length;c++){var a=this._m91.element(c).value;if(a._m793()==d){b=a;break}}return b}});p2p$.ns("$n12");p2p$.$n12.$c2=_m$cde18._m41({_m541:"base",_m32:0,_m900:0,id_:"",_m910:"",_m743:"",_m331:"",_m519:"",_m908:"",_m8:null,_m42:null,_m10:null,_m47:null,_m22:null,_m58:null,_m67:null,_m221:null,_m78:false,_m565:false,_m1002:false,_m608:false,_m612:false,_m69:false,_m896:0,_m263:0,_m950:0,_m17:0,_m1071:0,_m848:0,_m601:0,_m866:0,_m407:0,_m531:0,_m459:0,_m622:0,_m784:0,_m651:0,_m571:0,_m592:0,_m507:0,_m685:0,_m584:0,_m575:0,_m219:0,_m424:0,_m659:0,_m768:0,_m30:0,_m70:0,_m288:0,_m13:0,_m68:0,_m311:0,_m385:0,_m746:0,_m138:0,_m215:0,_m71:0,_m382:"",_m1269:"",_m315:0,_m167:0,_m440:0,_m224:0,_m491:0,_m588:0,_m237:0,_m754:0,_m489:0,_m621:0,_m3:null,_m879:false,_m427:0,_m904:"",_m989:"",_m986:"",_m993:"",_m225:0,_m1023:0,_m581:false,_m469:false,_m901:false,_m508:false,_m448:false,_m441:false,_m434:false,_m336:false,_m419:false,_m590:false,_m803:false,_m300:"",_m100:0,_m445:null,_m553:null,init:function(b,d,a,c){this._m8=new p2p$.$n1.$c4();this._m3=new p2p$.$n1.$c32();this._m221=new p2p$.$n12.$c36();this._m76=new p2p$.$n8.$c38();this._m58=[];this._m67=[];this._m22=c;this._m32=b;this._m42=a;this._m900=0;this._m78=false;this._m565=false;this._m1002=false;this._m608=false;this._m612=true;this._m69=false;this._m896=0;this._m263=0;this._m17=0;this._m1071=0;this._m848=0;this._m601=60*1000;this._m866=120*1000;this._m407=0;this._m531=0;this._m459=0;this._m622=0;this._m784=0;this._m651=0;this._m571=0;this._m592=-1;this._m507=-1;this._m685=0;this._m584=0;this._m575=0;this._m219=0;this._m424=0;this._m659=-1;this._m768=-1;this._m30=-1;this._m70=-1;this._m288=-1;this._m13=0;this._m68=0;this._m311=0;this.id_=p2p$.$n2.$c57._m1185(d).toLowerCase();this._m3._m32=b;this._m3._m353=d;this._m3._m75=this.id_;this._m879=false;this._m427=0;this._m84=new p2p$.$n4.$c14(this._m22._m45(),this._m8,this._m3);this._m96=new p2p$.$n4.$c10();this._m581=false;this._m469=false;this._m901=false;this._m448=false;this._m508=false;this._m441=false;this._m434=false;this._m336=false;this._m419=false;this._m590=false;this._m803=false;this._m385=0;this._m746=0;this._m138=0;this._m215=0;this._m71=-1;this._m315=0;this._m167=0;this._m440=0;this._m950=0;this._m263=this._m17=p2p$.$n2.$c47._m9();this._m225=30*1000;this._m1023=30*1000;this._m491=0;this._m237=0;this._m224=0;this._m588=0;this._m754=0;this._m489=0;this._m621=0;this._m300="";this._m445=null;this._m553=null},_m793:function(){return this.id_},_m824:function(){return this._m541},setGroupType:function(a){this._m900=a},setReopenMode:function(a){this._m1002=a},_m835:function(b,a){this._m908=b;this._m910=b.taskid;if(b.hasOwnProperty("icp")){this._m896=b.icp}this._m3._m1258=this._m910;this._m3._m132=(this._m896==0);this._m8._m835(this._m908,a)},_m576:function(a){this._m17=p2p$.$n2.$c47._m9()},_m1080:function(a){this._m848=a},open:function(){this._m385=0;this._m746=0;this._m138=0;this._m215=0;this._m71=-1;this._m315=0;this._m167=0;this._m440=0;this._m950=this._m17=p2p$.$n2.$c47._m9();this._m459=0;this._m30=0;this._m68=0;this._m84._m144(this._m8._m400);if(this._m47!=null){this._m47.exit()}this._m47=new p2p$.$n8.$c33(this._m22._m45(),this._m8,this._m3,this);this._m78=true;this._m879=false;this._m427=0;var c=this._m22._m45();c._m992(this._m42._m7);this._m8._m144(this._m42,c);this._m42._m7.set("cde",p2p$.$n2.$c43._m683());this._m42._m7.set("cdeid",this._m22._m45()._m636);this._m42._m7.set("appid",this._m22._m45()._m248);this._m42._m7.set("format","1");this._m42._m7.set("expect","3");this._m42._m7.set("ajax","1");var a=this._m42._m7.get("tss");var d=this._m42._m7.get("m3v");if(a!="ios"){a="tvts"}if(!d||d=="0"){d="1"}this._m42._m7.set("tss",a);this._m42._m7.set("m3v",d);var b=new p2p$.$n4.$c17();b._m869=p2p$.$n4.$c17Static._k82;this._m84._m790(b);return true},close:function(){if(this._m78){this._m96.flush(this._m84,true)}this._m78=false;this._m1071=p2p$.$n2.$c47._m9();this._m58=[];this._m67=[];if(this._m34){clearTimeout(this._m34);this._m34=null}if(this._m445){clearTimeout(this._m445);this._m445=null}if(this._m553){clearTimeout(this._m553);this._m553=null}this._m84.exit();if(this._m10!=null){this._m10.close();this._m10=null}if(this._m47!=null){this._m47.exit()}this._m47=null;if(this._m32!=p2p$.$n2.META_DATA_TYPE._k22){var d=this._m183();for(var c=0;c<this._m3._m6.length;c++){var b=this._m3._m6[c];var a=this._m3._m269(b.id_);d.remove(a)}}this._m3._m6=[];return true},pause:function(){},_m1048:function(a){var b=this;this._m34=setTimeout(function(){b._m691()},a)},_m691:function(){if(this._m10!=null){this._m10.log("timeout");this._m10.close();this._m10=null}this._m385++;if(this._m385<=1){this._m607()}else{this._m223(500,"GSLB Request Failed","")}},_m1195:function(){},_m831:function(a){var b=this;this._m34=setTimeout(function(){b._m556()},a)},_m556:function(){if(this._m10){this._m10.log("timeout");this._m10.close();this._m10=null}this._m138++;if(this._m138<=3){if(!this._m69){var c=this._m8._m400.nodelist;for(var d=0;d<c.length;d++){var a=c[(d+this._m138)%c.length];var b=a.location;if(!(b=="")&&b!=this._m3._m93){this._m3._m93=b;break}}}this._m490()}else{this._m223(500,"Meta Request Failed","")}},_m1196:function(){},_m1247:function(){},_m1202:function(){return this._m78},_m1210:function(){return this._m565},_m106:function(a){var b=false;if("base::gslb"==a._m294){b=true;this._m588=a.totalUsedTime;this._m17=p2p$.$n2.$c47._m9();this._m215=a._m107?a._m40:-1;if(!a._m107||a._m40<200||a._m40>=300){if(this._m34){clearTimeout(this._m34);this._m34=null}this._m691();return b}this._m10=null;if(!this._m953(a,"")){if(52001==this._m71){if(this._m34){clearTimeout(this._m34);this._m34=null}this._m691();return b}if(this._m34){clearTimeout(this._m34);this._m34=null}this._m223(500,"GSLB Response Failed "+this._m71);return b}if(this._m34){clearTimeout(this._m34);this._m34=null}if(!this._m441){this._m441=true;this._m84._m184(p2p$.$n4.$c17Static._k49,p2p$.$n2.ERROR_CODE._k4,a._m393,this._m17-this._m263)}if(this._m608){this._m223(302,"Moved",_m3._m93);return b}if(!(""==this._m3._m93)){if(this._m612){this._m490()}else{this._m984()}}}else{if("base::meta"==a._m294){b=true;this._m17=p2p$.$n2.$c47._m9();this._m167=a._m107?a._m40:-1;if(!a._m107||a._m40<200||a._m40>=300){if(this._m34){clearTimeout(this._m34);this._m34=null}this._m556();return b}this._m10=null;if(this._m34){clearTimeout(this._m34);this._m34=null}this._m3._m716=a._m124;this._m3._m12=a._m97;if(!this._m543(a)){this._m223(500,"Meta Response Failed","");return b}if(this._m659<0&&this._m3._m6.length>0){this._m659=this._m3._m6[0].id_}this._m621++;this._m489=this._m17;this._m8._m797=this._m3._m62==""?"m3u8":"lm3u8";if(this._m3._m62==""){this._m914=302;this._m223(302,"Moved",this._m3._m93)}if(!this._m1114()){this._m223(500,"Internal Protocol Failed","");return b}if(!this._m434){this._m434=true;this._m84._m184(p2p$.$n4.$c17Static._k71,p2p$.$n2.ERROR_CODE._k4,a._m393,this._m17-this._m263)}if(this._m407<=0){this._m407=p2p$.$n2.$c47._m9()}this._m223(200,"OK",this._m3._m887())}}return b},_m607:function(){_m17=p2p$.$n2.$c47._m9();if(this._m10){this._m10.close();this._m10=null}var a=5000+(this._m385*3000);this._m1048(a);this._m10=new p2p$.$n1.$c7(this._m519,this,"GET","json","base::gslb");this._m10.load()},_m490:function(){this._m17=p2p$.$n2.$c47._m9();this._m489=this._m17;if(this._m10!=null){this._m10.log("cancel");this._m10.close();this._m10=null}var a=8*1000;this._m831(a);if(!this._m612){}this._m10=new p2p$.$n1.$c7(this._m3._m93,this,"GET","","base::meta");this._m10.load()},_m984:function(){},_m953:function(d,c){var b=d._m35;if(b==""||b==null){if(this._m71<=0){_m71=52001}}if(this._m69){b.ercode=0;b.errinfo="Direct Meta"}this._m71=b.ercode;this._m382=b.errinfo||"";this._m491=p2p$.$n2.$c47._m9();this._m224=b.forcegslb*1000;if(this._m71==424||this._m71==428){}this._m8._m1208(b);this._m22._m45()._m1084(this._m8);this._m8._m652();this._m3._m69=this._m69;if(this._m69){if(this._m608){this._m3._m93=_m3._m353}else{channelUrl=new p2p$.$n1.$c58();channelUrl._m108(_m3._m353);m3v=channelUrl._m7.m3v;if(m3v==""||m3v=="0"){}else{}}}else{this._m3._m93=this._m8._m400.location;var e=this._m8._m400.nodelist;if(""==this._m3._m93&&e.length>0){this._m3._m93=e[0]["location"]}}_m$cde5("logic::base::Channel::["+p2p$.$n2.$c54._m37(this._m32)+"] Gslb responsed, error code("+this._m71+"), details("+this._m382+"), url("+d._m124+"), channel("+this.id_+")");if(!this._m69){var a=b.nodelist;for(var h=0;h<a.length;h++){var g=a[h];var f=g.location;_m$cde5("logic::base::Channel ["+p2p$.$n2.$c54._m37(this._m32)+"] Gslb cdn node("+(h+1)+"),url("+f+")")}}if(""==this._m3._m93){_m$cde15("logic::base::Channel Gslb response failed, no g3 meta url location, url("+d._m124+"), channel("+this.id_+"), size(0)");if(this._m71<=0){this._m71=52002}return false}return true},_m543:function(b){if(this._m612){if(!this._m3.load(b._m35,b._m156,true)){_m$cde15("logic::base::Channel ["+p2p$.$n2.$c54._m37(this._m32)+"]Parse hls meta response failed, url("+b._m124+"), channel("+this.id_+"), size("+b._m35.length+")")}}else{if(!_m3._m1152(b._m124,b._m1233,_m993)){_m$cde15("logic::base::Channel ["+p2p$.$n2.$c54._m37(this._m32)+"]Parse file meta response failed, url("+b._m124+"), channel("+this.id_+"), size("+b._m35.length+")");return false}}_m$cde5("logic::base::Channel ["+p2p$.$n2.$c54._m37(this._m32)+"]Parsed file meta response OK, "+this._m3._m6.length+" segment(s), duration "+this._m3._m208+" msec, data size "+this._m3._m279+" byte(s), url("+b._m124+"), channel("+this.id_+"), size("+b._m35.length+")");if(this._m100!=0){if(this._m3){for(var c=0;c<this._m3._m6.length;c++){var a=this._m3._m6[c];if(a._m39<=this._m100*1000&&this._m100*1000<a._m39+a._m50){this._m30=a.id_}}}}return true},_m1201:function(){},_m223:function(a,c,b){this._m427=a;if(200!=a&&302!=a){_m$cde15("logic::base::Channel::Meta complete, channel("+this.id_+") open failed, response "+a+","+c+" to player")}else{_m$cde5("logic::base::Channel::Meta complete, open successfully")}},_m681:function(a,b){var c=this;this._m445=setTimeout(function(){c._m298(a)},b)},_m430:function(a,b){var c=this;this._m553=setTimeout(function(){c._m298(a)},b)},_m1209:function(){if(this._m96){this._m96.flush(this._m84,false)}},_m267:function(j){j._m212=[];if(!this._m8._m151||!this._m22._m45()._m151){var a=new p2p$.$n8.PieceRangeItem();a._m32=p2p$.$n2.META_PIECE_TYPE._k1;a._m253=0;a._m359=1;j._m212.push(a);return}var b=new p2p$.$n8.PieceRangeItem();var i=new p2p$.$n8.PieceRangeItem();b._m32=p2p$.$n2.META_PIECE_TYPE._k1;b._m253=-1;b._m359=0;i._m32=p2p$.$n2.META_PIECE_TYPE._k16;i._m253=-1;i._m359=0;for(var c=0;c<this._m3._m6.length;c++){var h=this._m3._m6[c];if(h._m158){continue}for(var e=0;e<h._m28.length;e++){var l=h._m28[e];var f=(l._m32==p2p$.$n2.META_PIECE_TYPE._k1)?b:i;if(l._m26<=0){if(f._m253>=0){j._m212.push(f);if(l._m32==p2p$.$n2.META_PIECE_TYPE._k1){b=new p2p$.$n8.PieceRangeItem();b._m32=p2p$.$n2.META_PIECE_TYPE._k1;b._m253=-1;b._m359=0}else{i=new p2p$.$n8.PieceRangeItem();i._m32=p2p$.$n2.META_PIECE_TYPE._k16;i._m253=-1;i._m359=0}}continue}if(f._m253<0){f._m253=l.id_}f._m359=Math.max(0,l.id_-f._m253)+1}}if(b._m253>=0){j._m212.push(b)}if(i._m253>=0){j._m212.push(i)}this._m300="";for(var c=0;c<j._m212.length;c++){var g=j._m212[c];if(g._m32==0){var d=g._m253+g._m359-1;this._m300+="type:"+g._m32+",start:"+g._m253+",end:"+d+",count:"+g._m359+"\n"}}},_m748:function(d,a,c){var b=new p2p$.$n8.$c38();var e=new p2p$.$n8.RequestDataItem();e._m101=-1;b._m52.push(e);c._m79=-1;c._m36=0;if(a){c._m12=0}c._m391=c._m302;c._m127=c._m17=d;c._m29.send(b)},_m720:function(f){var e=f-this._m225;if(this._m3._m62==""){e+=(this._m225/2)}for(var h=0;h<this._m58.length;h++){var d=this._m58[h];if(d._m36<=0){continue}if((d._m17>=e)&&(d._m79<0||d._m79>=this._m30)){continue}d._m275++;_m$cde5(_m$cde1("logic::base::Channel [{0}]Peer stable blocked {1} times, peer id({2}), address({3}),lastSegment({4}),urgentSegment({5}),isTiemout({6})",p2p$.$n2.$c54._m37(this._m32),d._m275,d._m29._m435(),d._m29._m134(),d._m79,this._m30,(d._m17<e?"true":"false")));this._m281(d._m140);this._m748(f,false,d)}for(var h=0;h<this._m67.length;h++){var d=this._m67[h];if(d._m103._m27<=0){continue}if(d._m103._m27+this._m225>f){continue}d._m12=0;d._m275++;d._m127=f;d._m103._m27=0;d._m103._m328=false;var g=this._m3._m261(d._m103._m32,d._m103.id_);if(g<0||g>=this._m3._m6.length){continue}var c=this._m3._m6[g];var b=c._m563(d._m103._m32,d._m103.id_);if(b<0||b>=c._m28.length){continue}var a=c._m28[b];a._m27=0;a._m116=0;a._m328=false;_m$cde5(_m$cde1("logic::base::Channel [{0}]Peer timeout {1} times, peer({2}://{3}), address({4}), segment id({5}), piece type({6}), id({7}), {8}/{9}",this._m87(),d._m275,d._m29._m87(),d._m29._m435(),d._m29._m134(),c.id_,p2p$.$n2.$c54._m272(d._m103._m32),d._m103.id_,(a._m344+1),c._m28.length))}},_m684:function(d){for(var e=0;e<this._m3._m6.length;e++){var c=this._m3._m6[e];if(c._m158){continue}if(c.id_<this._m30||c._m26>0){continue}for(var a=0;a<c._m28.length;a++){var b=c._m28[a];if(b._m26>0||!b._m98||b._m27<=0||(b._m27+this._m225>d)){continue}_m$cde5(_m$cde1("logic::base::Channel [{0}]Piece stable timeout, channel://{1}/{2}/{3}/{4}, {5}/{6}, release",p2p$.$n2.$c54._m37(this._m32),this.id_,c.id_,b._m87(),b.id_,(b._m344+1),c._m28.legnth));b._m98=false;b._m27=0;b._m116=0}}},_m625:function(c){var a=this._m8._m147*1000;for(var d=0;d<this._m67.length;d++){var b=this._m67[d];if(b._m234+a>c){continue}if(!this._m76._m212.length==0){b._m234=c;b._m123(this._m76);b._m29.send(this._m76)}}},_m281:function(d){for(var e=0;e<this._m3._m6.length;e++){var c=this._m3._m6[e];if(c._m26>0){continue}for(var a=0;a<c._m28.length;a++){var b=c._m28[a];if(b._m116==d){b._m98=false;b._m328=false;b._m27=0;b._m116=0}}}},_m183:function(){return p2p$.$n14.$c33._m753()},_m700:function(a){var c=this._m3._m268(a);if(c<0||c>=this._m3._m6.length){_m$cde15(_m$cde1("logic::base::Channel::Reset segment piece completion find segment({0}) failed",a));return false}var b=this._m3._m6[c];b._m257();_m$cde14(_m$cde1("logic::base::Channel::Reset segment piece completion reset segment({0}) success",a));return true},_m778:function(m,j,q){var i=0;var g=0;var a=this._m183();var k=j._m29;for(var b=0;b<q._m128.length;b++){var o=q._m128[b];if(o._m101<0){break}var f=-1;if(o._m74>=0){f=this._m3._m268(o._m74)}else{f=this._m3._m261(o._m83,o._m101)}if(f<0||f>=this._m3._m6.length){_m$cde15(_m$cde1("logic::base::Channel [{0}]Response piece from session({1}://{2}) segment not found for channel({3}), segment idx({4}), piece type({5}), id({6}), drop it!",p2p$.$n2.$c54._m37(this._m32),k._m87(),k._m134(),this.id_,f,p2p$.$n2.$c54._m272(o._m83),o._m101));g++;j._m290++;continue}var h=this._m3._m6[f];var d=h._m563(o._m83,o._m101);if(d<0||d>=h._m28.length){_m$cde15(_m$cde1("logic::base::Channel","[{0}]Response piece from session({1}://{2}) piece not found for channel({3}), segment idx({4}), piece type({5}), id({6}), idx({7}), drop it!",p2p$.$n2.$c54._m37(this._m32),k._m87(),k._m134(),this.id_,f,p2p$.$n2.$c54._m272(o._m83),o._m101,d));g++;j._m290++;continue}var p=h._m28[d];p._m98=false;p._m27=0;if(o._m90.length==0){continue}if((p._m49>0&&o._m90.length!=p._m49)||!this._m3._m1136(p,o._m90,o._m90.length)){_m$cde15(_m$cde1("logic::base::Channel [{0}]Verify piece size/checksum failed from session({1}://{2}), peer id({3}), segment({4}), piece type({5}), id({6}), size({7}/{8})",p2p$.$n2.$c54._m37(this._m32),k._m87(),k._m134(),k._m435(),h.id_,p2p$.$n2.$c54._m272(p._m32),p.id_,o._m90.length,p._m49));j._m12=0;j._m290++;j._m1019(p._m32,p.id_,true);g++;if(!(p._m49>0&&o._m90.length!=p._m49)){j._m472++}this._m96._m940(this._m84,k.getType(),0,1);continue}var l=this._m3._m269(h.id_);if(!a.exists(l)){if(h._m119>0){i++;h._m257()}}if(h._m49>0){a.reserve(l,h._m49)}else{if(h._m49==0&&h._m28.length==1){a.reserve(l,o._m90.length)}}if(!a.write(l,p._m273,o._m90,o._m90.length)){_m$cde15(_m$cde1("logic::base::Channel [{0}]Write piece to storage({1}) failed from session({2}://{3}), peer id({4}), segment({5}), piece type({6}), id({7}), size({8}/{9})",p2p$.$n2.$c54._m37(this._m32),a._m769(),k._m87(),k._m134(),k._m435(),h.id_,p2p$.$n2.$c54._m272(p._m32),p.id_,o._m90.length,p._m49));a.remove(l);h._m257();continue}p._m850=p2p$.$n2.$c47._m9();j._m79=j._m79>h.id_?j._m79:h.id_;if(this._m531<=0){this._m531=p2p$.$n2.$c47._m9()}p._m116=0;if(p._m906++<1){var e=(this._m30<0||this._m70<0)||(h.id_>=this._m30&&h.id_<=this._m70);i++;p._m26=m;p._m620=k.getType();j._m618(1,o._m90.length);this._m221._m666(e,k.getType(),1,o._m90.length);this._m96._m1026(this._m84,k.getType(),k._m484(),o._m90.length);if(this._m221._m463<=0){this._m221._m463=m-this._m263}this._m876();if(!this._m336){this._m336=true;this._m84._m184(p2p$.$n4.$c17Static._k81,p2p$.$n2.ERROR_CODE._k4,k._m134(),m-this._m263)}if(!this._m419&&!k._m254()){this._m419=true;this._m84._m184(p2p$.$n4.$c17Static._k68,p2p$.$n2.ERROR_CODE._k4,k._m134(),m-this._m263)}}h._m671=m;if(h._m49<=0){h._m49=o._m90.length}h._m873();if(h._m26>0){this._m288=this._m288>h.id_?this._m288:h.id_;this._m221._m453+=h._m50}}if(q._m128.length>0){j._m275=0;var c=j._m36-q._m128.length;j._m36=0>c?0:c;j._m103._m27=0;j._m936(m)}return i},_m876:function(){},_m738:function(c,a){for(var d=0;d<a.length;d++){var b=a[d];b._m936(c)}},_m297:function(){var a=null;for(var c=0;c<this._m58.length;c++){var b=this._m58[c];if(b._m36<=0){a=b;break}}return a},_m325:function(c){var d=this._m8._m89*c;if(this._m13>=0&&this._m13<this._m3._m6.length&&this._m13+1<this._m3._m6.length){var b=this._m3._m6[this._m13];var a=this._m3._m6[this._m13+1];if(d<=b._m50){d=b._m50+a._m50}}return d},_m510:function(c,h){var j=c;this._m576(true);this._m459=p2p$.$n2.$c47._m9();if(this._m622<=0){this._m622=this._m459}if(p2p$.$n2.META_DATA_TYPE._k6==this._m32){var f=this._m3._m814(j);if(f!=null){}}this._m668(h);if(this._m3._m6.length<=0){_m$cde5(_m$cde1("logic.base.Channel:_m510 Segment({0}) not load yet",j));return null}var f=this._m3._m814(j);if(f==null){this._m440++;_m$cde5(_m$cde1("logic.base.Channel:_m510 Segment({0}) Not Found",j));return null}var b=this._m183();var g=this._m3._m269(j);var a=b.exists(g);var e=null;if(f._m26>0&&a){e=b.read(g,0);f._m736=this._m17;this._m221._m473+=f._m50;for(var d=0;d<f._m28.length;d++){var i=f._m28[d];i._m703=this._m17;this._m221._m538++;this._m221._m582+=i._m49}}else{if(f._m26>0&&!a){f._m257();this._m267(this._m76)}this._m307(false)}return{segment:f,stream:e}},_m996:function(a){this._m100=a},_m668:function(a){this._m30=a},_m808:function(d){if(this._m47==null||!this._m47._m1145()){return}_m$cde5(_m$cde1("logic::base::Channel [{0}]Protocol selector({1}) open, channel({2}), code({3}), {4}",p2p$.$n2.$c54._m37(this._m32),this._m8._m373,this.id_,d,(this._m78&&p2p$.$n2.ERROR_CODE._k4!=d)?"FAILED":"OK"));if(p2p$.$n2.ERROR_CODE._k4==d){if(!this._m581&&this._m8._m232>0){this._m581=true;this._m84._m184(p2p$.$n4.$c17Static._k55,0,this._m8._m373,this._m8._m232);var a=new p2p$.$n1.$c58();a._m108(this._m8._m246);this._m96._m779=a._m201;this._m96._m540=a._m161;var c=new p2p$.$n1.$c58();c._m108(this._m8._m115);this._m96._m821=c._m201;this._m96._m756=c._m161;var b=new p2p$.$n1.$c58();b._m108(this._m8._m326);this._m96._m1120=b._m201;this._m96._m1066=b._m161}}},_m178:function(e){if(this._m47==null){return}var d=null;var a=e._m254()?this._m58:this._m67;e._m932();var c=0;for(var f=0;f<a.length;f++){var b=a[f];if(b._m29==e){d=b}if(b._m29&&b._m29.getType()==e.getType()){c++}}if(d!=null){d._m275=0}else{c++;d=new p2p$.$n12.$c15();d._m29=e;a.push(d)}d._m17=p2p$.$n2.$c47._m9();if(!e._m254()){this._m96._m829(this._m84,e.getType(),c)}if(!this._m76.empty()&&this._m22._m45()._m351&&!e._m254()){d._m123(this._m76);e.send(this._m76);this._m219=p2p$.$n2.$c47._m9()}this._m307(!e._m254())},_m260:function(g,j){if(this._m47==null){return}if(g==null){_m$cde5("session == null")}var e=0;var h=p2p$.$n2.$c47._m9();var f=null;var b=g._m254()?this._m58:this._m67;for(var a=0;a<b.length;a++){var i=b[a];if(i._m29==g){f=i;break}}if(f==null){return}f._m17=h;f._m930(j);var d=0;if(j._m212.length>0){d=this._m858(h,f,j)}var c=(this._m68<=0||this._m8._m214);if(this._m22._m45()._m351&&c&&!j._m52.length==0){this._m802(h,f,j)}if(j._m128.length>0){e+=this._m778(h,f,j)}this._m267(this._m76);if((d>0&&(this._m424+300*p2p$.$n2.$c47._k74<h))||j._m128.length>0){_m424=h;this._m307(!g._m254())}},_m802:function(l,g,q){var h=0;var m=new p2p$.$n8.$c38();var b=this._m183();var j=g._m29;for(var c=0;c<q._m52.length;c++){var o=q._m52[c];var i=new p2p$.$n8.ResponseDataItem();m._m128.push(i);i._m101=o._m101;i._m83=o._m83;do{var e=-1;if(o._m74>=0){e=this._m3._m268(o._m74)}else{e=this._m3._m261(o._m83,o._m101)}if(e<0||e>=this._m3._m6.length){break}var f=this._m3._m6[e];if(f._m158){break}var k=this._m3._m269(f.id_);var a=b.exists(k);if(!a){if(f._m119>0){f._m257();this._m267(this._m76)}break}var d=f._m563(o._m83,o._m101);if(d<0||d>=f._m28.length){break}var p=f._m28[d];if(p._m26<=0){break}i._m74=f.id_;i._m954=p._m1186;if(p._m49<=0){break}else{i._m90=b.read(k,p._m273,p._m49)}h+=i._m90.length}while(false)}this._m221._m1134(j.getType(),m._m128.length,h);this._m96._m1101(this._m84,j.getType(),j._m484(),h);g._m728(m._m128.length,h);g._m123(m);j.send(m);return 0},_m523:function(){var a=0;for(var c=0;c<this._m67.length;c++){var b=this._m67[c];if(b._m103._m27<=0){continue}a++}return a},_m454:function(){if(this._m13<0||this._m13>=this._m3._m6.length){return false}var f=false;var c=this._m3._m6[this._m13];if(c._m49>0&&c._m50>0){var b=c._m49*1000/c._m50;var e=b*this._m8._m327;var a=0;for(var g=0;g<this._m58.length;g++){var d=this._m58[g];if(d._m36>0){a=d._m12;break}}if(a>=0&&a<e){f=true}}return f},_m442:function(){this._m68=0;if(this._m13<0||this._m13>=this._m3._m6.length){return}var b=this._m8._m89*1000;var e=0;var d=0;for(var c=this._m13;c<this._m3._m6.length;c++){var a=this._m3._m6[c];if(a._m26<=0){this._m68++}e+=a._m50;d++;if(d>1&&e>=b){break}}},_m624:function(e,c){var a=null;for(var d=0;d<this._m67.length;d++){var b=this._m67[d];if(b._m275>5){continue}if(b._m103._m27<=0&&b._m1113(e,c)){a=b;break}}return a},_m858:function(l,h,m){var g=0;var i=h._m29;h._m549.clear(true);h._m536.clear(true);h._m300="";for(var b=0;b<m._m212.length;b++){var d=m._m212[b];if(d._m32==0){var c=d._m253+d._m359-1;h._m300+="type:"+d._m32+",start:"+d._m253+",end:"+c+",count:"+d._m359+"\n"}var k=(d._m32==p2p$.$n2.META_PIECE_TYPE._k1)?h._m549:h._m536;var j=p2p$.$n1.$c40Static._k52;for(var f=d._m253,e=0;e<d._m359&&e<=j;f++,e++){var a=k.setValue(f,true);if(!a){g++}}}if(this._m22._m45()._m351&&m._m212.length!=0&&(h._m234+this._m8._m147*1000<l)){if(!this._m76.empty()){h._m234=l;h._m123(this._m76);i.send(this._m76)}}if(g>0&&this._m219+2000<l){this._m219=l;this._m425(true)}return g},_m425:function(h){var f=h?((this._m13<0)?0:this._m13):0;for(var g=f;g<this._m3._m6.length;g++){var d=this._m3._m6[g];if(d._m158){continue}for(var a=0;a<d._m28.length;a++){var c=d._m28[a];c._m355=0;for(var b=0;b<this._m67.length;b++){var e=this._m67[b];if(e._m1113(c._m32,c.id_)){c._m355++}}}}},_m87:function(){return p2p$.$n2.$c54._m37(this._m32)},_m593:function(b,c){if(this._m47==null||!this._m47._m1145()){return}_m$cde5(_m$cde1("logic::base::Channel::[{0}] Protocol manager({1}://{2}) open, channel({3}), code({4}), {5}",p2p$.$n2.$c54._m37(this._m32),b._m87(),b._m793(),this.id_,c,(this._m78&&p2p$.$n2.ERROR_CODE._k4!=c)?"try open after 10 seconds...":"OK"));if(this._m78&&p2p$.$n2.ERROR_CODE._k4!=c){}if(p2p$.$n2.ERROR_CODE._k4==c){if(!this._m469&&b.getType()==p2p$.$n8.PROTOCOL_TYPES._k5&&this._m8._m196>0){this._m469=true;this._m84._m184(p2p$.$n4.$c17Static._k61,0,this._m8._m781,this._m8._m196)}if(!this._m508&&b.getType()==p2p$.$n8.PROTOCOL_TYPES._k3&&this._m8._m85>0){this._m508=true;this._m84._m184(p2p$.$n4.$c17Static._k47,0,this._m8._m246,this._m8._m85)}if(!this._m448&&b.getType()==p2p$.$n8.PROTOCOL_TYPES._k2&&this._m8._m112>0){this._m448=true;var a=new p2p$.$n1.$c58();a._m108(this._m8._m115);this._m84._m184(p2p$.$n4.$c17Static._k58,0,a._m201+":"+a._m161,this._m8._m112)}}},_m286:function(e){if(this._m47==null||e==null){return}var b=false;var d=0;var a=e._m254()?this._m58:this._m67;for(var f=0;f<a.length;f++){var c=a[f];if(c._m29==e){b=true;this._m281(c._m140);a.splice(f--,1)}else{if(c._m29&&c._m29.getType()==e.getType()){d++}}}if(b){if(!e._m254()){this._m96._m829(this._m84,e.getType(),d)}}},_m1091:function(){return this._m17},_m1237:function(){return this._m601},_m702:function(){return this._m3._m353},_m979:function(){return this._m866},_m840:function(){if(this._m47!=null){return this._m47._m840()}return false},_m641:function(){if(this._m47!=null){return this._m47._m641()}return false},_m780:function(){this._m67=[];if(this._m47!=null){return this._m47._m780()}return false},_m771:function(){if(this._m47!=null){return this._m47._m771()}return false}});p2p$.ns("$n12");p2p$.$n12.$c15Static={_m853:0};p2p$.$n12.$c15=_m$cde18._m41({_m29:null,_m549:null,_m536:null,_m646:null,_m642:null,_m17:0,_m127:0,_m160:0,_m243:0,_m51:0,_m186:0,_m1038:0,_m934:0,_m472:0,_m290:0,_m726:0,_m242:0,_m1077:0,_m12:0,_m615:0,_m391:0,_m512:0,_m506:0,_m443:0,_m302:0,_m677:0,_m423:0,_m200:0,_m234:0,_m140:0,_m79:0,_m1041:0,_m275:0,_m1117:0,_m36:0,_m1049:false,_m103:null,_m1159:0,_m1062:false,_m1063:false,_m1016:false,_m300:"",init:function(){this._m140=++p2p$.$n12.$c15Static._m853;if(this._m140<=0){this._m140=p2p$.$n12.$c15Static._m853=1}this._m103=new p2p$.$n1.$c27();this._m17=0;this._m127=0;this._m160=0;this._m243=0;this._m51=0;this._m186=0;this._m1038=0;this._m934=0;this._m472=0;this._m290=0;this._m726=0;this._m242=0;this._m1077=0;this._m12=-1;this._m79=-1;this._m1041=2;this._m275=0;this._m1117=0;this._m36=0;this._m615=0;this._m391=0;this._m512=0;this._m506=0;this._m443=0;this._m302=0;this._m677=0;this._m423=0;this._m200=0;this._m234=0;this._m1049=false;this._m1159=-1;this._m1063=false;this._m1062=false;this._m1016=false;this._m549=new p2p$.$n1.$c40();this._m536=new p2p$.$n1.$c40();this._m646=new p2p$.$n1.$c40();this._m642=new p2p$.$n1.$c40();this._m300=""},_m1113:function(a,d){var c=(a==p2p$.$n2.META_PIECE_TYPE._k1)?this._m549:this._m536;var b=(a==p2p$.$n2.META_PIECE_TYPE._k1)?this._m646:this._m642;if(b.getValue(d)){return false}return c.getValue(d)},_m1275:function(b,d,a){var c=(b==p2p$.$n2.META_PIECE_TYPE._k1)?this._m549:this._m536;c.setValue(d,a)},_m1019:function(b,d,a){var c=(b==p2p$.$n2.META_PIECE_TYPE._k1)?this._m646:this._m642;c.setValue(d,a)},_m936:function(b){var a=this._m29._m599(b,this._m36>0);if(a>=0){this._m12=a}},_m123:function(a){this._m615+=(a._m212.length==0?0:1);this._m391+=a._m52.length;this._m512+=a._m128.length},_m728:function(b,a){this._m677=this._m160;this._m160+=a;this._m243+=b;this._m726=p2p$.$n2.$c47._m9()},_m744:function(){this._m423=this._m51;this._m200=p2p$.$n2.$c47._m9()},_m1255:function(){this._m200=0},_m930:function(a){this._m506+=a._m212.length;this._m443+=a._m52.length;this._m302+=a._m128.length},_m618:function(b,a){this._m186+=b;this._m994(a)},_m994:function(a){var b=p2p$.$n2.$c47._m9();this._m51+=a;this._m242=b;if(this._m200>0&&b>this._m200){var c=this._m51-this._m423;this._m12=c*1000/(b-this._m200)}}});p2p$.ns("$n12");p2p$.$n12.$c36=_m$cde18._m41({_m243:0,_m160:0,_m186:0,_m51:0,_m428:0,_m610:0,_m464:0,_m378:0,_m287:0,_m342:0,_m438:0,_m339:0,_m168:0,_m198:0,_m733:0,_m614:0,_m379:0,_m12:0,_m670:0,_m509:null,_m319:null,_m678:null,_m229:null,_m130:null,_m595:null,_m527:0,_m537:0,_m463:0,_m453:0,_m513:0,_m582:0,_m538:0,_m473:0,init:function(){this._m243=0;this._m160=0;this._m428=0;this._m610=0;this._m186=0;this._m51=0;this._m464=0;this._m378=0;this._m287=0;this._m342=0;this._m438=0;this._m339=0;this._m168=0;this._m198=0;this._m733=0;this._m614=0;this._m379=0;this._m12=0;this._m670=0;this._m509=[];this._m319=[];this._m678=[];this._m229=[];this._m130=[];this._m595=[];for(var a=0;a<p2p$.$n8.PROTOCOL_TYPES._k27;a++){this._m509[a]=0;this._m319[a]=0;this._m678[a]=0;this._m229[a]=0;this._m130[a]=0;this._m595[a]=0}this._m527=0;this._m537=0;this._m463=0;this._m453=0;this._m513=0;this._m582=0;this._m538=0;this._m473=0},_m1134:function(b,c,a){this._m1127(b,a,c);this._m728()},_m1127:function(b,a,c){if(b<0||b>=p2p$.$n8.PROTOCOL_TYPES._k27){return}this._m243+=c;this._m160+=a;this._m428+=c;this._m610+=a;this._m509[b]+=c;this._m319[b]+=a},_m728:function(){if(this._m51>0){this._m527=this._m160/this._m51}var a=p2p$.$n2.$c47._m9();if(this._m438>0&&a>this._m438){var b=a-this._m438;this._m733=this._m428*1000/b}else{this._m438=a}},_m666:function(b,c,d,a){this._m1009(c,a,d);if(b){this._m287+=a}this._m618(b)},_m1009:function(b,a,c){if(b<0||b>=p2p$.$n8.PROTOCOL_TYPES._k27){return}this._m186+=c;this._m51+=a;this._m464+=a;this._m378+=a;this._m229[b]+=c;this._m130[b]+=a;this._m342+=a},_m618:function(a){if(this._m51>0){var b=this._m51-this._m130[p2p$.$n8.PROTOCOL_TYPES._k8];this._m527=this._m160/this._m51;this._m537=b/this._m51}var c=p2p$.$n2.$c47._m9();if(this._m339>0&&c>this._m339){var d=c-this._m339;this._m614=this._m378*1000/d}else{this._m339=c}if(this._m198>0&&c>this._m198){var d=c-this._m198;this._m12=this._m342*1000/d;if(d>5*1000){this._m198=c;this._m342=0}}else{this._m198=c}if(a){if(this._m168>0&&c>this._m168){var d=c-this._m168;this._m379=this._m287*1000/d;if(d>5*1000){this._m168=c;this._m287=0}}else{this._m168=c}}}});p2p$.ns("$n18");p2p$.$n18.$c2Static={_k29:0};p2p$.$n18.$c2=p2p$.$n12.$c2._m41({_m541:"liv",_m95:0,_m231:0,_m384:false,_m349:0,_m369:0,_m270:0,_m854:0,_m207:0,_m239:0,_m171:0,_m687:0,_m204:0,_m202:0,_m583:0,_m515:0,_m57:0,_m230:0,_m233:0,_m735:"",_m354:"",_m690:"",_m401:null,init:function(c,a,b){this._super(p2p$.$n2.META_DATA_TYPE._k7,c,a,b);this._m8._m456="liv";this._m601=60*1000;this._m95=120;this._m231=200;this._m369=5000;this._m270=0;this._m384=false;this._m349=0;this._m854=20;this._m207=-1;this._m239=0;this._m171=0;this._m687=0;this._m204=0;this._m202=0;this._m583=0;this._m515=0;this._m57=0;this._m230=0;this._m233=0;this._m476=null},_m824:function(){return this._m541},open:function(){if(!this._super()){_m$cde15(_m$cde1("logic::live::Channel::Super return false"));return false}if(this._m22._m45()._m95>0){this._m95=this._m22._m45()._m95}this._m735=this._m42._m7.get("stream_id");this._m743="live:"+this._m735;this._m42._m7.set("mslice",5);var a=this._m42._m7.get("timeshift");if(a!=null){this._m239=p2p$.$n2.$c46._m94(a.value,0);if(this._m239==0){this._m42._m7.erase(a.key)}}this._m331=this._m42.toString();this._m519=this._m331;this._superprototype._m607.call(this);return true},close:function(){this._m773();this._super();return true},_m1114:function(){var a=-1;for(var f=0;f<this._m3._m6.length;f++){var e=this._m3._m6[f];this._m57=Math.max(this._m57,e._m39);if(a<0||a>e._m39){a=e._m39}}if(this._m237<=0&&(a/1000)>this._m204){this._m171+=(a/1000-this._m204)}var d=false;if(this._m237>0){var c={_m109:0,_m371:[]};if(this._m401&&this._m401._m62==this._m3._m62){d=false;c=this._m3._m788(this._m401,true,false)}else{d=true}this._m401.tidy();this._m57=0;for(var b=0;b<this._m3._m6.length;b++){var e=this._m3._m6[b];this._m57=Math.max(this._m57,e._m39)}_m$cde14(_m$cde1("logic::live::Channel::Add {0} backup meta segment(s) to reloaded channel({1}), total {2} segment(s) now",c._m109,this.id_,this._m3._m6.length))}this._m58=[];this._m67=[];if(this._m47!=null&&!this._m47._m144()){return false}this._m517(p2p$.$n18.$c2Static._k29,this._m369);return true},_m798:function(a){switch(a){case p2p$.$n18.$c2Static._k29:if(this._m10!=null){this._m167=0;this._m10.log("timeout");this._m10.close();this._m10=null;this._m451()}this._m1036();break;default:break}},_m451:function(){this._m270++;var b=this._m354;var e=this._m8._m400.nodelist;for(var f=0;f<e.length;f++){var a=e[(f+this._m270)%e.length];var d=a.location;if(!(d=="")&&d!=this._m3._m93){this._m354=d;break}}var c=new p2p$.$n1.$c58();c._m108(this._m354);this._m8._m729=p2p$.$n2.$c46.format("{0}:{1}",c._m201,(c._m161)==0?80:c._m161);_m$cde5(_m$cde1("logic::live::Channel [{0}]Meta timeout/error for url({1}), channel({2}), {3} try times, switch next source({4})...",p2p$.$n2.$c54._m37(this._m32),b,this.id_,this._m270,this._m354))},_m1036:function(){var a=p2p$.$n2.$c47._m9();if(this._m491+this._m224<=a){_m$cde5(_m$cde1("logic::live::Channel Channel({0}), gslb reload({1} sec) expired, last({2}), reload gslb again ...",this.id_,this._m224/p2p$.$n2.$c47._k83,p2p$.$n2.$c46._m503(this._m491,false)));this._m237++;this._m401=this._m3.fork();this._m331=this._m42.toString();this._m607();return}if(this._m202>0){if(this._m202>this._m207){this._m202-=this._m207}else{this._m202=0}}this._m204=this._m57/1000;if(this._m204<=0){this._m204=this._m171-this._m207}this._m515=a;if(this._m10!=null){this._m10.log("cancel");this._m10.close();this._m10=null}this._m690=this._m637(a);this._m10=new p2p$.$n1.$c7(this._m690,this,"GET","","live::meta");this._m10.load();this._m517(p2p$.$n18.$c2Static._k29,this._m369)},_m637:function(b){var a=this._m354==""?this._m3._m93:this._m354;a+=(a.indexOf("?")<0)?"?":"&";if(this._m239==0){a+=p2p$.$n2.$c46.format("abtimeshift={0}&cdernd={1}",this._m204,b)}else{if(a.indexOf("&timeshift=")<0&&a.indexOf("?timeshift=")<0){a+=p2p$.$n2.$c46.format("timeshift={0}&cdernd={1}",this._m239,b)}else{a+=p2p$.$n2.$c46.format("cdernd={0}",b)}}return a},_m517:function(a,b){var c=this;this._m476=setTimeout(function(){c._m798(a)},b)},_m773:function(){if(this._m476){clearTimeout(this._m476);this._m476=null}},_m106:function(a){if(this._super(a)){return true}var b=false;if(!this._m78||(this._m10!=null&&this._m10!=a)){return b}if(a._m294=="live::meta"){b=true;this._m10=null;this._m167=a._m107?a._m40:-1;this._m8._m729=a._m393;if(!a._m107||a._m40<200||a._m40>=300){this._m307(false);this._m451();return b}if(!this._m787(a)){this._m451();return b}this._m621++;this._m489=this._m17}return b},_m787:function(a){var g=false;var i=false;var h=p2p$.$n2.$c47._m9();var c=new p2p$.$n1.$c32();c._m32=this._m3._m32;c._m132=this._m3._m132;c._m338=this._m3._m338;c._m93=this._m690;c._m716=a._m124;c._m353=this._m3._m353;c._m75=this._m3._m75;if(!c.load(a._m35,a._m156)){_m$cde15(_m$cde1("logic::live::Channel Parse meta response failed, url({0}), channel({1}), size({2})"),a._m124,this.id_,this.downloader._m35.length);this._m215=701;this._m307(false);return false}if(c._m62!=this._m3._m62){_m$cde5(_m$cde1("logic::live::Channel Meta p2p group id change from({0}) to({1}), reopen p2p protocols...",this._m3._m62,c._m62));if(this._m233<=0){this._m233=p2p$.$n2.$c47._m9();var b={_m109:0,_m371:[]};b=this._m3._m998(c);if(b._m109>0){_m$cde5(_m$cde1("logic::live::Channel::Add2 ({0}) new meta segment({1}) to channel({2}), total {3} segment(s) now",b._m109,b._m371.join(","),this.id_,this._m3._m6.length))}}if(this._m233+(120*1000)>h){var d=true;for(var e=0;e<this._m3._m6.length;e++){var f=this._m3._m6[e];if(f.id_<this._m30){continue}if(f._m26<=0){d=false;break}}if(!d){this._m307(false);return true}}g=true;i=true;this._m3._m62=c._m62;this._m3._m734();var b={_m109:0,_m371:[]};b=this._m3._m788(c,false,true);if(b._m109<=0){this._m3._m498()}if(b._m109>0){_m$cde5(_m$cde1("logic::live::Channel::Add3 ({0}) new meta segment({1}) to channel({2}), total {3} segment(s) now",b._m109,b._m371.join(","),this.id_,this._m3._m6.length))}this._m267(this._m76)}else{var b=this._m3._m788(c,false,false);if(b._m109>0){_m$cde5(_m$cde1("logic::live::Channel::Add4 ({0}) new meta segment({1}) to channel({2}), total {3} segment(s) now",b._m109,b._m371.join(","),this.id_,this._m3._m6.length));g=true}}this._m3._m205=h;if(g){this._m843();this._m425(true);this._m986=this._m3._m577}this._m233=0;this._m57=0;for(var e=0;e<this._m3._m6.length;e++){var f=this._m3._m6[e];this._m57=this._m57>f._m39?this._m57:f._m39}if(i){}this._m307(false);return true},_m843:function(){var b=0;var f=0;var d=this._m3._m6.length;for(;d!=-1;d--){if(d==this._m3._m6.length){continue}var e=this._m3._m6[d];b+=e._m50;f++;if(b>=(this._m231)*1000){break}}if(d>0){var h=this._m3._m6.length-f;var i="";var a=this._m183();for(var c=0;c<d;c++){var e=this._m3._m6[c];var g=this._m3._m269(e.id_);if(c==d-1){i+=e.id_}else{i+=(e.id_+",")}a.remove(g)}for(var c=0;c<d;c++){var e=this._m3._m6[c];this._m3._m293-=e._m28.length}this._m3._m6.splice(0,d);_m$cde14(_m$cde1("logic::live::Channel Remove {0} ({1}) expired meta segment(s) from channel({2}), total {3} segment(s) now",h,i,this.id_,this._m3._m6.length));if(h>0){this._m267(this._m76);this._m3._m498()}}},_m490:function(){var a=this._m8._m400;var b=p2p$.$n2.$c47._m9();if(this._m237<=0){this._m57=0;this._m207=a.livesftime;if(this._m207>=0){this._m95=this._m207>(this._m231-20)?(this._m231-20):this._m207}this._m231=(this._m95>30?this._m95:30)+60;this._m171=a.curtime;this._m687=a.starttime;this._m202=this._m95;if(this._m239!=0){this._m171+=(this._m239+this._m95)}_m$cde5(_m$cde1("logic::live::Channel::Detect channel({0}), time shift({1} sec), gslb reload({2} sec), current time({3}), start time({4})",this.id_,this._m207,this._m224/1000,p2p$.$n2.$c46._m503(this._m171),p2p$.$n2.$c46._m503(this._m687)));this._m171+=10;this._m204=this._m171-this._m202-10;this._m583=b;this._m515=b}this._m17=p2p$.$n2.$c47._m9();if(this._m10!=null){this._m10.log("cancel");this._m10.close();this._m10=null}var c=this._m637(b);this._m10=new p2p$.$n1.$c7(c,this,"GET","","base::meta");this._m10.load();this._m831(8*1000)},_m307:function(e){var d=p2p$.$n2.$c47._m9();if(this._m565){return}_m$cde14(_m$cde1("logic::live::Channel::Schedule urgent segment index:{0}, id :{1},",this._m13,this._m30));this._m584=d;this._m738(d,this._m58);var h=0;var b=this._m8._m89*1000;this._m13=-1;for(var g=0;(this._m30>=0)&&(g<this._m3._m6.length);g++){var a=this._m3._m6[g];if(a.id_==this._m30){this._m13=g;this._m8._m370=a._m39/1000}if(g>=this._m13){if(h<b||this._m70<=this._m30){this._m70=a.id_}h+=a._m50}}if(this._m13<0&&this._m3._m6.length>0){this._m13=0}this._m442();if(!e){this._m684(d);this._m720(d);this._m625(d);this._m575=d;this._m58.sort(function(j,i){if(j._m12==i._m12){return j._m127-i._m127}return i._m12-j._m12});this._m67.sort(function(j,i){if(j._m12==i._m12){return j._m127-i._m127}return i._m12-j._m12});this._m221._m666(true,p2p$.$n8.PROTOCOL_TYPES._k8,0,0)}this._m3._m30=this._m30;if(this._m13<0){return}var c=0;if(!e&&this._m58.length>0){c=this._m466(this._m13)}this._m311=this._m516(this._m13);var f=0;if(!e&&(this._m13>=0)&&this._m22._m45()._m351&&this._m68<=0&&this._m67.length>0){f=this._m943(this._m13)}_m$cde14(_m$cde1("logic::live::Channel::Schedule {0} stable pieces ...",c))},_m943:function(b){if(this._m58.length==0||this._m3._m6.length==0){return 0}var u=0;var e=0;var d=this._m8._m488*100;var h=this._m230;var a=p2p$.$n2.$c47._m9();var o=0;var j=0;var g=(this._m183()._m482())*2/3;var l=new p2p$.$n8.$c38();var m=this._m297();for(var r=b;r<this._m3._m6.length&&m;r++){var c=this._m3._m6[r];if(this._m68>0&&this._m70>=0&&c.id_>=this._m70){break}o++;if(c._m49>0){j+=c._m49;if(j>g){break}}else{if(o>10){break}}this._m230=c.id_;if(c.id_<=h){continue}else{if(c._m26>0){continue}}var q=false;var i=false;for(var t=0;t<c._m28.length&&m;t++){var f=c._m28[t];if(f._m26>0||f._m27>0||f._m355>0||f._m49<=0){i=false;continue}if(f._m730>=d){if(f._m32==p2p$.$n2.META_PIECE_TYPE._k1){if(t+1>=c._m28.length){continue}var p=c._m28[t+1];if(p._m26>0||p._m27>0||p._m355>0){continue}else{if(p._m730>=d){continue}}}else{if(!i||!q){continue}}}var s=new p2p$.$n8.RequestDataItem();s._m74=c.id_;s._m83=f._m32;s._m101=f.id_;s._m131=f._m131;l._m52.push(s);f._m98=true;f._m27=a;f._m116=m._m140;if(c._m117<=0){c._m117=a}u++;q=(f._m32==p2p$.$n2.META_PIECE_TYPE._k1);i=true}if(l._m52.length>0){if(m._m36<=0){m._m79=c.id_}m._m36+=l._m52.length;m._m123(l);m._m29.send(l);l._m52=[];m=this._m297()}}_m$cde14(_m$cde1("logic::live::Channel Random fetch, start index ({0}), total ({1}) idle pieces, fetched ({2}) fetch rate({3})",h,e,u,this._m8._m488*100));return u},_m466:function(q){if(this._m58.length==0||this._m3._m6.length==0){return 0}var m=0;var e=0;var l=0;var g=0;var j=p2p$.$n2.$c47._m9();var d=this._m325(this._m22._m45()._m238()?1000:1500);var p=new p2p$.$n8.$c38();var h=this._m297();for(var b=q;b<this._m3._m6.length&&m<d;b++){var f=this._m3._m6[b];this._m230=Math.max(this._m230,f.id_);m+=f._m50;if(f._m26>0){continue}for(var c=0;c<f._m28.length&&h!=null&&l<=0;c++){var o=f._m28[c];if(o._m26>0){if(p._m52.length>0){break}else{continue}}else{if(o._m27>0){var a=((o._m49>0)?(this._m8._m89/2):this._m8._m89)*1000;if(o._m98&&(o._m27+a>j)){l++;continue}}}if(f._m49>0&&f._m50>0){g+=o._m49/f._m49*f._m50*1000}var i=new p2p$.$n8.RequestDataItem();i._m697=true;i._m74=f.id_;i._m83=o._m32;i._m101=o.id_;i._m131=o._m131;p._m52.push(i);o._m98=true;o._m27=j+g;o._m116=h._m140;if(f._m117<=0){f._m117=j}e++;if(p._m52.length>=50){if(h._m36<=0){h._m79=f.id_}h._m17=j;h._m36+=p._m52.length;h._m123(p);h._m29.send(p);p._m52=[];g=0;h=null;break}}if(p._m52.length>0&&h!=null){if(h._m36<=0){h._m79=f.id_}h._m17=j;h._m36+=p._m52.length;h._m123(p);h._m29.send(p);p._m52=[];g=0;h=null}}return e},_m516:function(m){if(this._m67.length==0||this._m3._m6.length==0){return 0}var b=false;var j=this._m523();var f=this._m68>0?this._m8._m174:this._m8._m157;var d=this._m183();var a=-1;var c=0;var k=0;var i=d._m482()*2/3;if(m>=0){var l=0;var g=this._m325(this._m22._m45()._m238()?1500:2000);b=this._m454();for(var e=m;j<f&&e<this._m3._m6.length;e++){var h=this._m3._m6[e];l+=h._m50;c++;if(h._m49>0){k+=h._m49;if(k>i||(c+5)>d._m757()){break}}else{if(c>10){break}}if(h._m158){continue}if(l<=g&&!b&&this._m13>=0){continue}if(a<0){a=e}j=this._m149(b,j,f,h);if(this._m68>0&&this._m70>=0&&h.id_>=this._m70){break}}}if(a<0){a=this._m3._m6.length-1}for(var e=a;j<f&&e>=0&&e>=m;e--){var h=this._m3._m6[e];if(h._m158||h._m26>0){continue}j+=this._m149(b,j,f,h)}return j},_m149:function(a,g,c,e){var i=p2p$.$n2.$c47._m9();for(var d=0;g<c&&d<e._m28.length;d++){var l=e._m28[d];if(l._m26>0||l._m49<=0){continue}else{if(l._m27>0){var b=((l._m49>0)?(this._m8._m89/2):this._m8._m89)*1000;if(l._m27+b>i){if(!l._m98||!a){continue}}}}var f=this._m624(l._m32,l.id_);if(f==null){continue}var j=new p2p$.$n8.$c38();var h=new p2p$.$n8.RequestDataItem();h._m74=e.id_;h._m83=l._m32;h._m101=l.id_;h._m131=l._m131;j._m52.push(h);l._m328=true;l._m116=f._m140;l._m27=i;f._m17=i;f._m79=e.id_;f._m103=l;f._m123(j);f._m744();f._m29.send(j);g++}return g},_m1249:function(b,a){this._super(b,a);a.liveStreamId=this._m735},_m1212:function(c){var b=Math.floor(this._m349/1000);this.liveSkipTime=Math.max(Math.min(b,60),0);var a=0;var d=this._m171+(c-this._m583)/1000;return d-this._m95+this._m8._m86+a+b},_m668:function(b){this._super(b);if(b>=0&&!this._m384){this._m384=true;this._m349=0;for(var c=0;c<this._m3._m6.length;c++){var a=this._m3._m6[c];if(a.id_>=b){break}if(a._m50>0){this._m349+=a._m50}}}}});p2p$.ns("$n19");p2p$.$n19.$c2Static={_k42:0,_k50:1};p2p$.$n19.$c2=p2p$.$n12.$c2._m41({_m541:"vod",_m10:null,_m809:0,_m782:0,_m877:0,init:function(c,a,b){this._super(p2p$.$n2.META_DATA_TYPE._k6,c,a,b);this._m8._m456="vod";this._m809=0;this._m782=0;this._m877=0},_m824:function(){return this._m541},open:function(){if(this._super()){_m$cde14(_m$cde1("vod.super return true"))}this._m331=this._m42.toString();this._m519=this._m331;this._m607();return true},close:function(){this._super()},_m1114:function(){this.stablePeers=[];this._m67=[];if(this._m47!=null&&!this._m47._m144()){return false}this._m681(p2p$.$n19.$c2Static._k42,3*1000);this._m430(p2p$.$n19.$c2Static._k50,this._m8._m289*1000);return true},_m1155:function(){},_m466:function(b){if(this._m58.length==0||this._m3._m6.length==0){return null}var t=0;var d=0;var s=0;var r=0;var a=p2p$.$n2.$c47._m9();var f=this._m325(this._m22._m45()._m238()?1000:1500);var g=new p2p$.$n8.$c38();if(this._m13>=0&&this._m13<this._m3._m6.length&&this._m3._m6[this._m13]._m26<=0){for(var i=0;i<this._m58.length;i++){var q=this._m58[i];if(q==null||q._m36<=0||q._m79==this._m30){continue}_m$cde5(_m$cde1("logic::vod::Channel [{0}]Cancel far downloading stable peer, segment({1}), pending({2}), id({3}), address({4})",p2p$.$n2.$c54._m37(this._m32),q._m79,q._m36,q._m29._m435(),q._m29._m134()));this._m281(q._m140);this._m748(a,false,q)}}var h=this._m297();var p=h;var m=null;for(var i=b;i<this._m3._m6.length&&t<f;i++){var c=this._m3._m6[i];t+=c._m50;if(c._m26>0){continue}for(var l=0;l<c._m28.length&&h!=null&&s<=0;l++){var e=c._m28[l];if(e._m26>0){if(g._m52.length>0){break}else{continue}}else{if(e._m27>0){var o=((e._m49>0)?(this._m8._m89/2):this._m8._m89)*1000;if(e._m98&&(e._m27+o>a)){s++;continue}}}m=c;if(c._m49>0&&c._m50>0){r+=e._m49/c._m49*c._m50*1000}var j=new p2p$.$n8.RequestDataItem();j._m697=true;j._m74=c.id_;j._m83=e._m32;j._m101=e.id_;j._m131=e._m131;g._m52.push(j);e._m98=true;e._m27=a+r;e._m116=h._m140;if(c._m117<=0){c._m117=a}d++;if(g._m52.length>=50){if(h._m36<=0){h._m79=c.id_}h._m17=a;h._m36+=g._m52.length;h._m123(g);h._m29.send(g);g._m52=[];r=0;h=null;break}}if(g._m52.length>0&&h!=null){if(h._m36<=0){h._m79=c.id_}h._m17=a;h._m36+=g._m52.length;h._m123(g);h._m29.send(g);g._m52=[];r=0;h=null}}return{stableDispatchPiece:d,peerInfo:p,segmentInfo:m}},_m307:function(e){var c=p2p$.$n2.$c47._m9();if(this._m565){return}this._m584=c;this._m738(c,this._m58);_m$cde14(_m$cde1("logic::vod::Channel::Schedule urgent segment index:{0}, id:{1}",this._m13,this._m30));if(this._m507>0&&!this._m590){}var g=0;var b=this._m8._m89*1000;this._m13=-1;for(var f=0;(this._m30>=0)&&(f<this._m3._m6.length);f++){var a=this._m3._m6[f];if(a.id_==this._m30){this._m13=f;this._m8._m370=a._m358/1000}if(this._m13>=0&&f>=this._m13){if(g<b||this._m70<=this._m30){this._m70=a.id_}g+=a._m50}}if(!e){this._m684(c);this._m720(c);this._m625(c);this._m575=c;this._m58.sort(function(i,h){if(i._m12==h._m12){return i._m127-h._m127}return h._m12-i._m12});this._m67.sort(function(i,h){if(i._m12==h._m12){return i._m127-h._m127}return h._m12-i._m12});this._m221._m666(true,p2p$.$n8.PROTOCOL_TYPES._k8,0,0)}this._m3._m30=this._m30;this._m442();var d=null;if(!e&&(this._m13>=0)&&this._m58.length>0){d=this._m466(this._m13);if(d!=null&&d.segmentInfo!=null){_m$cde14(_m$cde1("logic::vod::Channel Schedule {0} piece request(s) to ({1}), channel({2}), urgentSegmentId({3}), segmentID({4}), segmentPieces({5})",d.stableDispatchPiece,d.peerInfo._m29._m209,this.id_,this._m30,d.segmentInfo.id_,((this._m13<this._m3._m6.length)?this._m3._m6[d.segmentInfo.id_]._m28.length:0)))}}this._m311=this._m516((this._m13>=0)?this._m13:0)},_m516:function(m){if(this._m67.length==0||this._m3._m6.length==0){return 0}var b=false;var j=this._m523();var f=this._m68>0?this._m8._m174:this._m8._m157;var d=this._m183();var a=-1;var c=0;var k=0;var i=d._m482()*2/3;if(m>=0){var l=0;var g=this._m325(this._m22._m45()._m238()?1500:2000);b=this._m454();for(var e=m;j<f&&e<this._m3._m6.length;e++){var h=this._m3._m6[e];l+=h._m50;c++;if(h._m49>0){k+=h._m49;if(k>i||(c+5)>d._m757()){break}}else{if(c>10){break}}if(h._m158){continue}if(l<=g&&!b&&this._m13>=0){continue}if(a<0){a=e}j=this._m149(b,j,f,h);if(this._m68>0&&this._m70>=0&&h.id_>=this._m70){break}}}if(a<0){return j}for(var e=a;j<f&&e>=0&&e>=m;e--){var h=this._m3._m6[e];if(h._m158||h._m26>0){continue}j+=this._m149(b,j,f,h)}return j},_m149:function(a,g,c,e){var i=p2p$.$n2.$c47._m9();for(var d=0;g<c&&d<e._m28.length;d++){var l=e._m28[d];if(l._m26>0||l._m49<=0){continue}else{if(l._m27>0){var b=((l._m49>0)?(this._m8._m89/2):this._m8._m89)*1000;if(l._m27+b>i){if(!l._m98||!a){continue}}}}var f=this._m624(l._m32,l.id_);if(f==null){continue}var j=new p2p$.$n8.$c38();var h=new p2p$.$n8.RequestDataItem();h._m74=e.id_;h._m83=l._m32;h._m101=l.id_;h._m131=l._m131;j._m52.push(h);l._m328=true;l._m116=f._m140;l._m27=i;f._m17=i;f._m79=e.id_;f._m103=l;f._m123(j);f._m744();f._m29.send(j);g++}return g},_m1244:function(){},_m298:function(a){switch(a){case p2p$.$n19.$c2Static._k42:this._m307(false);this._m681(p2p$.$n19.$c2Static._k42,3*1000);break;case p2p$.$n19.$c2Static._k50:this._m1209();this._m430(p2p$.$n19.$c2Static._k50,this._m8._m289*1000);break;default:break}},_m260:function(b,a){this._super(b,a)}});p2p$.ns("$n8");p2p$.$n8.$c33=_m$cde18._m41({_m948:false,_m465:false,_m66:null,_m8:null,_m3:null,_m77:null,_m34:null,_m99:null,_m324:null,_m303:0,_m587:0,_m348:0,_m284:false,_m626:"",_m383:"",init:function(d,b,a,c){this._m66=d;this._m8=b;this._m3=a;this._m99=c;this._m324=[];this._m77=null;this._m948=false;this._m8._m115="ws://123.125.89.103:3852";this._m8._m274="111.206.208.61:80";this._m8._m326="stun:111.206.210.145:8124"},_m144:function(){_m$cde5("protocol::base::Pool Intialize pool for type("+p2p$.$n2.$c54._m37(this._m3._m32)+"), p2p group id("+this._m3._m62+"), channel("+this._m3._m75+")");this.exit();this._m948=true;var a=new p2p$.$n10.$c1(this,this._m99);a.open();this._m324.push(a);this._m551();return true},exit:function(){this._m948=false;if(this._m34){clearTimeout(this._m34);this._m34=null}if(this._m77!=null){this._m77.log("cancel");this._m77=null}this._m465=false;this._m348=0;for(var b=0;b<this._m324.length;b++){var a=this._m324[b];a.close()}this._m324=[];return true},_m1268:function(){},_m1213:function(){},_m771:function(){if(this._m465){return true}return this._m623()},_m780:function(){if(!this._m465){return true}for(var b=0;b<this._m324.length;b++){var a=this._m324[b];if(a._m254()){continue}a.close()}this._m324=[];this._m8._m196=0;this._m8._m112=0;this._m8._m85=0;this._m465=false;return true},_m641:function(){return this._m465},_m840:function(){return this._m348>0},_m1145:function(){return this._m948},_m24:function(){return this._m8},_m45:function(){return this._m66},_m33:function(){return this._m3},_m1277:function(){return this._m324},_m551:function(){if(!this._m3._m62){return}if(this._m77!=null){this._m77.log("cancel");this._m77=null}var a=this._m66._m568("selector.webp2p.letv.com");if(this._m587>2){a="111.206.210.139"}var d=p2p$.$n2.$c46._m403(this._m66._m874());var c=p2p$.$n2.$c46._m403(this._m66._m145);var b=p2p$.$n2.$c46.format("http://{0}/query?streamid={1}&type={2}&module=cde&version={3}&geo={4}&isp={5}&country={6}&province={7}&city={8}&area={9}&appid={10}&mac={11}&hwtype={12}",this._m284?this._m626:a,this._m3._m62,p2p$.$n2.SERVER_TYPES._k48+p2p$.$n2.SERVER_TYPES._k34+p2p$.$n2.SERVER_TYPES._k37,this._m8._m213,this._m8._m946,this._m8._m1141,this._m8._m688,this._m8._m715,this._m8._m1072,this._m8._m1191,this._m66._m1153,d,c);this._m284=false;this._m77=new p2p$.$n1.$c7(b,this,"GET","json","base::selector");this._m77.load();this._m925(10*1000)},_m845:function(f){var a=f._m35;if(a==""||a==null){_m$cde15(_m$cde1("protocol::base::Pool Parse selector response data failed: channel({1})",this._m3._m75))}this._m383=a.status;if(p2p$.$n2.ERROR_CODE._k4==this._m383){this._m8._m1003=a;var e=this._m8._m1003;var b=e.items;for(var h=0;h<b.length;h++){var d=b[h];if(d.type==p2p$.$n2.SERVER_TYPES._k48){var g=d.serviceUrls.split(",");if(g&&g.length>1){if(!this._m8._m381){this._m8._m115=g[1]}}}if(d.type==p2p$.$n2.SERVER_TYPES._k34){var g=d.serviceUrls.split("//");if(g&&g.length>1){if(!this._m8._m368){this._m8._m274=g[1]}}}if(d.type==p2p$.$n2.SERVER_TYPES._k37){if(!this._m8._m444){this._m8._m326="stun:"+d.serviceUrls}}}this._m8._m246=e.hasOwnProperty("trackerId")?e.trackerId:this._m8._m274;this._m8._m323=Math.max(e.maxPeers,1);this._m8._m89=Math.max(e.urgentSize,1);if(e.hasOwnProperty("p2pUploadEnabled")){this._m8._m151=e.p2pUploadEnabled}if(e.hasOwnProperty("p2pUploadLimit")){this._m8._m526=e.p2pUploadLimit}if(e.hasOwnProperty("p2pUploadThrottleInit")){this._m8._m304=e.p2pUploadThrottleInit}if(e.hasOwnProperty("p2pUploadThrottleAverage")){this._m8._m262=e.p2pUploadThrottleAverage}if(e.hasOwnProperty("p2pUploadMaxReserved")){this._m8._m330=e.p2pUploadMaxReserved}if(e.hasOwnProperty("p2pUrgentUploadEnabled")){this._m8._m214=e.p2pUrgentUploadEnabled}if(e.hasOwnProperty("p2pShareRangeInterval")){this._m8._m147=Math.max(e._m147,2)}if(e.hasOwnProperty("p2pMaxParallelRequestPieces")){this._m8._m157=e.p2pMaxParallelRequestPieces}if(e.hasOwnProperty("p2pMaxUrgentRequestPieces")){this._m8._m174=e.p2pMaxUrgentRequestPieces}if(e.hasOwnProperty("fetchRate")){this._m8._m488=e.fetchRate}if(e.hasOwnProperty("cdnSlowThresholdRate")){this._m8._m327=e.cdnSlowThresholdRate}if(e.hasOwnProperty("hbInterval")){this._m8._m199=Math.max(2,e.hbInterval)}if(e.statReportInterval>0){this._m8._m289=e.statReportInterval}if(e.livePlayOffset>0){this._m66._m95=e.livePlayOffset}if(e.hasOwnProperty("protocols")){var c=e.protocols;this._m8._m121=c.rtmfp["disabled"];this._m8._m48=c.websocket["disabled"];this._m8._m72=c.webrtc["disabled"]}return true}else{_m$cde15(_m$cde1("protocol::base::Pool Selector response error:{0}, channel({1})",this._m383,this._m3._m75));return false}},_m925:function(a){var b=this;this._m34=setTimeout(function(){b._m960()},a)},_m657:function(){if(this._m34){clearTimeout(this._m34);this._m34=null}},_m960:function(a){if(!this._m948){return}if(this._m77!=null){this._m77.log("timeout");this._m77=null}this._m587++;_m$cde15(_m$cde1("protocol::base::Pool Selector timeout for channel({0}), {1} try times...",this._m3._m75,this._m587));this._m551()},_m106:function(a){var b=false;if(this._m77!=a){_m$cde5(_m$cde1("protocol::base::Pool Expired http complete for tag({0}), channel({1}), ignore",this._m77._m294,this._m3._m75));return b}this._m77=null;_m$cde5(_m$cde1("protocol::base::Pool  Http complete for tag({0}), channel({1}), response code({2}), details({3}), size({4})",a._m294,this._m3._m75,a._m40,a._m468,a._m35.length));if(a._m294=="base::selector"){b=true;if(!a._m107||a._m40<200||a._m40>=300){return b}if(!this._m845(a)){return b}else{if(this._m284){this._m303++;_m$cde5(_m$cde1("protocol::base::Pool Selector redirect to({0}), total {1} redirect times ..."),this._m626,this._m303);if(this._m303>3){this._m284=false;this._m303=0}else{this._m657();this._m551()}return b}}this._m657();_m$cde5(_m$cde1("protocol::base::Pool Query from selector successfully, gather(http://{0}), webrtc({1}), tracker(http://{2}), stun({3})max peers({4}), urgent size({5}), channel({6}), rtmfp({7}), websocket({8}), webrtc({9}), upload({10}), urgent upload({11}), range interval({12} s), upload limit({13}), init throttle({14} B/s), avg throttle({15} B/s), max reserved({16} B/s)",this._m8._m274,this._m8._m115,this._m8._m246,this._m8._m326,this._m8._m323,this._m8._m89,this._m3._m75,this._m8._m121?"no":"yes",this._m8._m48?"no":"yes",this._m8._m72?"no":"yes",this._m8._m151?"yes":"no",this._m8._m214?"yes":"no",this._m8._m147,this._m8._m526?"yes":"no",this._m8._m304,this._m8._m262,this._m8._m330));this._m348=p2p$.$n2.$c47._m9();this._m8._m373=a._m393;this._m8._m232=a._m156;this._m99._m808(p2p$.$n2.ERROR_CODE._k4);this._m623()}return b},_m623:function(){var a=this._m66._m238();if(this._m3._m62==""||this._m465||this._m348<=0||a){return true}if(!this._m8._m72&&!this._m66._m72){var b=new p2p$.$n7.$c1(this,this._m99);b.open();b._m643(this._m8._m323);this._m324.push(b)}if(!this._m8._m48&&!this._m66._m48){var b=new p2p$.$n11.$c1(this,this._m99);b.open();b._m643(this._m8._m323);this._m324.push(b)}this._m465=true;return true}});p2p$.ns("$n8");p2p$.$n8.PROTOCOL_STATES={_k72:0,_k97:1,_k98:2,_k93:3,_k94:4};p2p$.$n8.PROTOCOL_TYPES={_k38:0,_k8:1,_k5:2,_k3:3,_k2:4,_k27:5};p2p$.$n8.TERMINAL_TYPES={_k24:0,_k20:1,_k19:2,_k18:3,_k11:4,_k131:5};p2p$.$n8.$c1Static={_m484:function(a){var b=null;var d=a.indexOf("/");if(d==-1){b=a}else{if(d>0){b=a.substr(0,d)}}var c=p2p$.$n2.$c46._m1064(b);if(p2p$.$n2.$c46._m504(c,"un")){return p2p$.$n8.TERMINAL_TYPES._k20}else{if(p2p$.$n2.$c46._m504(c,"pc")){return p2p$.$n8.TERMINAL_TYPES._k20}else{if(p2p$.$n2.$c46._m504(c,"tv")){return p2p$.$n8.TERMINAL_TYPES._k19}else{if(p2p$.$n2.$c46._m504(c,"box")){return p2p$.$n8.TERMINAL_TYPES._k18}else{if(p2p$.$n2.$c46._m504(c,"mp")){return p2p$.$n8.TERMINAL_TYPES._k11}else{if(p2p$.$n2.$c46._m504(c,"iphone")){return p2p$.$n8.TERMINAL_TYPES._k11}else{if(c.length>0){switch(c[0]){case"C":case"c":case"T":case"t":return p2p$.$n8.TERMINAL_TYPES._k18;break;case"X":case"x":case"S":case"s":return p2p$.$n8.TERMINAL_TYPES._k19;break;default:return p2p$.$n8.TERMINAL_TYPES._k11;break}}else{return p2p$.$n8.TERMINAL_TYPES._k24}}}}}}}}};p2p$.$n8.$c1=_m$cde18._m41({_m56:null,_m99:null,_m313:null,_m32:0,_m1086:0,_m180:0,id_:"",_m1295:"",_m883:"",init:function(b,a,c){this._m56=b;this._m99=a;this._m32=c;this._m1086=p2p$.$n8.PROTOCOL_STATES._k72;this._m180=20;this._m313=[]},_m793:function(){return this.id_},getType:function(){return this._m32},_m1119:function(a){switch(a){case p2p$.$n8.PROTOCOL_TYPES._k38:return"reserved";case p2p$.$n8.PROTOCOL_TYPES._k8:return"cdn";case p2p$.$n8.PROTOCOL_TYPES._k5:return"rtmfp";case p2p$.$n8.PROTOCOL_TYPES._k3:return"websocket";case p2p$.$n8.PROTOCOL_TYPES._k2:return"webrtc";default:return"unknown"}},_m87:function(){return this._m1119(this._m32)},_m110:function(){return this._m56},_m182:function(){return this._m99},_m228:function(a,d,c){var b=this;d=setTimeout(function(){b._m298(a,d)},c);return d},_m298:function(a,c,b){},_m643:function(a){this._m180=a},_m254:function(){return p2p$.$n8.PROTOCOL_TYPES._k8==this._m32},open:function(){},close:function(){}});p2p$.ns("$n8");p2p$.$n8.$c3=_m$cde18._m41({_m22:null,_m830:"",_m165:"",_m209:"",_m505:"",_m78:false,_m767:false,_m139:0,init:function(b,a){this._m22=b;this._m165=a;this._m78=false;this._m767=false;this._m139=p2p$.$n8.TERMINAL_TYPES._k24},_m228:function(a,d,c){var b=this;b._m34=setTimeout(function(){b._m298(a,b._m34)},c)},open:function(){this._m78=true;return true},close:function(){this._m78=false;return true},send:function(a){return false},send:function(a){return false},control:function(a){return false},_m890:function(){return -1},_m599:function(a,b){return -1},_m278:function(){return this._m767},_m254:function(){return this._m22._m254()},_m1157:function(){return this._m22},_m769:function(){return this._m830},_m435:function(){return this._m165},_m134:function(){return this._m209},_m1094:function(){return this._m505},_m484:function(){return this._m139},getType:function(){return this._m22.getType()},_m87:function(){return this._m22._m87()},setName:function(a){this._m830=a},_m1218:function(a){this._m209=a},_m1262:function(a){this._m505=a},_m1242:function(a){this._m139=a},_m932:function(){if(this._m22._m254()||p2p$.$n8.TERMINAL_TYPES._k24!=this._m139){return}this._m139=p2p$.$n8.$c1Static._m484(this._m505==""?this._m830:this._m505)}});p2p$.ns("$n8");p2p$.$n8.PieceRangeItem=_m$cde18._m41({_m32:0,_m359:0,_m253:0,init:function(){this._m32=0;this._m359=0;this._m253=0}});p2p$.$n8.RequestDataItem=_m$cde18._m41({_m697:false,_m74:0,_m101:0,_m83:0,_m131:0,init:function(){this._m697=false;this._m74=-1;this._m101=0;this._m83=0;this._m131=0}});p2p$.$n8.ResponseDataItem=_m$cde18._m41({_m74:0,_m101:0,_m83:0,_m954:0,_m90:"",init:function(){this._m74=-1;this._m101=0;this._m83=0;this._m954=0}});p2p$.$n8.$c38=_m$cde18._m41({_m32:"",_m212:null,_m52:null,_m128:null,init:function(){this._m32=0;this._m212=[];this._m52=[];this._m128=[]},empty:function(){return this._m212.length==0&&this._m52.length==0&&this._m128.length==0}});p2p$.ns("$n10");p2p$.$n10.TIMEER_TYPE={_k90:0,_k43:1,_k33:2};p2p$.$n10.$c3=p2p$.$n8.$c3._m41({_m413:null,_m102:null,_m3:null,_m10:null,_m34:null,_m557:null,_m16:null,_m250:null,_m902:false,_m138:0,_m17:0,_m631:0,_m12:0,_m252:0,_m179:0,init:function(d,c,e,b){this._super(d,c);this._m1183=e;this._m557=b;this._m17=0;this._m138=0;this._m631=30*1000;this._m12=0;this._m252=0;this._m179=0;this._m3=new p2p$.$n1.$c32();var a=this._m22._m110()._m33();this._m413=new p2p$.$n1.$c58();this._m102=new p2p$.$n1.$c58();this._m250=new p2p$.$n2.$c60();if(this._m165.length==0){this._m902=true;this._m3=a;this._m165=this._m3._m93;this._m12=this._m3._m12;if(this._m3._m6.length>0){this._m102._m108(this._m3._m6[0]._m398)}}else{this._m902=false;this._m3._m338=a._m338;this._m3._m132=a._m132;this._m3._m93=this._m165}this._m413._m108(this._m3._m822==""?this._m3._m93:this._m3._m822);this._m209=(this._m902?"* ":"")+(this._m413._m201+":")+((this._m413._m161==0)?80:this._m413._m161);this._m3._m603=this._m413._m201+":"+((this._m413._m161==0)?80:this._m413._m161);this._m16=new p2p$.$n10.$c12()},_m1168:function(b){var a=this._m22._m110()._m33();this._m3=a;for(var d=0;d<this._m3._m6.length;d++){var c=this._m3._m6[d];if(b<c._m81.size()){c._m398=c._m81[b]}c._m81=[]}},_m1034:function(){_m$cde14(_m$cde1("protocol::cdn::Session [{0}]Clean all pending requests, session({1})",p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32),this._m209));if(this._m34!=null){clearTimeout(this._m34);this._m34=null}if(this._m10!=null){this._m10.log("clean");this._m10.close();this._m10=null}this._m250.clear();this._m16._m360=false},_m490:function(){this._m17=p2p$.$n2.$c47._m9();if(this._m10!=null){}this._m10=new p2p$.$n1.$c7(this._m3._m93,this,"GET","","cdn::meta");this._m10.load();this._m228(p2p$.$n10.TIMEER_TYPE._k43,this._m34,10*1000)},_m714:function(a){if(this._m10!=null){return}if(!a){if(this._m250.empty()){return}var b=new p2p$.$n10.$c12();this._m16=this._m250.element(0).value;this._m16._m1100(b);if(b._m28.length==0){this._m250.clear()}}var d=this._m16._m42;this._m16._m360=true;this._m16._m630=0;this._m16._m569=0;if(this._m16._m388>0){var c=Math.max(this._m16._m477,0)+this._m16._m273;var f=c+this._m16._m388-1;if(this._m22._m110()._m33()._m132){if(d.indexOf("?")==-1){d+="?"}else{d+="&"}d+=p2p$.$n2.$c46.format("rstart={0}&rend={1}",c,f)}}if(d.indexOf("?")==-1){d+="?"}else{d+="&"}if(d.indexOf("&appid=")==-1&&d.indexOf("?appid=")==-1){var g=p2p$.$n2.$c46._m1065(this._m22._m110()._m45()._m248);var e=p2p$.$n2.$c46.fromNumber(p2p$.$n2.$c43._m683());if(d.indexOf("?")==-1){d+="?"}else{d+="&"}d+=p2p$.$n2.$c46.format("appid={0}&cde={1}",g,e)}if(this._m22._m110()._m24()._m483!=""&&d.indexOf("&p1=")==-1&&d.indexOf("?p1=")==-1){if(d.indexOf("?")==-1){d+="?"}else{d+="&"}d+=this._m22._m110()._m24()._m483}d+=p2p$.$n2.$c46.format("&ajax={0}",1);this._m179=0;this._m252=p2p$.$n2.$c47._m9();this._m10=new p2p$.$n1.$c7(d,this,"GET","arraybuffer","cdn::range-data");this._m10._m1226(this._m16);this._m10.load();this._m228(p2p$.$n10.TIMEER_TYPE._k33,this._m34,this._m631)},_m543:function(a){if(!this._m3.load(a._m35,a._m156)){_m$cde15("protocol::cdn::Session["+p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32)+"]Parse meta response failed, url("+this._m3._m93+"), channel("+this._m22._m110()._m33()._m75+"), size("+a._m35.length+")");return false}return true},_m1097:function(a){this._m22._m182()._m178(this)},_m556:function(a){if(this._m10!=null){this._m10.log("timeout");this._m10.close();this._m10=null}if(++this._m138!=0){var b=this._m138<3?"retry again ...":"meta failed";_m$cde15("protocol::cdn::Session ["+p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32)+"]Meta timeout for url("+this._m3._m93+"), channel("+this._m22._m110()._m33()._m75+"), "+this._m138+" try times, "+b)}if(this._m138<3){this._m490()}},_m800:function(d){if(this._m10!=null){this._m10.log("timeout");this._m10.close();this._m10=null}this._m16._m360=false;this._m16._m1109++;this._m12=0;_m$cde15(_m$cde1("protocol::cdn::Session [{0}] Range download timeout, segment({1}), items({2})",p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32),this._m16._m74,this._m16._m28.length));var e=-1;if(this._m16._m74>=0){e=this._m3._m268(this._m16._m74)}if(e<0||e>=this._m3._m6.length){_m$cde15(_m$cde1("protocol::cdn::Session::onRangeDownloadTimeout segment({0}) not found",this._m16._m74));return null}var c=this._m3._m6[e];for(var a=0;a<c._m28.length;a++){var b=c._m28[a];if(b._m26>0){continue}b._m27=0}},_m298:function(a,c,b){if(c!=this._m34||!this._m78){return}if(this._m34){clearTimeout(this._m34);this._m34=null}switch(a){case p2p$.$n10.TIMEER_TYPE._k90:this._m1097(b);break;case p2p$.$n10.TIMEER_TYPE._k43:this._m556(b);break;case p2p$.$n10.TIMEER_TYPE._k33:this._m800(b);break;default:break}},_m514:function(a){var b=false;if(this._m10!=a){_m$cde5("protocol::cdn::Session::onHttpDownloadData ["+p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32)+"]Expired http complete for tag("+a._m294+"), url("+a._m124+"), channel("+this._m22._m110()._m33()._m75+"), response code("+a._m40+"), details("+a._m468+"), size("+a._m35.length+"), ignore");return b}if(a._m294=="cdn::range-data"){}},_m106:function(e){var f=false;if(this._m10!=e){_m$cde5("protocol::cdn::Session::onHttpDownloadCompleted ["+p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32)+"]Expired http complete for tag("+e._m294+"), url("+e._m124+"), channel("+this._m22._m110()._m33()._m75+"), response code("+e._m40+"), details("+e._m468+"), size("+e._m35.length+"), ignore");return f}this._m10=null;this._m17=p2p$.$n2.$c47._m9();if(e._m294=="cdn::meta"){_m$cde5("protocol::cdn::Session ["+p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32)+"]Meta complete "+((e._m107&&e._m40==200)?"OK":"FAILED")+", url("+e._m124+"), channel("+this._m22._m110()._m33()._m75+")");if(e._m107){this._m209}f=true;if(!e._m107||e._m40<200||e._m40>=300){return f}this._m3._m12=e._m97;this._m12=e._m97;this._m179=e._m111;if(this._m34){clearTimeout(this._m34);this._m34=null}this._m3._m75=this._m22._m110()._m33()._m75;this._m3._m716=e._m124;if(!this._m543(e)){return f}if(this._m3._m6.length>0){this._m102._m108(this._m3._m6[0]._m398)}this._m767=true;this._m714(false);this._m22._m182()._m178(this)}else{if(e._m294=="cdn::range-data"){if(this._m16._m630<=0){}f=true;if(e._m40<200||e._m40>=300){this._m12=0;return f}this._m12=e._m97;this._m179=e._m111;if(this._m34){clearTimeout(this._m34);this._m34=null}var a=this._m16._m630;var d=new p2p$.$n8.$c38();while(this._m16._m569<this._m16._m28.length){var c=this._m16._m28[this._m16._m569];if(c._m49<=0){if(c._m131!=0){break}}else{if(c._m26>0){if(this._m16._m388>0){a+=c._m49}this._m16._m630+=c._m49;this._m16._m569++;continue}}if(this._m16._m388<=0){a=c._m273}if((a+c._m49)>e._m35.length){break}var b=new p2p$.$n8.ResponseDataItem();b._m74=this._m16._m74;b._m83=c._m32;b._m101=c.id_;b._m954=c._m1186;if(c._m49<=0){b._m90=e._m35}else{b._m90=e._m35.subarray(a,c._m49+a)}if(this._m16._m388>0){a+=c._m49}this._m16._m630+=c._m49;this._m16._m569++;c._m26=p2p$.$n2.$c47._m9();d._m128.push(b)}if(d._m128.length!=0){this._m22._m182()._m260(this,d)}}}},open:function(){if(this._m767){return true}this._super();if(!this._m3._m716==""){this._m767=true;if(this._m12<=0){this._m12=200000}this._m12=this._m3._m12;this._m22._m182()._m178(this)}else{if(this._m413._m7.get("__cde_attach__")!=null){var a=p2p$.$n2.$c46._m94(_m413._m7.__cde_attach__,0);this._m1168(a);this._m767=true;this._m12=1;this._m22._m182()._m178(this)}else{this._m138=-1;this._m228(p2p$.$n10.TIMEER_TYPE._k43,this._m34,5*1000)}}return true},close:function(){this._super();if(this._m34!=null){clearTimeout(this._m34);this._m34=null}if(this._m10!=null){this._m10.log("clean");this._m10.close();this._m10=null}return true},send:function(p){var h=0;var k=this._m3._m69?this._m3:this._m22._m110()._m33();var j=this._m22._m110()._m33();if(this._m16._m360&&this._m16._m74<k._m30){if(this._m10!=null){this._m10.log("cancel");this._m10.close();this._m10=null}this._m16._m360=false}for(var b=0;b<p._m52.length;b++){var l=p._m52[b];if(l._m101==-1){this._m12=-1;this._m252=0;this._m179=0;this._m1034();return true}var g=-1;if(l._m74>=0){g=k._m268(l._m74)}else{g=k._m261(l._m83,l._m101)}if(g<0||g>=k._m6.length){_m$cde15(_m$cde1("protocol::cdn::Session [{0}]Send piece from session({1}) not found, type({2}), id({3}), ignore it!",p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32),this._m209,p2p$.$n2.$c54._m272(l._m83),l._m101));h++;continue}var f=k._m6[g];var c=f._m563(l._m83,l._m101);if(c<0||c>=f._m28.length){h++;continue}var o=f._m28[c];var e=this._m250.get(g);if(typeof e=="undefined"||e==null){e=new p2p$.$n10.$c12();this._m250.set(g,e)}e._m697=l._m697;e._m477=f._m477;e._m74=f.id_;e._m644=f._m49;if(e._m42==""){var m=this._m1183-1;var d=(this._m902&&j._m603=="")||(j._m603==this._m3._m603);if(d||this._m3._m69){e._m42=f._m398}else{if(p2p$.$n2.META_DATA_TYPE._k7==j._m32&&!j._m69&&m>=0&&f._m81&&m<f._m81.length&&f._m81[m]){e._m42=f._m81[m];_m$cde5(_m$cde1("protocol::cdn::Session [{0}]Using backup url from meta, index({1}), url({2})",p2p$.$n2.$c54._m37(this._m22._m110()._m33()._m32),m,e._m42))}else{var a=new p2p$.$n1.$c58();a._m108(f._m398);var i=a._m161==this._m102._m161||(a._m161==0&&this._m102._m161==80)||(a._m161==80&&this._m102._m161==0);if(a._m201!=this._m102._m201||!i){a._m201=this._m102._m201;a._m161=this._m102._m161;if(this._m102._m7.has("path")){a._m7.set("path",this._m102._m7.get("path"))}if(this._m102._m7.has("proxy")){a._m7.set("proxy",this._m102._m7.get("proxy"))}e._m42=a.toString()}else{e._m42=f._m398}}}}if(!e._m1107(o)){h++}}this._m714(false);return true},_m890:function(){return -1},_m599:function(b,c){if(this._m250.isEmpty()&&!this._m16._m360&&!c){return this._m12}var a=this._m252>0?(b-this._m252):0;if(a>1000){this._m12=this._m179*1000/a}return this._m12}});p2p$.ns("$n10");p2p$.$n10.$c1=p2p$.$n8.$c1._m41({_k103:0,_k119:1,_m78:false,_m1013:0,_m1012:0,_m945:0,_m1294:null,_m557:null,init:function(b,a){this._super(b,a,p2p$.$n8.PROTOCOL_TYPES._k8);this._m78=false;this._m1013=0;this._m1012=0;this._m945=0;this._m557=new p2p$.$n10.$c25()},open:function(){this.close();this._m78=true;var c=new p2p$.$n1.$c58();c._m108(this._m56._m33()._m93);var a="_s.m3u8";var b=(p2p$.$n2.META_DATA_TYPE._k7!=this._m56._m33()._m32&&c._m429.length>a.length&&c._m429.substr(c._m429.length-a.length)==a);this._m557.enabled(b);this._m56._m24()._m834=b;if(!b){return this._m1260()}},_m1260:function(){if(!this._m78||!(this._m313.length==0)){return true}var e=0;var i=null;var h=(this._superprototype._m110.call(this)._m456=="stream");if(h){}else{i=new p2p$.$n10.$c3(this,"",e++,this._m557)}this._m313.push(i);var f=this._m56._m24()._m400;var a=f.nodelist;for(var d=0;d<a.length;d++){var g=a[d];var b=g.name;var k=g.location;if(k==""||k==this._m56._m33()._m93){i.setName(b);continue}if(this._m56._m24()._m296&&this._m313.length<this._m56._m24()._m485){var c=null;if(h){}else{c=new p2p$.$n10.$c3(this,k,e++,this._m557)}c.setName(b);this._m313.push(c)}}for(var d=0;d<this._m313.length;d++){var j=this._m313[d];j.open()}this._m56._m24()._m547=this._m313.length;return true},sleep:function(b){var a=new Date();var c=a.getTime()+b;while(true){a=new Date();if(a.getTime()>c){return}}},close:function(){this._m78=false;if(this._m1102!=null){this._m1102.close()}for(var b=0;b<this._m313.length;b++){var a=this._m313[b];a.close()}this._m313=[];return true},_m1207:function(){},_m1229:function(){},_m1178:function(a){},_m1222:function(a){},_m298:function(a,c,b){},_m106:function(a){}});p2p$.ns("$n10");p2p$.$n10.$c12=_m$cde18._m41({_m360:null,_m414:false,_m697:false,_m477:0,_m74:0,_m644:0,_m1109:0,_m273:0,_m388:0,_m630:0,_m569:0,_m42:"",_m837:0,_m828:0,_m28:null,init:function(){this._m28=[];this._m360=false;this._m414=false;this._m697=false;this._m477=-1;this._m74=-1;this._m644=0;this._m1109=0;this._m273=0;this._m388=0;this._m630=0;this._m569=0;this._m837=0;this._m828=0},_m1107:function(a){this._m414=true;var c=false;for(var d=0;d<this._m28.length;d++){var b=this._m28[d];if(b._m32==a._m32&&b.id_==a.id_){c=true;break}}if(!c){this._m28.push(a.fork())}return !c},_m1100:function(b){this._m273=0;this._m388=0;this._m28.sort(function(g,f){return g._m273-f._m273});if(this._m644<=0){return}var e=-1;var a=0;for(var d=0;d<this._m28.length;d++){var c=this._m28[d];if(c._m49<=0){this._m273=0;this._m388=0;return}else{if(c._m26>0){continue}}if(e<0){e=c._m344;this._m273=c._m273;this._m388=c._m49;a++;this._m837=this._m828=e;continue}if(e+1!=c._m344){b._m1107(c);continue}this._m828=e=c._m344;this._m388+=c._m49;a++}if(this._m388>=this._m644&&this._m477<0){this._m388=0}}});p2p$.ns("$n10");p2p$.$n10.$c25=_m$cde18._m41({_m1232:false,_m1301:null,_m1290:"",_m1284:"",init:function(){},enabled:function(a){this._m1232=a},open:function(){},close:function(){},decrypt:function(b,a,c){}});p2p$.ns("$n7");p2p$.$n7.$c1Static={_k21:1,_k9:2,_k26:3,_k40:100,_k66:101,_k32:102};p2p$.$n7.$c1=p2p$.$n8.$c1._m41({_m78:false,_m309:null,_m114:null,_m1254:null,_m292:null,_m53:null,_m104:0,_m60:0,init:function(b,a){this._super(b,a,p2p$.$n8.PROTOCOL_TYPES._k2);this._m53=new p2p$.$n2.$c60();this._m104=100*1000;this._m60=0;this._m849=true;this._m752=false},open:function(){this.close();this._m78=true;this._m17=p2p$.$n2.$c47._m9();this.id_=p2p$.$n2.$c46.format("{0}{1}{2}{3}",Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),p2p$.$n2.$c47._m9());if(this._m56._m24()._m199>0){this._m402=this._m56._m24()._m199}this._m833();this._m136=this._m228(p2p$.$n7.$c1Static._k9,this._m136,120*1000);return true},close:function(){this._m78=false;if(this._m309){this._m309.close();this._m309=null}if(this._m292){clearTimeout(this._m292);this._m292=null}if(this._m136){clearTimeout(this._m136);this._m136=null}if(this._m114){clearTimeout(this._m114);this._m114=null}for(var c=0;c<this._m53.length;c++){var a=this._m53.element(c);var b=a.value;b.disconnect()}this._m53.clear();return true},_m298:function(a,c,b){switch(a){case p2p$.$n7.$c1Static._k21:_m298();break;case p2p$.$n7.$c1Static._k9:this._m579();break;case p2p$.$n7.$c1Static._k26:onAsyncPeersTimeout();break;case p2p$.$n7.$c1Static._k40:this._m947();break;case p2p$.$n7.$c1Static._k66:this._m921();break;case p2p$.$n7.$c1Static._k32:this._m801();break;default:break}},_m1138:function(){var b=p2p$.$n2.$c46.format("{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14);var a={clientId:this.id_,clientModule:this._m56._m45()._m1139,clientVersion:b,protocolVersion:1,playType:this._m56._m24()._m456,p2pGroupId:this._m56._m33()._m62,osPlatform:encodeURIComponent(this._m56._m24()._m332),hardwarePlatform:this._m56._m45()._m145=="Unkonwn"?encodeURIComponent(this._m56._m24()._m332):this._m56._m45()._m145};return a},_m579:function(){this._m322();this._m136=this._m228(p2p$.$n7.$c1Static._k9,this._m136,120*1000)},_m947:function(){_m$cde15(_m$cde1("protocol::webrtc::Manager::Register timeout, try again ..."))},_m921:function(){_m$cde15(_m$cde1("protocol::webrtc::Manager::HeartBeat timeout, try again ..."))},_m801:function(){this._m870()},_m833:function(){var b=this._m56._m24()._m115;this._m309=new WebSocket(b);_m$cde5(_m$cde1("protocol::webrtc::Manager::open webrtc server ({0}) ...",this._m56._m24()._m115));var a=this;this._m309.onopen=function(c){a._m367(c)};this._m309.onclose=function(c){a._m185(c)};this._m309.onerror=function(c){a._m185(c)};this._m309.onmessage=function(c){a._m291(c)}},_m367:function(a){_m$cde5(_m$cde1("protocol::webrtc::Manager::Start register webrtc server ({0}) ...",this._m56._m24()._m115));this._m875()},_m185:function(a){_m$cde5(_m$cde1("protocol::webrtc::Manager::Close webrtc({0}) close ...",this._m56._m24()._m115))},_m291:function(a){var b=JSON.parse(a.data);switch(b.method){case"registerResponse":this._m926(b);break;case"heartbeatResponse":this._m897(b);break;case"queryPeerListResponse":this._m783(b);break;case"proxyDataRequest":this._m913(b);break;case"proxyDataResponse":_m$cde14(_m$cde1("protocol::webrtc::Manager::WebSocket proxy data response code: {0}",b.errorCode));break;default:_m$cde5(_m$cde1("protocol::webrtc::Manager::WebSocket unknown method: {0}",b.method));break}},_m897:function(a){},_m875:function(){var a={method:"registerRequest",streamId:this._m56._m33()._m62,nodeInfo:{ver:this._m56._m24()._m213,pos:(111>=0?111:0),neighbors:0,isp:this._m56._m24()._m1141,country:this._m56._m24()._m688,province:this._m56._m24()._m715,city:this._m56._m24()._m1072,area:this._m56._m24()._m1191,protocol:p2p$.$n8.PROTOCOL_TYPES._k2},localTime:p2p$.$n2.$c47._m9()};var b=p2p$.$n7.$c1Static;this._m114=this._m228(b._k40,this._m114,5000);this._m941=p2p$.$n2.$c47._m9();this._m662(a)},_m926:function(a){if(a.errorCode!==0){_m$cde15(_m$cde1("protocol::webrtc::Manager::Register response failed, errorCode({0})",a.errorCode));return}if(this._m114){clearTimeout(this._m114);this._m114=null}this._m56._m24()._m112=p2p$.$n2.$c47._m9()-this._m941;_m$cde5(_m$cde1("protocol::webrtc::Manager::Register response success, peerid({0})",a.peerId));this._m56._m24()._m774=a.peerId;this._m1179();this._m870()},_m1179:function(){},_m870:function(){var a={method:"queryPeerListRequest",limit:10};this._m292=this._m228(p2p$.$n7.$c1Static._k32,this._m292,10*1000);this._m662(a)},_m783:function(j){var d=0;var f=0;var h="";var g=j.items;if(g.length==0){_m$cde14(_m$cde1("protocol::webrtc::Manager::Query peer list responsed, peerList.length = 0"))}for(var e=0;e<g.length;e++){var b=g[e];h=b.peerId;var a=this._m53.find(h);var c;if(!a){if(this._m53.size()>=this._m180*2){break}c=new p2p$.$n7.$c15(this);this._m53.set(h,c);f++;c._m120=true}else{c=this._m53.get(h)}if(c!=null){c.load(b)}}d=g.length;this._m56._m24()._m155=this._m53.size();if(this._m849&&!this._m752){this._m752=true;this._m99._m593(this,0)}if(f>=0){this._m322()}_m$cde14(_m$cde1("protocol::webrtc::Manager::Query peer list successfully, load {0} peer(s), {1} peer(s) now, channel({2})",d,this._m53.size(),this._m56._m33()._m75))},_m322:function(){var e=p2p$.$n2.$c47._m9();var d=0;for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(!c._m278(e,this._m104)&&(c._m333>5||c._m462>3||!c._m120)){if(c._m29!=null){this._m56._m24()._m155=this._m53.size()}c.disconnect();this._m53.erase(b.key);d++}}this._m60=0;for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(c._m29==null){continue}if(!c._m278(e,this._m104)){this._m56._m24()._m155=this._m53.size();c.disconnect();d++}else{this._m60++}}if(this._m60>=this._m180){return}var a=[];for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(c._m278(e,this._m104)){continue}if(!c._m120){continue}else{if(c._m240+60*1000>e){continue}}a.push(c)}for(var f=0;f<a.length;f++){var c=a[f];if(!c.connect()){continue}this._m60++;if(this._m60>=this._m180){break}}},_m913:function(a){if(typeof(a.data)=="string"){a.data=JSON.parse(a.data)}switch(a.data.action){case"connectRequest":this._m712(a.sourcePeerId,a.data);break;case"connectResponse":this._m701(a.sourcePeerId,a.data);break;default:_m$cde5(_m$cde1("protocol::webrtc::Manager::Remote peer unknown action: {0}",a.data.action));break}},_m701:function(a,b){_m$cde5(_m$cde1("protocol::webrtc::Manager::Recveive a connect response from {0}",a));var d=a;var e=this._m53.find(d);var c;if(!e){_m$cde15(_m$cde1("protocol::webrtc::Manager::Receive a connect response from {0}, but not in the peers",a));return}else{c=this._m53.get(d)}if(c!=null){c.load2(b)}c._m1130(b.iceCandidates,b.sdpDescriptions)},_m712:function(a,b){_m$cde5(_m$cde1("protocol::webrtc::Manager::Receive a connect request from {0}",a));var d=a;var e=this._m53.find(d);var c=null;if(!e){c=new p2p$.$n7.$c15(this);this._m53.set(d,c);c._m120=false}else{c=this._m53.get(d)}if(c!=null){c.load2(b)}c._m120=false;this._m56._m24()._m155=this._m53.size();c._m165=a;c._m707=b.iceServers;c._m170=b.iceCandidates;c._m306=b.sdpDescriptions;c.connect()},_m662:function(a){if(typeof(a)!="string"){a=JSON.stringify(a)}if(this._m309){this._m309.send(a)}},_m602:function(c){for(var d=0;d<this._m53.length;d++){var a=this._m53.element(d);var b=a.value;if(c==b._m29){this._m56._m24()._m105=this._m53.size();this._m99._m286(c);break}}}});p2p$.ns("$n7");p2p$.$n7.$c3=p2p$.$n8.$c3._m41({_m135:null,init:function(e,c,a,b,d){this._super(e,c);this._m135=a;this._m638=b;this._m500=d;this._m209=p2p$.$n2.$c46.format("{0}:{1}",this._m638,this._m500)},send:function(a){if(!this._m135){return}var b=p2p$.$n7.$c45.encode(a,[],this._m22.getType());try{this._m135.send(b)}catch(c){_m$cde5(_m$cde1("protocol::webrtc::Session::Send to channel failed, {0}",c.toString()))}},_m613:function(a){if(a){this._m830=this._m505=a.hardwarePlatform+"/"+a.clientModule+"-"+a.clientVersion}},_m278:function(){return(this._m135!=null)},close:function(){this._m135=null}});p2p$.ns("$n7");p2p$.$n7.$c15=p2p$.$n8.$c3._m41({_m558:null,_m317:null,_m120:false,_m29:null,_m240:0,_m22:null,_m842:null,_m165:0,_m920:0,_m150:null,_m251:null,_m170:null,_m306:null,iceOptions:null,sdpOptions:null,_m206:"",id_:"",_m177:false,init:function(a){this._m120=false;this._m29=null;this._m240=0;this._m22=a;this._m1110=this._m22._m1138();this._m206="";this._m150=this._m150||[];this._m170=this._m170||[];this.iceOptions=this.iceOptions||{optional:[]};this.sdpOptions=this.sdpOptions||{mandatory:{OfferToReceiveAudio:false,OfferToReceiveVideo:false}};this.id_="";this._m177=false},load:function(a){this.id_=this._m165=a.peerId},load2:function(c){for(var e=0;e<c.iceCandidates.length;e++){var d=c.iceCandidates[e];var b=d.candidate;if(b.indexOf("udp")!=-1){var a=b.split(" ");this._m638=a[4]||"0.0.0.0";this._m500=a[5]||"0";break}}if(!this._m842){if(c.selfInfo){this._m842=c.selfInfo}}this.id_=this._m165},connect:function(){if(this._m120){this._m206=this._m165+"-active";_m$cde5(_m$cde1("protocol::webrtc::Peer active Try to connect to remote peer({0})  ...",this._m165))}else{this._m206=this._m165+"-passive";_m$cde5(_m$cde1("protocol::webrtc::Peer passive Try to connect to remote peer({0})  ...",this._m165))}if(this._m120){var a=this._m22._m110()._m24()._m326;this._m707=[{url:a+"?transport=udp"}]}try{this._m558=new RTCPeerConnection({iceServers:this._m707},this.iceOptions);if(this._m120){this._m1174=this._m558}else{this._m1173=this._m558}this._m1090(this._m558);var b=this;if(this._m120){this._m1276=this._m317=this._m558.createDataChannel("peerChannel");this._m745(this._m317);this._m1174.createOffer(function(d){b._m1174.setLocalDescription(d);b._m251=d.sdp})}else{this._m558.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:this._m306}));if(this._m170){this._m627(this._m170)}this._m1173.createAnswer(function(d){b._m1173.setLocalDescription(d);b._m251=d.sdp})}this._m240=this._m17=p2p$.$n2.$c47._m9()}catch(c){_m$cde14(_m$cde1("protocol::webrtc::Peer::Open failed, exception: {0}",(c||"").toString()))}},_m1169:function(){},_m929:function(){if(this._m150.length<1){return}var a={action:"connectRequest",iceServers:this._m707,iceCandidates:this._m150,sdpDescriptions:this._m251,selfInfo:this._m1110};_m$cde14(_m$cde1("protocol::webrtc::Peer::sendConnectRequest ({0}) Send connect request ",this._m206));this.status=true;this._m22._m662({method:"proxyDataRequest",destPeerId:this._m165,data:JSON.stringify(a)})},_m884:function(){if(this.status||this._m150.length<1){return}var a={action:"connectResponse",iceCandidates:this._m150,sdpDescriptions:this._m251,selfInfo:this._m1110};_m$cde5(_m$cde1("protocol::webrtc::Peer::sendConnectResponse ({0}) Send connect response ",this._m206));this.status=true;this._m22._m662({method:"proxyDataRequest",destPeerId:this._m165,data:JSON.stringify(a)})},_m927:function(a){if(a.candidate){this._m150.push(a.candidate);_m$cde14(_m$cde1("protocol::webrtc::Peer::onPeerIceCandidate ({0}) Receive PeerIceCandidate:({1})",this._m206,a.candidate.candidate));if(!this._m177){}}else{if(this._m120){this._m929()}else{this._m884()}}},_m951:function(a){_m$cde14(_m$cde1("protocol::webrtc::Peer::onPeerDataChannel ({0}) Receive PeerDataChannel,channel name({1})",this._m206,a.channel.label));this._m317=a.channel;this._m745(a.channel)},_m1089:function(b,a){_m$cde5(_m$cde1("protocol::webrtc::Peer::onChannelOpen ({0}) Channel open success!!!!!!!!!!!!!!",this._m206));this._m177=true;this._m29=new p2p$.$n7.$c3(this._m22,this._m165,this._m317,this._m638,this._m500);this._m29._m613(this._m842);this._m22._m182()._m178(this._m29)},_m982:function(c,a){var d=new Uint8Array(a.data);if(d[0]===0&&d[1]===0&&d[2]===0&&d[3]===0){this.rData=new CdeByteArray();this.rData_len=d.length;this.rTotalData_len=(d[4]<<24)+(d[5]<<16)+(d[6]<<8)+d[7]}else{this.rData_len=this.rData_len+d.length}this.rData.writeBytes(d);if(this.rData_len>=this.rTotalData_len){this.rData_len=0;this.rTotalData_len=0;var b=p2p$.$n7.$c45.decode(this.rData.uInt8Array,this._m22.getType());this._m22._m182()._m260(this._m29,b)}else{}this._m17=p2p$.$n2.$c47._m9()},_m1130:function(a,b){_m$cde14(_m$cde1("protocol::webrtc::Peer::acceptAnswer ({0}) Accept answer ",this._m206));this._m170=a;this._m306=b;this._m558.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:b}));this._m627(a)},_m627:function(b){if(Object.prototype.toString.call(b)=="[object Array]"){for(var a=0;a<b.length;a++){this._m558.addIceCandidate(new RTCIceCandidate(typeof(b[a])!="string"?b[a]:{sdpMLineIndex:0,sdpMid:"data",candidate:b[a]}))}}else{this._m558.addIceCandidate(new RTCIceCandidate(b))}},_m1040:function(b,a){},_m1035:function(b,a){this._m177=false},_m602:function(a){this.status=false},_m1090:function(b){var a=this;b.onnegotiationneeded=function(){a._m1169()};b.onicecandidate=function(c){a._m927(c)};b.ondatachannel=function(c){a._m951(c)}},_m745:function(b){var a=this;b.onopen=function(c){a._m1089(b,c)};b.onmessage=function(c){a._m982(b,c)};b.onerror=function(c){a._m1040(b,c)};b.onclose=function(c){a._m1035(b,c)}},disconnect:function(){_m$cde14(_m$cde1("protocol::webrtc::Peer::disconnect ({0}) disconnect... ",this._m206));if(this._m317){this._m317.close();this._m317=null}if(this._m558){this._m558.close();this._m558=null}if(this._m29){this._m22._m602(this._m29);this._m29.close()}this._m29=null;this._m177=false},_m278:function(b,a){if(this._m177){if(!this._m29){return false}if(this._m29._m278()){return(this._m17+60*1000)>b}else{if(!this._m177){return false}}}return this._m17+a>b},clear:function(){this._m558=null;this.connectionId=0;this._m165=0;this._m920=0;this._m317=null;this._m707=null;this.iceOptions=null;this.sdpOptions=null;this._m150=null;this._m251=null;this._m170=null;this._m306=null;this.status=false}});p2p$.ns("$n7");p2p$.$n7.$c45={_m1300:[],encode:function(i,r,d){var m=[{sequence_4:0},{dataLength_4:0},{rangeCount_4:0},{rangeItems:[[{type_2:123},{start_8:234},{end_4:345}]]},{requestCount_4:0},{requestItems:[[{type_2:0},{start_8:1411033199},{cks_4:57473}]]},{responseCount_4:0},{responseItems:[[{type_2:0},{start_8:1411033199},{streamLength_4:57473},{stream_d:null}]]},{peerCount_4:1},{peerItems:[[{head_4:0},{URL_utf:"ws://202.103.4.52:34567/*****"}]]}];var c=[];var q;var h;for(var o=0;o<i._m212.length;o++){var s=i._m212[o];q=s._m253;h=s._m359;c.push([{type_2:s._m32},{start_8:q},{end_4:(h)}])}m[3].rangeItems=c;var j=[];for(var o=0;o<i._m52.length;o++){var s=i._m52[o];j.push([{type_2:s._m83},{start_8:s._m101},{cks_4:s._m131}])}m[5].requestItems=j;var g=[];for(var o=0;o<i._m128.length;o++){var s=i._m128[o];g.push([{type_2:s._m83},{start_8:s._m101},{streamLength_4:s._m90.length},{stream_d:s._m90}])}m[7].responseItems=g;var k=[];if(typeof r!="undefined"){for(var o=0;o<r.length;o++){var s=r[o];k.push([{head_4:o},{URL_utf:s}])}m[9].peerItems=k}m[2].rangeCount_4=m[3].rangeItems.length;m[4].requestCount_4=m[5].requestItems.length;m[6].responseCount_4=m[7].responseItems.length;m[8].peerCount_4=m[9].peerItems.length;for(var b=0;b<m[9].peerItems.length;b++){m[9].peerItems[b][0].head_4=m[9].peerItems[b][1].URL_utf.length}var e=[];if(d!=p2p$.$n8.PROTOCOL_TYPES._k2){m.splice(1,1)}this._m559(m,e);var f=0;for(var b=0;b<e.length;b++){f+=e[b].length}var l=new Uint8Array(f);var t=0;for(var b=0;b<e.length;b++){for(var a=0;a<e[b].length;a++){l[t++]=e[b][a]}}if(d==p2p$.$n8.PROTOCOL_TYPES._k2){var p=l.length;l[4]=(parseInt(p)>>24)&255;l[5]=(parseInt(p)>>16)&255;l[6]=(parseInt(p)>>8)&255;l[7]=parseInt(p)&255}return l},decode:function(p,e){var d=0;var t;var c;var l=new p2p$.$n8.$c38();d+=4;if(e==p2p$.$n8.PROTOCOL_TYPES._k2){d+=4}var v=p2p$.$n2.$c44._m73("4",p,d);d+=4;var o=null;if(v!==0){for(c=0;c<v;c++){t=p2p$.$n2.$c44._m73("2",p,d);d+=2;if(p2p$.$n2.META_PIECE_TYPE._k1===t){o=new p2p$.$n8.PieceRangeItem();o._m32=p2p$.$n2.META_PIECE_TYPE._k1}else{o=new p2p$.$n8.PieceRangeItem();o._m32=p2p$.$n2.META_PIECE_TYPE._k16}o._m253=-1;o._m359=0;var u=p2p$.$n2.$c44._m73("8",p,d);d+=8;var i=p2p$.$n2.$c44._m73("4",p,d);d+=4;o._m253=u;o._m359=i;l._m212.push(o)}}var b=p2p$.$n2.$c44._m73("4",p,d);d+=4;var q=null;for(c=0;c<b;c++){q=new p2p$.$n8.RequestDataItem();t=p2p$.$n2.$c44._m73("2",p,d);d+=2;var r=p2p$.$n2.$c44._m73("8",p,d);d+=8;var f=p2p$.$n2.$c44._m73("4",p,d);d+=4;q._m83=t;q._m101=r;q._m131=f;l._m52.push(q)}var a=p2p$.$n2.$c44._m73("4",p,d);d+=4;var s=null;for(c=0;c<a;c++){s=new p2p$.$n8.ResponseDataItem();t=p2p$.$n2.$c44._m73("2",p,d);d+=2;var j=p2p$.$n2.$c44._m73("8",p,d);d+=8;var m=p2p$.$n2.$c44._m73("4",p,d);d+=4;var n=p2p$.$n2.$c44._m73("d",p,d,m);d+=m;s._m83=t;s._m101=j;s._m90=n;l._m128.push(s)}var g=p2p$.$n2.$c44._m73("4",p,d);d+=4;var h=[];for(c=0;c<g;c++){var w=p2p$.$n2.$c44._m73("4",p,d);d+=4;var k=p2p$.$n2.$c44._m73("utf",p,d,w);d+=w;h.push(k)}return l},_m559:function(e,d){switch(typeof(e)){case"array":for(var c=0;c<e.length;c++){if(e[c] instanceof Array){this._m559(e[c],d)}else{if(typeof(e[c])=="object"){this._m559(e[c],d)}}}break;case"object":for(var b in e){var a=b.split("_")[1];if(a){p2p$.$n2.$c44._m1116(a,e[b],d)}if(!a&&e[b]){this._m559(e[b],d)}}break;default:break}}};p2p$.ns("$n11");p2p$.$n11.$c3=p2p$.$n8.$c3._m41({init:function(d,b,a,c){this._super(d,b);this._m638=a;this._m500=c;this._m1147=false;this._m209=p2p$.$n2.$c46.format("{0}:{1}",this._m638,this._m500);this.openHashhand=false},send:function(a){var b=p2p$.$n7.$c45.encode(a,[],this._m22.getType());this.websocket.send(new Blob([b]))},open:function(){if(this._m1147){return true}var c=this._m22;var a=c._m1030();var b=this;this.uir="ws://"+this._m638+":"+this._m500+"/mtep-exchange-connection?"+a;try{this.websocket=new WebSocket(this.uir)}catch(d){_m$cde5(_m$cde1("protocol.webrtc.Session::open failed, exception: {0}",d));return false}this.websocket.onopen=function(e){c._m367(e,b)};this.websocket.onclose=function(e){c._m185(e,b)};this.websocket.onmessage=function(e){c._m291(e,b)};this.websocket.onerror=function(e){c._m185(e,b)};return true},close:function(){this.websocket=null},_m278:function(){if(this._m1147){return false}else{return this.websocket}},_m613:function(b){if(!b){return}var d="";var c="";var a="";if(b.hasOwnProperty("x-mtep-client-id")){_m972=b["x-mtep-client-id"]}else{if(b.hasOwnProperty("xMtepClientId")){_m972=b.xMtepClientId}}if(b.hasOwnProperty("x-mtep-hardware-platform")){d=b["x-mtep-hardware-platform"]}else{if(b.hasOwnProperty("xMtepHardwarePlatform")){d=b.xMtepHardwarePlatform}}if(b.hasOwnProperty("x-mtep-client-module")){c=b["x-mtep-client-module"]}else{if(b.hasOwnProperty("xMtepClientModule")){c=b.xMtepClientModule}}if(b.hasOwnProperty("x-mtep-client-version")){a=b["x-mtep-client-version"]}else{if(b.hasOwnProperty("xMtepClientVersion")){a=b.xMtepClientVersion}}this._m830=this._m505=d+"/"+c+"-"+a;if(b.hasOwnProperty("x-mtep-business-params")){businessParamString=b["x-mtep-business-params"]}else{if(b.hasOwnProperty("xMtepBusinessParams")){businessParamString=b.xMtepBusinessParams}}}});p2p$.ns("$n11");p2p$.$n11.$c15Static={_m1219:0};p2p$.$n11.$c15=p2p$.$n8.$c3._m41({_m181:0,_m1177:0,_m139:0,id_:"",_m415:"",_m1004:"",_m277:0,_m761:0,_m120:false,_m961:0,_m17:0,_m240:0,_m1103:0,_m974:0,_m1017:false,_m806:0,_m333:0,_m462:0,_m1167:0,_m177:false,init:function(a){this._m181=0;this._m1177=0;this._m139=0;this._m277=0;this._m761=0;this._m961=0;this._m17=0;this._m240=0;this._m1103=0;this._m974=0;this._m806=0;this._m333=0;this._m462=0;this._m1167=Math.floor(Math.random()*(1000+1));this._m1017=false;this._m177=false;this._m120=false},load:function(a){this._m961=p2p$.$n2.$c47._m9();this.id_=a.peerid;this._m181=a.protocol;this._m1177=a.weight;this._m139=a.termid;this._m415=a.userip;this._m277=a.pport;this._m1004=a.inip;this._m761=a.inport},_m1282:function(a){var b=new p2p$.$n1.$c58;b._m108(a);this._m961=p2p$.$n2.$c47._m9();this.id_=p2p$.$n2.$c46._m1064(b._m7.get("peerId"));this._m139=p2p$.$n2.$c46._m94(b._m7.get("terminalType"),0);this._m415=b._m201;this._m277=b._m161;this._m1004=b._m7.get("inIp");this._m761=p2p$.$n2.$c46._m94(b._m7.get("inPort"),0)},_m1281:function(){return p2p$.$n2.$c46.format("ws://{0}:{1}/mtep-exchange-connection?inIp={2}&inPort={3}&peerId={4}",this._m415,this._m277,this._m1004,this._m761,id_)},attach:function(b,a){},connect:function(a,b){_m$cde14(_m$cde1("protocol::websocket::Peer Try to connect to({0}), {1}:{2} ...",this.id_,this._m415,this._m277));this._m177=true;this._m333++;this._m240=this._m17=p2p$.$n2.$c47._m9();this._m29=new p2p$.$n11.$c3(a,this.id_,this._m415,this._m277);return this._m29.open()},disconnect:function(){this._m177=false;if(this._m29!=null){this._m462++;this._m29.close()}this._m29=null;return true},_m278:function(b,a){if(this._m177){if(this._m29==null){return false}if(this._m29._m278()){return(this._m17+60*1000)>b}else{if(!this._m177){return false}}}return this._m17+a>b}});p2p$.ns("$n11");p2p$.$n11.$c1Static={_k21:1,_k9:2,_k26:3};p2p$.$n11.$c1=p2p$.$n8.$c1._m41({_m77:null,_m53:null,_m1146:"",_m827:"",_m1180:"",_m78:false,_m844:false,_m1068:false,_m17:0,_m915:0,_m104:0,_m417:0,_m573:false,_m545:false,_m60:0,_m305:0,_m770:0,_m882:0,_m402:0,_m1015:0,_m1010:0,init:function(b,a){this._super(b,a,p2p$.$n8.PROTOCOL_TYPES._k3);this._m53=new p2p$.$n2.$c60();this._m402=30;this._m770=1443;this._m882=0;this._m1015=0;this._m1010=0;this._m17=0;this._m573=true;this._m545=false;this._m844=false;this._m1068=false;this._m60=0;this._m305=0;this._m417=0;this._m104=10*1000;this._m77=null},open:function(){this.close();this._m78=true;this._m17=p2p$.$n2.$c47._m9();this.id_=p2p$.$n2.$c46.format("{0}{1}{2}{3}",Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),Math.floor(Math.random()*(1000+1)),p2p$.$n2.$c47._m9());if(this._m56._m24()._m199>0){this._m402=this._m56._m24()._m199}this._m56._m24()._m675=this.id_;this._m136=this._m228(p2p$.$n11.$c1Static._k9,this._m136,5000);this._m749();return true},close:function(){this._m78=false;if(this._m664){clearTimeout(this._m664);this._m664=null}if(this._m136){clearTimeout(this._m136);this._m136=null}if(this._m77!=null){this._m77=null}for(var c=0;c<this._m53.length;c++){var a=this._m53.element(c);var b=a.value;b.disconnect()}this._m53.clear()},_m1030:function(){return"xMtepClientId="+this.id_+"&xMtepClientModule=h5&xMtepClientVersion="+p2p$.$n2.$c46.format("{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14)+"&xMtepProtocolVersion=1.0&xMtepBusinessParams="+encodeURIComponent("playType="+this._m56._m24()._m456+"&p2pGroupId="+this._m56._m33()._m62)+"&xMtepOsPlatform="+encodeURIComponent(this._m56._m24()._m332)+"&xMtepHardwarePlatform=pc"},_m749:function(){if(this._m77!=null){this._m77.log("cancel");this._m77.close();this._m77=null}this._m17=p2p$.$n2.$c47._m9();var b=this._m56._m24();var d="3";if(this._m60>=this._m56._m24()._m323){d="1"}var a=new p2p$.$n1.$c58();a._m181="http";a._m201=this._m56._m24()._m246;a._m429="/cde";a._m7.set("termid","2");a._m7.set("format","1");a._m7.set("ver",b._m456+"."+b._m213);a._m7.set("op",d);a._m7.set("ckey",this._m56._m33()._m62);a._m7.set("outip","0.0.0.0");a._m7.set("inip","0.0.0.0");a._m7.set("pid",p2p$.$n2.$c46.format("33-{0}-0-0",this.id_));a._m7.set("pos",p2p$.$n2.$c46.fromNumber(this._m56._m24()._m370));a._m7.set("ispId",p2p$.$n2.$c46.fromNumber(b._m1141));a._m7.set("neighbors",p2p$.$n2.$c46.fromNumber(this._m60));a._m7.set("arealevel1",b._m648);a._m7.set("arealevel2",p2p$.$n2.$c46.fromNumber(b._m715));a._m7.set("arealevel3",p2p$.$n2.$c46.fromNumber(b._m1072));a._m7.set("expect",p2p$.$n2.$c46.fromNumber(this._m56._m24()._m323*2));var c=a.toString();this._m417=p2p$.$n2.$c47._m9();this._m664=this._m228(p2p$.$n11.$c1Static._k21,this._m664,this._m402*1000);this._m77=new p2p$.$n1.$c7(c,this,"GET","json","websocket::tracker");this._m77.load()},_m106:function(a){var b=false;if(!this._m78||this._m77!=a){_m$cde5(_m$cde1("protocol::websocket::Manager Expired http complete for tag({0}), channel({1}), ignore",a._m294,this._m56._m33()._m75));return b}this._m77=null;_m$cde5(_m$cde1("protocol::websocket::Manager Http complete for tag({0}), channel({1}), response code({2}), details({3}), size({4})",a._m294,this._m56._m33()._m75,a._m40,a._m468,a._m190));if(a._m294=="websocket::tracker"){b=true;this._m17=p2p$.$n2.$c47._m9();if(!a._m107||a._m40<200||a._m40>=300){return b}if(this._m56._m24()._m85<=0){this._m56._m24()._m85=this._m17-this._m417}this._m881(a)}return b},_m881:function(c){var i=0;var j=0;var m=c._m35;if(m==""||m==null){return false}if(!c._m35==""){this._m305=m.status;if(this._m305!=200){_m$cde15(_m$cde1("protocol::websocket::Manager Tracker response status({0}), not 200, channel({1})",this._m305,this._m56._m33()._m75));return false}this._m827=m.host||"";var l=m.peerlist||[];for(var h=0;h<l.length;h++){var e=l[h];var k=e.peerid;var g=e.userip;var b=e.pport;if(b==this._m770&&g==this._m1146){continue}else{if(g=="127.0.0.1"||g=="0.0.0.0"||g=="255.255.255.255"){continue}}k=p2p$.$n2.$c46._m1029(k);var d=this._m53.find(k);var f;if(!d){if(this._m53.size()>=this._m180*2){break}f=new p2p$.$n11.$c15(this);this._m53.set(k,f);j++;f._m120=true}else{f=this._m53.get(k)}if(f!=null){f._m120=true;f.load(e)}}i=l.length;this._m56._m24()._m105=this._m53.length}var a=false;if(this._m573&&!this._m545){a=true;this._m545=true;this._m915=p2p$.$n2.$c47._m9();this._m99._m593(this,0)}if(j>0){this._m322()}_m$cde5(_m$cde1("protocol::websocket::Manager {0} tracker successfully, self internet ip({1}), load {2} peer(s), {3} peer(s) now, channel({4})",(a?"Register to":"Query peer from"),this._m827,i,this._m53.length,this._m56._m33()._m75))},_m322:function(){var e=p2p$.$n2.$c47._m9();var d=0;for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(!c._m278(e,this._m104)&&(c._m333>5||c._m462>3||!c._m120)){if(c._m29!=null){this._m56._m24()._m105=this._m53.size();this._m99._m286(c._m29)}c.disconnect();this._m53.erase(b.key);f--;d++}}this._m60=0;for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(c._m29==null){continue}if(!c._m278(e,this._m104)){this._m56._m24()._m105=this._m53.size();this._m99._m286(c._m29);c.disconnect();d++}else{this._m60++}}if(this._m60>=this._m180){return}var a=[];for(var f=0;f<this._m53.length;f++){var b=this._m53.element(f);var c=b.value;if(c._m278(e,this._m104)){continue}if(!c._m120){continue}else{if(c._m240+60*1000>e){continue}}a.push(c)}for(var f=0;f<a.length;f++){var c=a[f];if(!c.connect(this)){continue}this._m60++;if(this._m60>=this._m180){break}}},_m298:function(a,c,b){switch(a){case p2p$.$n11.$c1Static._k21:this._m995();break;case p2p$.$n11.$c1Static._k9:this._m579();break;case p2p$.$n11.$c1Static._k26:this.onAsyncPeersTimeout();break;default:break}},_m995:function(){if(this._m77!=null){this._m77.log("timeout");this._m77=null}if(!this._m78){return}this._m749()},_m579:function(){this._m322();this._m136=this._m228(p2p$.$n11.$c1Static._k9,this._m136,5000)},_m367:function(a,b){this.status=true},_m291:function(d,g){if(!this._m78){return false}if(!this.status){return}for(var h=0;h<this._m53.length;h++){var c=this._m53.element(h);var f=c.value;var b=this;if(g==f._m29){_m$cde14(_m$cde1("protocol::websocket::Manager Active session({0}, {1}:{2}) message arrive",f.id_,f._m415,f._m277));f._m17=p2p$.$n2.$c47._m9();var e=d.data;switch(typeof(e)){case"string":if(false===g.openHashhand){g.openHashhand=true;g._m613(JSON.parse(e));this._m99._m178(g)}break;case"object":var a=new FileReader();a.onload=function(){var i=p2p$.$n7.$c45.decode(new Uint8Array(this.result),b.getType());b._m182()._m260(g,i)};a.readAsArrayBuffer(e);break}}}},_m185:function(a,d){if(!this._m78){return false}for(var e=0;e<this._m53.length;e++){var b=this._m53.element(e);var c=b.value;if(d==c._m29){_m$cde14(_m$cde1("protocol::websocket::Manager Session({0}, {1}:{2}) closed",c.id_,c._m415,c._m277));this._m56._m24()._m105=this._m53.size();this._m99._m286(d);c.disconnect();break}}return true}});p2p$.ns("$n6");p2p$.$n6.VIDEO_STATUS={loadstart:"loadstart",loadeddata:"loadeddata",canplay:"canplay",seeking:"seeking",seeked:"seeked",breakstart:"breakstart",breakend:"breakend",replay:"replay"};p2p$.$n6.PLAY_STATES={status:"IDE",IDE:"IDE",PLAY:"PLAY",PLAYING:"PLAYING",PAUSE:"PAUSE",RESUME:"RESUME",SEEKING:"SEEKING",SEEKED:"SEEKED",VideoEvents:["abort","canplay","canplaythrough","durationchange","emptied","empty","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"]};p2p$.$n6.$c4=_m$cde18._m41({_m820:false,_m499:0,_m404:null,_m609:null,_m88:null,_m59:0,_m210:"PLAY",_m698:null,_m146:0,_m20:"",_m458:-1,init:function(){this._m456=-1;this._m820=false;this._m499=-1;this._m404=null;this._m609=null;this._m88=null;this._m59=0;this._m210="PLAY";this._m698=[];this._m146=0;this._m20="";this._m458=-1}});p2p$.ns("$n6");p2p$.$n6.$c37=_m$cde18._m41({_m135:null,_m92:null,_m42:"",_m19:null,_m629:null,_m61:null,init:function(){this._m135=null;this._m92=null;this._m42="";this._m19=null;this._m629=null},_m144:function(d,a,b,c){this._m61=d;this._m42=a;this._m19=b;this._m629=c},_m1266:function(a){this._m42=a;this._m92.stop();this._m92=null},_m604:function(){this._m135=this._m629._m1140(this._m42);if(this._m135!=null){_m$cde5(_m$cde1("core::player::Creator::Create player open channel({0}) success",this._m42));if(this._m135._m32==p2p$.$n2.META_DATA_TYPE._k6){this._m92=new p2p$.$n6.$c29(this._m61);if(this._m61._m100){this._m135._m996(this._m61._m100)}}else{this._m92=new p2p$.$n6.$c21(this._m61)}if(this._m92!=null){this._m92._m144(this._m42,this._m19,this._m629,this._m135);if(this._m92._m4._m499==p2p$.$n2.META_DATA_TYPE._k6){if(this._m61._m100){this._m92._m43=this._m92._k62;this._m92._m166=this._m61._m100}}}else{_m$cde15(_m$cde1("core::player::Creator.Create player failed"))}}else{_m$cde15(_m$cde1("core::player::Creator::Create player open channel({0}) failed",this._m42))}return this._m92}});p2p$.ns("$n6");p2p$.$n6.$c22=_m$cde18._m41({_m629:null,_m61:null,_m42:"",_m38:null,_m361:false,_m1055:500,_m135:null,_m19:null,_m189:null,_m21:null,_m598:true,_m711:null,_m611:null,_m826:0,_m412:null,_m3:null,_m63:0,_m4:null,_m216:0,_m389:"",_m502:0,_m439:0,_m54:false,_m439:0,_m416:false,_m689:0,init:function(a){this._m61=a;this._m629=null;this._m42="";this._m38=null;this._m361=false;this._m135=null;this._m189=[];this._m21=null;this._m19=null;this._m611=new p2p$.$n3.$c19();this._m826=0;this._m412=null;this._m3=null;this._m63=0;this._m4=new p2p$.$n6.$c4();this._m216=0;this._m389=-1;this._m598=true;this._m54=false;this._m416=false;this._m356=0;this._m421=0;this._m689=3},_m1059:function(){if(this._m412){clearInterval(this._m412);this._m412=null}},_m144:function(b,d,e,c){this._m135=c;this._m42=b;this._m629=e;this._m19=d;this._m416=true;this._m361=false;var a=p2p$.$n1.$c23._m496();if(a.mediasource){if(a.ts){this._m54=true}else{if(a.mp4){this._m4._m820=true}}}this._m1061(this._m19);this._m706();return true},_m706:function(){this._m1081();if(this._m412){clearInterval(this._m412)}this._m412=setInterval(this._m1081.bind(this),this._m1055)},play:function(){if(!this._m19){return}if(this._m19.paused){this._m19.play()}return},_m1081:function(){if(!this._m3){this._m33()}else{if(this._m416){this._m1170();this._m654()}}},_m33:function(){if((this._m135._m3&&this._m135._m3._m62)||(this._m135._m3&&this._m135._m914==302)){this._m3=this._m135._m3;this._m137=this._m3._m137;this._m153=this._m3._m153}},_m1170:function(){if(this._m189.length>=1){return}if(this._m43!=undefined&&this._m43==this._k62){this._m43=this._k15;var b=this._m656(this._m166);if(b){this._m63=b.id_;this._m64=this._m166}else{}}var f=this._m1111(this._m63);if(!f){return}this._m634(f.id_);var e=this._m629._m991(this._m135._m793(),f.id_,this._m356);if(!e||!e.stream){var d=new Date().getTime();if(!this._m524||(this._m524+5000)<d){this._m524=d;_m$cde5(_m$cde1("core::player::BasePlayer::vtime({0}) getSegment({1}) stream({2})",this._m19?this._m19.currentTime.toFixed(2):0,this._m63,(e.stream!=null)))}return null}this._m389=f.id_;this._m63=f._m970;var c=p2p$.$n2.$c47._m9();_m$cde14(_m$cde1("core::player::BasePlayer::Start change to mp4"));var g=this._m611._m931(e.stream,{start:f._m39/1000,duration:f._m50,type:0,width:f._m153||960,height:f._m137||400},this._m826,this._m4._m820);f._m142=this._m611._m39;this._m4._m404=this._m611._m807();this._m4._m609=this._m611._m841();this._m826++;var a=p2p$.$n2.$c47._m9();_m$cde5(_m$cde1("core::player::BasePlayer turn to mp4, segmentid({0}), before({1}), after({2}),timeuse({3}),playtime({4})",f.id_,e.stream.length,g.length,((a-c)/1000).toFixed(1),this._m19?this._m19.currentTime.toFixed(2):0));this._m189.push({data:g,block:f,mime:this._m676(this._m4._m404,this._m4._m609)})},_m656:function(b){var a=null;if(this._m3){for(var c=0;c<this._m3._m6.length;c++){a=this._m3._m6[c];if(a._m39<=b*1000&&b*1000<a._m39+a._m50){return a}}}return null},_m654:function(){},_m310:function(){},_m1056:function(f){var a=false;for(var d=0;d<this._m4._m698.length;d++){var e=this._m4._m698[d][0];var c=this._m4._m698[d][1];if(f>=e&&f<=c){a=true;break}}return a},_m721:function(){var b=null;try{b=new MediaSource();this._m542=this._m952.bind(this);this._m522=this._m924.bind(this);this._m495=this._m903.bind(this);this._m520=this._m923.bind(this);b.addEventListener("sourceopen",this._m542);b.addEventListener("sourceended",this._m522);b.addEventListener("sourceclose",this._m495);b.addEventListener("error",this._m520);this._m416=true}catch(a){_m$cde15(_m$cde1("core::player::BasePlayer::Add media source failed: {0}",(a||"").toString()))}return b},_m1194:function(){if(!this._m38){return}try{if(this._m21){this._m21.abort();this._m38.removeSourceBuffer(this._m21);this._m682(this._m21);this._m21=null}}catch(a){_m$cde15(_m$cde1("core::player::BasePlayer::remove sourcebuffer failed: {0}",(a||"").toString()))}},_m341:function(){this._m361=false;if(!this._m38){return}try{if(this._m21){this._m21.abort();this._m38.removeSourceBuffer(this._m21);this._m682(this._m21);this._m21=null}this._m38.endOfStream();this._m38.removeEventListener("sourceopen",this._m542);this._m38.removeEventListener("sourceended",this._m522);this._m38.removeEventListener("sourceclose",this._m495);this._m38.removeEventListener("error",this._m520);this._m38=null}catch(a){_m$cde15(_m$cde1("core::player::BasePlayer::Clear media source failed: {0}",(a||"").toString()))}},_m676:function(c,b){var a='video/mp2t; codecs="avc1.64001f"';if(c){if(this._m4._m820){a='video/mp4; codecs="'+c+", "+b+'"'}else{a='video/mp2t; codecs="'+c+", "+b+'"'}}return a},_m632:function(){var b=false;var a=this._m676(this._m4._m404,this._m4._m609);var d=this._m611._m765();if(this._m38&&!this._m21){try{if(this._m38.sourceBuffers.length>0){return true}_m$cde5(_m$cde1("core::player::BasePlayer::Add media source header, type: {0}, medias: {1}",a,d));this._m21=this._m38.addSourceBuffer(a);this._m598=true;this._m711=a;this._m1025(this._m21);b=true}catch(c){_m$cde15(_m$cde1("core::player::BasePlayer::Add media source header, type: {0}, medias: {1}, error: {2}",a,d,c.toString()));this._m341();b=false}}return b},_m952:function(a){if(!this._m38||this._m38!=a.target){return}_m$cde5(_m$cde1("core::player::BasePlayer::onMediaSource open, {0} arguments",arguments.length));if(this._m4._m499==p2p$.$n2.META_DATA_TYPE._k6){this._m38.duration=this._m135._m3._m208/1000}this._m361=true;this._m632();this._m654()},_m924:function(a){if(!this._m38||this._m38!=a.target){return}_m$cde5(_m$cde1("core::player::BasePlayer::onMediaSource end, {0} arguments,({1}),({2})",arguments.length,arguments[1],arguments[2]))},_m903:function(a){if(!this._m38||this._m38!=a.target){return}_m$cde5(_m$cde1("core::player::BasePlayer::onMediaSource close, {0} arguments",arguments.length));this._m416=false;this._m361=false},_m923:function(a){if(!this._m38||this._m38!=a.target){return}_m$cde15(_m$cde1("core::player::BasePlayer::onMediaSource error, {0} arguments",arguments.length));this._m416=false;this._m361=false},_m1131:function(){var a=this._m38.sourceBuffers;this._m722=this._m871.bind(this);this._m796=this._m955.bind(this);a.addEventListener("removesourcebuffer",this._m722);a.addEventListener("addsourcebuffer",this._m796)},_m871:function(){this._m1182=true;_m$cde5(_m$cde1("core::player::BasePlayer::removesourcebuffer..."))},_m955:function(){_m$cde5(_m$cde1("core::player::BasePlayer::onAddSourceBuffer..."))},_m1025:function(a){try{this._m548=this._m968.bind(this);this._m633=this._m1057.bind(this);this._m494=this._m886.bind(this);this._m492=this._m905.bind(this);a.addEventListener("updateend",this._m548);a.addEventListener("update",this._m633);a.addEventListener("updatestart",this._m494);a.addEventListener("error",this._m492)}catch(b){_m$cde15(_m$cde1("core::player::BasePlayer::Add source event failed: {0}",(b||"").toString()))}},_m682:function(b){try{var a=this;b.removeEventListener("updateend",this._m548);b.removeEventListener("update",this._m633);b.removeEventListener("updatestart",this._m494);b.removeEventListener("error",this._m492)}catch(c){_m$cde15(_m$cde1("core::player::BasePlayer::Remove source event failed: {0}",(c||"").toString()))}},_m886:function(a){if(!this._m21||this._m21!=a.target){return}_m$cde14(_m$cde1("core::player::BasePlayer::Source update start"));this._m598=false},_m1057:function(a){if(!this._m21||this._m21!=a.target){return}_m$cde14(_m$cde1("core::player::BasePlayer::Source updated"))},_m968:function(a){if(!this._m21||this._m21!=a.target){return}this._m598=true;if(this._m43!=undefined&&this._m43==this._k15){this._m19.currentTime=this._m64;this._m43=this._k10}try{this._m4._m88=this._m21.buffered}catch(c){_m$cde15(_m$cde1("core::player::BasePlayer buffered error ({0})",c))}var d=this._m19.currentTime;if(this._m4._m88&&this._m4._m88.length>0){for(var b=0;b<this._m4._m88.length;b++){_m$cde5(_m$cde1("core::player::BasePlayer::Source update finished, idx({0}), time({1}), range({2}, {3})",b,(d||0).toFixed(3),this._m4._m88.start(b),this._m4._m88.end(b)))}}},_m905:function(a){if(!this._m21||this._m21!=a.target){return}_m$cde15(_m$cde1("core::player::BasePlayer::Source update error:{0}",arguments.length))},_m1061:function(c){var b=p2p$.$n6.PLAY_STATES.VideoEvents;this._m530=this._m374.bind(this);for(var a=0;a<b.length;a++){try{c.addEventListener(b[a],this._m530)}catch(d){_m$cde15(_m$cde1("core::player::BasePlayer::Add video event({0}) failed: {1}",b[a],(d||"").toString()))}}},_m959:function(c){var b=p2p$.$n6.PLAY_STATES.VideoEvents;for(var a=0;a<b.length;a++){try{c.removeEventListener(b[a],this._m530)}catch(d){_m$cde15(_m$cde1("core::player::BasePlayer::Remove video event({0}) failed: {1}",b[a],(d||"").toString()))}}},_m374:function(a){if(!this._m19||this._m19!=a.target){return}var c=this._m19.currentTime?this._m19.currentTime.toFixed(1):0;var b=a.type;_m$cde14(_m$cde1("core::player::BasePlayer::Video status handler, type({0}),time({1})",b,c));switch(b){case"abort":break;case"canplay":this._m405();break;case"canplaythrough":this._m585();break;case"durationchange":break;case"emptied":break;case"ended":break;case"error":this._m792();break;case"loadeddata":this._m724();break;case"loadedmetadata":this._m846();break;case"loadstart":this._m1189();break;case"pause":this._m1125();break;case"play":this._m1143();break;case"playing":this._m663();break;case"progress":this._m789();break;case"ratechange":break;case"seeked":this._m450();break;case"seeking":this._m408();break;case"stalled":break;case"suspend":break;case"timeupdate":this._m314();break;case"volumechange":break;case"waiting":this._m1053();break;default:break}},_m789:function(){},_m1189:function(){_m$cde5(_m$cde1("core::player::BasePlayer::Video loaded start"));if(this._m61.onbufferstart){_m$cde5(_m$cde1("core::player::BasePlayer::Video event onloadStart bufferstart"));this._m61.onbufferstart()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.loadstart},_m724:function(){},_m846:function(){this._m439=this._m19.duration?this._m19.duration.toFixed(1):0;_m$cde14(_m$cde1("core::player::BasePlayer::Video loaded meta data, duration({0})",this._m439))},_m314:function(){this._m421=0;if(this._m61.ontimeupdate){this._m61.ontimeupdate()}},_m408:function(){},_m450:function(){},_m1125:function(){if(this._m61.onpause){this._m61.onpause()}},_m1143:function(){if(this._m61.onplay){this._m61.onplay()}},_m1053:function(){},_m405:function(){},_m585:function(){},_m663:function(){},_m148:function(){if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.loadstart){_m$cde5(_m$cde1("core::player::BasePlayer::Video can play"));this._m4._m20=p2p$.$n6.VIDEO_STATUS.canplay;if(this._m61.onbufferend){_m$cde5(_m$cde1("core::player::BasePlayer::Video event onVideoCanPlay bufferend"));this._m61.onbufferend()}if(this._m61.onprepared){_m$cde5(_m$cde1("core::player::BasePlayer::Video event onVideoCanPlay onprepared"));this._m61.onprepared()}}},_m892:function(){var a=this._m19.currentTime?this._m19.currentTime.toFixed(1):0;this._m19.pause();_m$cde5(_m$cde1("core::player::BasePlayer::Video ended, time({0})",a));if(this._m61.oncomplete){this._m61.oncomplete()}},_m792:function(){var b=this._m19.currentTime?this._m19.currentTime.toFixed(1):0;var a=-100;if(this._m19&&this._m19.error){a=this._m19.error.code}this._m416=false;_m$cde5(_m$cde1("core::player::BasePlayer::Video error, play time({0}), time({1}), code({2})",this._m4._m146,b,a));if(this._m421<this._m689){return}if(this._m61.onerror){this._m61.onerror(a)}},stop:function(){this._m416=false;this._m1059();this._m341();if(this._m19){this._m19.pause();this._m959(this._m19)}this._m189=[];this._m611=new p2p$.$n3.$c19();this._m826=0;this._m3=null;this._m63=0;this._m216=0;this._m389=-1;this._m4=new p2p$.$n6.$c4();this._m502=0},pause:function(){if(this._m19){this._m19.pause()}},replay:function(){},seek:function(a){},getCurrentPosition:function(){if(this._m19){if(this._m54){if(this._m4._m210!=p2p$.$n6.PLAY_STATES.PLAY){return this._m64}}return this._m19.currentTime}return null},getDuration:function(){if(this._m19){return this._m19.duration.toFixed(1)}return null}});p2p$.ns("$n6");p2p$.$n6.$c29=p2p$.$n6.$c22._m41({_k41:-1,_k62:0,_k15:1,_k10:2,_k28:3,_m397:false,_m43:-1,_m166:0,_m133:false,_m586:false,_m173:null,init:function(a){this._super(a);this._m397=false;this._m43=-1;this._m166=0;this._m133=false;this._m586=false;this._m4._m499=p2p$.$n2.META_DATA_TYPE._k6},play:function(){if(!this._m19){return}if(this._m19.paused){this._m19.play()}if(!this._m54||this._m19.currentTime>0.1){return}this._m133=true;this._m19.currentTime=0.1;return},_m1111:function(c){if(this._m3){if(!this._m586){for(var d=0;d<this._m3._m6.length-1;d++){var b=this._m3._m6[d];var a=this._m3._m6[d+1];b._m970=a.id_;if(d==this._m3._m6.length-2){a._m970=-1}this._m586=true}}for(var d=0;d<this._m3._m6.length;d++){var b=this._m3._m6[d];if(b.id_==c){return b}}}else{_m$cde15(_m$cde1("core::player::VodPlayer::Meta data is null"));return null}},_m634:function(a){this._m356=a},_m654:function(){if(!this._m4._m404){return}if(!this._m38){_m$cde14(_m$cde1("core::player::VodPlayer::Create media source ..."));this._m21=null;this._m38=this._m721();this._m19.src=window.URL.createObjectURL(this._m38);if(this._m43!=this._k15){}}if(!this._m21){this._m409++;if(this._m409>500){_m$cde15(_m$cde1("core::player::VodPlayer::Play segment with delay count({0})",this._m409))}return}if(this._m21.updating){return}var b=this._m19.currentTime.toFixed(1);var a=this._m19.duration-this._m19.currentTime;if(this._m4._m458==b&&!this._m19.paused&&!this._m19.ended&&Math.abs(a)>5){this._m502++;if(this._m502>4){if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.canplay||this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeked||this._m4._m20==p2p$.$n6.VIDEO_STATUS.breakend){if(this._m61.onbufferstart){_m$cde5(_m$cde1("core::player::VodPlayer::Breakstart onbufferend current({0}), status({1})",this._m19.currentTime.toFixed(1),this._m4._m20));this._m61.onbufferstart()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.breakstart}}_m$cde5(_m$cde1("core::player::VodPlayer break {0} times, current {1}, status({2}) ...",this._m502,b,this._m4._m20))}if(this._m4._m458!=b&&!this._m19.paused){if(this._m502>4){if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.breakstart){if(this._m61.onbufferend){_m$cde5(_m$cde1("core::player::VodPlayer::Breakend onbufferend current({0}), status({1})",this._m19.currentTime.toFixed(1),this._m4._m20));this._m61.onbufferend()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.breakend}}this._m502=0;this._m4._m458=b}if(this._m4._m210==p2p$.$n6.PLAY_STATES.SEEKING&&this._m1056(this._m64)){this._m4._m210=p2p$.$n6.PLAY_STATES.SEEKED;_m$cde5(_m$cde1("core::player::VodPlayer::Play exist time({0}), state({1})",this._m64,this._m4._m210))}if(this._m4._m210==p2p$.$n6.PLAY_STATES.SEEKED){if(this._m54){_m$cde14(_m$cde1("core::player::VodPlayer::Play segment firstSeekStatus={0} _m64({1})=_m166=({2})={3}",this._m43,this._m64,this._m166,(this._m64==this._m166)));do{if(this._m43==this._k28){this._m43=this._k41;if(this._m64==this._m166){break}}this._m133=true;this._m19.currentTime=this._m64;_m$cde14(_m$cde1("core::player::VodPlayer::Play segment video current time == pre seek time"))}while(0)}this._m4._m210=p2p$.$n6.PLAY_STATES.PLAY;_m$cde14(_m$cde1("core::player::VodPlayer::playSegment existTime({0}) playState({1})",this._m64,this._m4._m210))}this._m310();if(this._m189.length>0&&this._m598&&this._m4._m59<3){var c=this._m189[0];this._m189.shift();if(c.block._m344==0&&!this._m397){this._m163=true;this._m397=true}this._m21.appendBuffer(c.data);this._m173=c.block;_m$cde5(_m$cde1("core::player::VodPlayer::Add data success ,buffer({0}),block({1}s), segment({2}), start time ({3}),  timestamp({4}),segment length ({5})",this._m4._m59.toFixed(2),c.block._m50/1000,c.block.id_,c.block._m39/1000,c.block._m142,c.data.length));if(this._m4._m210==p2p$.$n6.PLAY_STATES.SEEKING){if(this._m54){this._m19.pause()}}}},_m310:function(){if(!this._m19){return}var e=0;var d=0;if(this._m4._m210!=p2p$.$n6.PLAY_STATES.PLAY){this._m216=this._m64}else{this._m216=this._m19.currentTime}this._m4._m59=0;if(this._m4._m88){this._m4._m698=[];for(var b=0;b<this._m4._m88.length;b++){var c=this._m4._m88.start(b);var a=this._m4._m88.end(b);this._m4._m698.push([c,a])}for(var b=0;b<this._m4._m88.length;b++){e=this._m4._m88.start(b);d=this._m4._m88.end(b);if(this._m19.currentTime<1&&this._m163){this._m4._m59=4;if(this._m54){this._m397=true;this._m163=false;break}if(this._m433){this._m19.currentTime=e;this._m433=null}}else{if(e>this._m216){this._m4._m59+=(d-e)}else{if(e<=this._m216&&d>=this._m216){this._m4._m59=(d-this._m216)}}}}}_m$cde14(_m$cde1("core::player::vod::Player::Calculate buffer, current({0}), pre({1}), buffer({2}), pre segment({3}), next segment({4}), play state({5})",this._m19.currentTime,this._m216,this._m4._m59,this._m389,this._m63,this._m4._m210))},seek:function(b){if(!this._m38){_m$cde5(_m$cde1("core::player::VodPlayer::Seek postion ({0}),mediaSource is null",b));return}if(isNaN(b)){return}if(b<=1){b=1}if(b>=this._m38.duration){b=this._m38.duration-0.5}var a=this._m19.currentTime?this._m19.currentTime.toFixed(1):0;this._m64=Number(b).toFixed(0);if(!this._m54){this._m19.currentTime=b;_m$cde5(_m$cde1("core::player::VodPlayer::Seek vtime({0}) seekTo({1})",a,this._m64))}else{if(this._m1287){_m$cde5(_m$cde1("core::player::VodPlayer::Seek innerseek return vtime({0}) seekTo({1})",a,this._m64));return}_m$cde5(_m$cde1("core::player::VodPlayer::seek videoStatus({0})",this._m4._m20));if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.canplay||this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeking||this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeked||this._m4._m20==p2p$.$n6.VIDEO_STATUS.breakend){_m$cde5(_m$cde1("core::player::VodPlayer::seek vtime({0}) status({1})",a,this._m4._m20));if(this._m61.onbufferstart){_m$cde5(_m$cde1("core::player::VodPlayer::Seek start seeking bufferstart  seekTo({0})",this._m64));this._m61.onbufferstart()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.seeking}_m$cde14(_m$cde1("core::player::VodPlayer::seek time({0}) isPaused({1})",a,this._m19.paused));this.seek2(b)}},seek2:function(d){var a=this._m656(d);if(a){this._m4._m210=p2p$.$n6.PLAY_STATES.SEEKING;this._m63=a.id_;try{this._m21.abort()}catch(c){_m$cde15(_m$cde1("core::player::VodPlayer::seek2 abort error({0})",c))}if(this._m54||!this._m1056(this._m64)){if(this._m43!=this._k10){try{this._m21.remove(0,this._m38.duration);_m$cde14(_m$cde1("core::player::VodPlayer::seek2 remove length {0}",this._m21.buffered.length));for(var b=0;b<this._m21.buffered.length;b++){_m$cde14(_m$cde1("core::player::VodPlayer::seek2 remove: start: {0}, end: {1}, length: {2}",this._m21.buffered.start(b),this._m21.buffered.end(b),this._m21.buffered.length))}}catch(c){_m$cde15(_m$cde1("core::player::VodPlayer::seek2 remove error({0})",c))}}}this._m189=[];this._m4._m59=0;_m$cde5(_m$cde1("core::player::VodPlayer::seek2 seek to({0}), next segment({1}), state({2})",d,this._m63,this._m4._m210));this._m1081()}else{_m$cde5(_m$cde1("core::player::VodPlayer::seek2 find segment failed, seek to({0}), next segment({1})",d,this._m63))}},_m314:function(){if(this._m439<1){return}this._super();var a=this._m19.currentTime?this._m19.currentTime.toFixed(1):0;this._m4._m146=a;var b=(this._m439-a).toFixed(1);if(Math.abs(b)<=0.5){this._m892()}_m$cde14(_m$cde1("core::player::VodPlayer::Video time update, time({0}) remain({1}), pre seek({2})",a,b,this._m64))},_m408:function(){var a=this._m19.currentTime?this._m19.currentTime:0;if(this._m54){if(this._m133){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeking innerSeek return vtime({0}) seekTo({1}) innerSeek({2}) videoStatus({3})",a,this._m64,this._m133,this._m4._m20));return}if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeking){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeking autoBackSeek return vtime({0}) seekTo({1}) innerSeek({2}) videoStatus({3})",a,this._m64,this._m133,this._m4._m20));return}}if(this._m43!=this._k41){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeking firstSeek start"))}this._m64=a;if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.canplay||this._m4._m20==p2p$.$n6.VIDEO_STATUS.loadstart||this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeking||this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeked||this._m4._m20==p2p$.$n6.VIDEO_STATUS.breakend){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeking vtime({0}) seekTo({1}) status({2})",a,this._m64,this._m4._m20));if(this._m61.onbufferstart){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeking start seeking bufferstart"));this._m61.onbufferstart()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.seeking}this._m19.pause();_m$cde14(_m$cde1("core::player::VodPlayer::onVideoSeeking to({0}), paused({1})",a,this._m19.paused));this.seek2(a)},_m450:function(){var a=this._m19.currentTime?this._m19.currentTime:0;if(this._m54){if(this._m133){this._m133=false;_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked innerseek return vtime({0}) seekTo({1}) innerSeek({2}) videoStatus({3})",a,this._m64,this._m133,this._m4._m20));if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeking||this._m4._m20==p2p$.$n6.VIDEO_STATUS.loadstart){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked vtime({0}) status({1})",a,this._m4._m20));this._m19.play();if(this._m61.onbufferend){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked seeking bufferend"));this._m61.onbufferend()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.seeked}return}else{if(this._m43==this._k10){this._m43=this._k28;this._m19.play();_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked firstSeek Done"))}else{_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked autoBackSeek return vtime({0}) seekTo({1}) innerSeek({2}) videoStatus({3})",a,this._m64,this._m133,this._m4._m20))}}}else{if(this._m4._m20==p2p$.$n6.VIDEO_STATUS.seeking){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked vtime({0}) status({1})",a,this._m4._m20));this._m19.play();if(this._m61.onbufferend){_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked end seeking bufferend"));this._m61.onbufferend()}this._m4._m20=p2p$.$n6.VIDEO_STATUS.seeked}else{if(this._m43==this._k10){this._m43=this._k28;this._m19.play();_m$cde5(_m$cde1("core::player::VodPlayer::onVideoSeeked firstSeek Done"))}}return}},_m405:function(){if(!this._m54){this._m148()}},_m789:function(){if(this._m54&&!this._m852){this._m852=true;this._m148()}},_m585:function(){if(this._m43!=undefined&&this._m43==this._k41){if(this._m54){this._m148()}}},_m663:function(){if(this._m43!=undefined&&this._m43!=this._k41){if(this._m54){this._m148()}}},_m1005:function(c){var a=-1;var b=null;if(!this._m3){return}for(var d=0;d<this._m3._m6.length;d++){b=this._m3._m6[d];if(b._m39+b._m50<=c*1000){continue}if(b._m26>0){a=(b._m39+b._m50-0)/1000}else{break}}return a},getCurrentBuffered:function(){var a=-1;if(this._m19){a=this._m1005(this.getCurrentPosition())}return a},_m792:function(){this._super();_m$cde5(_m$cde1("core::player::VodPlayer::Player error {0} times... init a new one",this._m421));this._m341();this._m163=true;this._m433=true;this._m4._m88=null;this._m4._m404=null;this._m4._m609=null;this._m4._m59=0;this._m852=null;this._m189=[];this._m416=true;this._m19.pause();this._m241=this._m4._m146;var a=this._m656(this._m241);if(a){this._m63=a.id_+1}else{this._m63=this._m173?this._m173.id_:0}this._m173=null;this._m4._m146=0;_m$cde5(_m$cde1("core::player::VodPlayer::replay segment({0}),nextSegmentId2({1}),errorReplayTime({2})",(a!=null),this._m63,this._m241))}});p2p$.ns("$n6");p2p$.$n6.$c21=p2p$.$n6.$c22._m41({_m163:false,_m825:false,_m258:0,_m337:0,init:function(a){this._super(a);this._m163=false;this._m258=0;this._m4._m499=p2p$.$n2.META_DATA_TYPE._k7;this._m259=0;this._m589=0},play:function(){if(!this._m19){return}if(this._m19.paused){this._m19.play()}if(!this._m799){return}this._m19.currentTime=this._m574;this._m799=false;this._m987=true;_m$cde5(_m$cde1("core::player::LivePlayer::play first segment seek to({0})",this._m19.currentTime.toFixed(1)));return},_m1111:function(c){if(!this._m3){_m$cde15(_m$cde1("core::player::LivePlayer::Meta data is null"));return null}for(var d=0;d<this._m3._m6.length-1;d++){var b=this._m3._m6[d];var a=this._m3._m6[d+1];b._m970=a.id_;if(d==this._m3._m6.length-2){a._m970=a.id_}}for(var d=0;d<this._m3._m6.length;d++){var b=this._m3._m6[d];if(c==b.id_){return b}if(d==this._m3._m6.length-1){_m$cde14(_m$cde1("core::player::LivePlayer::segment ({0}) not found,return default segment({1})",c,this._m3._m6[0].id_))}}return this._m3._m6[0]},_m634:function(b){if(!this._m4._m88){return}var a=this._m19.currentTime;if(a>1){var c=this._m596(a);if(c){this._m356=c.id_;_m$cde14(_m$cde1("core::player::BasePlayer::refreshUrgentSegment1 requestSegment({0}),urgentSegment({1})",b,this._m356));return}}this._m356=b-1;_m$cde14(_m$cde1("core::player::BasePlayer::refreshUrgentSegment2 requestSegment({0}),urgentSegment({1})",b,this._m356))},_m596:function(c){c=c*1000;var a=null;for(var d=0;d<this._m3._m6.length;d++){var b=this._m3._m6[d];if(b._m142<=c&&c<=b._m142+b._m50&&b.id_>this._m259){a=b}}return a},_m654:function(){if(!this._m4._m404){return}if(!this._m38){_m$cde14(_m$cde1("core::player::LivePlayer::Create media source ..."));this._m21=null;this._m38=this._m721();this._m19.src=window.URL.createObjectURL(this._m38)}if(!this._m21){if(!this._m361){this._m409++;if(this._m409>500){_m$cde15(_m$cde1("core::player::LivePlayer::Play segment with delay count({0})",this._m409))}return}this._m632();if(!this._m21){this._m409++;if(this._m409>500){_m$cde15(_m$cde1("core::player::LivePlayer::Play segment with delay2 count({0})",this._m409))}return}}if(this._m21.updating){return}this._m310();this._m1095();if(this._m189.length<=0||this._m4._m59>=20){return}var b=this._m189[0];if(b.block._m344==0&&!this._m825){this._m163=true;this._m825=true}if(this._m173&&b.block._m142<this._m173._m142){if(!this._m411){if(b.block._m295){this._m411=true;_m$cde5(_m$cde1("core::player::LivePlayer::discontinuity true, segment({0})",b.block.id_))}else{b.block._m295=true;this._m411=true;_m$cde5(_m$cde1("core::player::LivePlayer::discontinuity false, segment({0})",b.block.id_))}}}if(b.block._m295&&!this._m692&&this._m259!=b.block.id_){if(this._m4._m59<0.2||this._m258>5){var a=((b.block._m142||0))/1000;_m$cde5(_m$cde1("core::player::LivePlayer::Start to play next video, buffer({0}), delay({1}), offset({2}), mime({3}, {4} => {5})",this._m4._m59.toFixed(3),this._m258,a,b.mime==this._m711?"same":"diff",this._m711,b.mime));this._m19.currentTime=a;if(b.mime!=this._m711){this._m341();this._m692=true;this._m163=true;this._m4._m88=null;this._m4._m404=null;this._m4._m609=null;this._m189=[]}else{if(this._m21.buffered.length>0){this._m21.remove(0,this._m21.buffered.end(this._m21.buffered.length-1))}}this._m216=0;this._m258=0;this._m411=false;this._m173=null;this._m4._m59=0;this._m259=b.block.id_}else{if(this._m4._m59<3){this._m258++}}this._m63=b.block.id_;return null}this._m189.shift();this._m21.appendBuffer(b.data);this._m173=b.block;_m$cde5(_m$cde1("core::player::LivePlayer::Add data success ,buffer length({0}),blockLength ({1}s), segmentId({2}), startTime({3}), timestamp({4}), discontinuity({5}), segment length ({6}), prev segment({7}), next segment({8})",this._m4._m59.toFixed(2),b.block._m50/1000,b.block.id_,p2p$.$n2.$c47._m357(b.block._m39/1000),b.block._m142,b.block._m295,b.data.length,this._m389,this._m63))},_m1095:function(){if(!this._m4._m88||!this._m987){return}var f=new Date().getTime();if(this._m589+500>f){return}this._m589=f;var b=this._m4._m146;var a=-1;if(Math.abs(this._m19.currentTime-b)<0.1){for(var d=0;d<this._m4._m88.length;d++){var h=this._m4._m88.start(d);if(h>b){a=d;_m$cde5(_m$cde1("core::player::LivePlayer start ({0}),length ({1}),i ({2}),bufferIndex ({3})",h,this._m4._m88.length,d,a));break}}if(a!=-1){var c=this._m4._m88.start(a);_m$cde5(_m$cde1("core::player::LivePlayer replay suspend seekto ({0}) ...",c));try{this._m19.pause();this._m19.currentTime=c;this._m19.play();if(a>=2){if(!this._m54){this._m21.remove(0,this._m4._m88.end(a-2))}this._m4._m88=this._m21.buffered}}catch(g){_m$cde15(_m$cde1("core::player::LivePlayer replay seek or remove error({0})",g))}this._m337=0}else{if(!this._m337){this._m337=0}this._m337++;if(this._m337>5){var c=b+0.2;this._m19.currentTime=c;this._m337=0;_m$cde5(_m$cde1("core::player::LivePlayer replay2 suspend seekto ({0}) ...",c))}}}else{this._m337=0}this._m4._m146=this._m19.currentTime},_m310:function(){if(!this._m19){return}var c=0;var b=0;if(this._m19){this._m216=this._m19.currentTime}this._m4._m59=0;if(!this._m4._m88){return}for(var a=0;a<this._m4._m88.length;a++){c=this._m4._m88.start(a);b=this._m4._m88.end(a);if(this._m163){this._m4._m59=b-c;this._m163=false;if(this._m433){this._m433=false;if(c<=this._m241&&this._m241<=b){this._m19.currentTime=this._m241}else{this._m19.currentTime=this._m54?Math.max(c,0.1):c}this._m148();this._m19.play();_m$cde5(_m$cde1("core::player::LivePlayer::error play first segment seek to({0})",this._m19.currentTime.toFixed(1)))}else{this._m799=true;this._m574=c;if(!this._m54){this._m19.currentTime=this._m574;this._m19.pause()}this._m148()}this._m692=null}else{if(c>this._m216){this._m4._m59+=(b-c)}else{if(c<=this._m216&&b>=this._m216){this._m4._m59=(b-this._m216)}}}}_m$cde14(_m$cde1("core::player::LivePlayer::Calculate buffer, current({0}), pre({1}), buffer({2}), pre segment({3}), next segment({4})",this._m19.currentTime,this._m216,this._m4._m59,this._m389,this._m63))},_m408:function(){},_m450:function(){},_m792:function(){this._m421++;this._super();if(this._m421>this._m689){_m$cde5(_m$cde1("core::player::LivePlayer::Player error {0} times...,return error",this._m421));return}_m$cde5(_m$cde1("core::player::LivePlayer::Player error {0} times... init a new one",this._m421));this._m341();this._m692=true;this._m163=true;this._m4._m88=null;this._m4._m404=null;this._m4._m609=null;this._m189=[];this._m19.pause();this._m433=true;var a=0;var c=this._m596(this._m4._m146);if(c){this._m63=c.id_;a=1}else{var d=Date.parse(new Date());var b=this._m656(d/1000);if(b){this._m63=b.id_;a=2}else{this._m63=this._m173?this._m173.id_:0;a=3}}this._m259=0;this._m4._m59=0;this._m416=true;this._m258=0;this._m411=false;this._m173=null;this._m4._m59=0;this._m241=this._m4._m146;this._m4._m146=0;_m$cde5(_m$cde1("core::player::LivePlayer::replay find segment by ({0}),nextSegmentId({1}),errorReplayTime({2})",a,this._m63,this._m241))},_m314:function(){this._super()},_m405:function(){},_m585:function(){},_m663:function(){},seek:function(a){return},getCurrentPosition:function(){return 0},getDuration:function(){return Infinity},getCurrentBuffered:function(){var a=-1;return a}});p2p$.ns("$n3");p2p$.$n3.$c48=_m$cde18._m41({_m437:0,_m580:false,_m759:0,_m855:0,_m1022:0,_m125:0,_m447:0,_m661:0,_m561:0,_m708:null,_m725:false,_m766:null,_m554:null,_m823:null,_m555:null,_m1204:[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350],init:function(){this.reset()},reset:function(){this._m437=0;this._m708=new p2p$.$n3.$c24(100);this._m725=true;this._m125=0;this._m447=0;this._m823=[];this._m555={index:0,timeScale:44100,duration:0}},_m969:function(c,b,a){return((c&14)*Math.pow(2,29))+((b&65534)<<14)+((a&65534)>>1)},_m1087:function(a){var b=this._m1204[a];return 1024000/b},_m461:function(g,a,m){var k;if(g){k=a._m619();a.position-=4;if(a._m619()!=448){_m$cde5(_m$cde1("tools::ts2mp4::Audio::PES start code not found or not AAC/AVC"));return}a.position+=3;var c=(a._m55()&192)>>6;if(c!=2){_m$cde5(_m$cde1("tools::ts2mp4::Audio::No PTS in this audio PES packet, flags({0})",c));return}var b=a._m55();var n=a._m55();var l=a._m80();var j=a._m80();var p=this._m969(n,l,j);this._timestamp=Math.round(p/90);this._m580=true;b-=5;a.position+=b}k=0;var o=null;var e=0;if(!m){e=a.position}if(m){}else{while(a._m813()>0){if(this._m437<7){k=a._m55();this._m708._m1235(this._m437,k)}switch(this._m437){case 0:if(this._m580){this._m759=this._timestamp;this._m580=false}if(k==255){this._m437=1}else{}break;case 1:if((k&240)!=240){this._m437=0}else{this._m437=2}break;case 2:this._m437=3;this._m1022=(k>>6)&3;this._m125=(k>>2)&15;this._m855=this._m1087(this._m125);this._m447=(k&1)<<2;break;case 3:this._m437=4;this._m447+=(k>>6)&3;this._m661=(k&3)<<11;break;case 4:this._m437=5;this._m661+=(k)<<3;break;case 5:this._m437=6;this._m661+=(k&224)>>5;this._m561=this._m661-7;break;case 6:this._m437=7;e=a.position;this._m766=new p2p$.$n3.$c24(2048);if(this._m725){o={};o.timestamp=this._m759;this._m554=new Uint8Array((this._m125==7)?7:2);this._m554[0]=(this._m1022+1)<<3;this._m554[0]|=this._m125>>1;this._m554[1]=(this._m125&1)<<7;this._m554[1]|=this._m447<<3;if(this._m125==7){var h=[86,229,165,72,128];for(var d=0;d<h.length;d++){this._m554[d+2]=h[d]}}this._m555.index=this._m125;this._m555.channelCount=2;this._m555.timeScale=this._m1204[this._m125]||44100;this._m555.sampleSize=16;this._m708.length=4;o.data=this._m708;this._m725=false}break;case 7:if((a.length-e)>=this._m561){a.position+=this._m561;this._m561=0}else{var f=a.length-e;a.position+=f;this._m561-=f;this._m766._m308(a,e,a.position-e)}if(this._m561>0){}else{this._m766._m308(a,e,a.position-e);this._m437=0;o={};o.timestamp=this._m759;this._m759+=this._m855;o.data=this._m766;this._m823.push(o)}break}}}}});p2p$.ns("$n3");p2p$.$n3.$c24=_m$cde18._m41({position:0,length:0,data:null,_m410:1024,className:"WebP2P.ts2mp4.ByteArray",init:function(a,b){this.position=0;this.data=new Uint8Array(a);this.length=b?0:this.data.length},_m813:function(){return this.data.length-this.position},resize:function(b){var c=new Uint8Array(b);for(var a=0;a<b&&a<this.length;a++){c[a]=this.data[a]}this.data=c;if(this.length>b){this.length=b}},_m1018:function(a){return this.data[a]},_m55:function(){if(this.position>=this.data.length){return 0}return this.data[this.position++]},_m80:function(){if((this.position+1)>=this.data.length){return 0}var b=this.data[this.position++];var a=this.data[this.position++];return(b<<8)+a},_m619:function(){if((this.position+3)>=this.data.length){return 0}var c=this.data[this.position++];var b=this.data[this.position++];var a=this.data[this.position++];var d=this.data[this.position++];return(c<<24)+(b<<16)+(a<<8)+d},_m1235:function(a,b){this.data[a]=b},_m395:function(a){this._m965(a)},_m965:function(a){this.position=Math.min(this.position,this.length);if(this.data.length<this.position+1){this.resize(this.data.length+Math.max(1,this._m410))}this.data[this.position++]=a;this.length=this.position},_m1197:function(a){this.position=Math.min(this.position,this.length);if(this.data.length<this.position+2){this.resize(this.data.length+Math.max(2,this._m410))}this.data[this.position++]=(a>>8)&255;this.data[this.position++]=a&255;this.length=this.position},_m758:function(a){this.position=Math.min(this.position,this.length);if(this.data.length<this.position+2){this.resize(this.data.length+Math.max(4,this._m410))}this.data[this.position++]=(a>>24)&255;this.data[this.position++]=(a>>16)&255;this.data[this.position++]=(a>>8)&255;this.data[this.position++]=a&255;this.length=this.position},_m308:function(a,f,d){var e=a.length||0;f=f||0;d=d||e;if(a.className=="WebP2P.ts2mp4.ByteArray"){a=a.data}d=Math.min(d,e-f);if(f<0||d<=0){return}this.position=Math.min(this.position,this.length);if(this.data.length<this.position+d){this.resize(this.data.length+Math.max(d,this._m410))}var c=f+d;this.data[this.position+d-1]=0;for(var b=f;b<c&&b<e;b++){this.data[this.position++]=a[b]}this.length=this.position}});p2p$.ns("$n3");p2p$.$n3.$c19=_m$cde18._m41({_m650:false,_m1176:0,_m1108:0,_m1106:0,_m280:null,_m455:null,_m39:null,init:function(){this._m280=new p2p$.$n3.$c48();this._m455=new p2p$.$n3.$c51()},_m1215:function(a,b){this._m650=false},_m1214:function(){if(this._m650){return 187}else{return 1}},_m931:function(j,d,i,h){var c=0;var a;this._m39=null;this._m280.reset();this._m455.reset();while(c<j.length){if(!this._m650){if(c+1>j.length){return null}if(j[c++]==71){this._m650=true}}else{if(c+187>j.length){return null}this._m650=false;var b=new p2p$.$n3.$c24(j.subarray(c,c+187));a=this._m1088(b,h);if(a!==null&&this._m39===null){this._m39=a}if(!h&&this._m39!==null){break}c+=187}}if(!h){return j}this._m980(j);var f={video:{info:this._m455._m564,avcc:this._m455._m816,items:this._m455._m823},audio:{info:this._m280._m555,aac:this._m280._m554,items:this._m280._m823},_m283:i||0,start:0};p2p$.$n5.$c50.apply(f.video.info,d||{});if(d){if(d.duration){f.audio.info.duration=Math.floor(d.duration*f.audio.info.timeScale/1000);var k=Math.ceil(f.audio.info.duration/f.audio.items.length);f.audio.info.duration=k*f.audio.items.length}if(d.start){f.start=d.start}}var g=new p2p$.$n3.$c49(f);var e=g.toBuffer();return e},_m807:function(){var c=this._m455._m816;if(!c){return"avc1.64001f"}var a="avc1.";for(var b=0;b<3;b++){var d=c._m1018(b+1).toString(16);if(d.length<2){d=("0"+d)}a+=d}return a},_m841:function(){var a=this._m280._m125;var b=5;switch(a){case 4:b=2;break;case 7:b=2;break;default:b=5;break}return"mp4a.40."+b},_m1154:function(){var b=this._m280._m554;var a="mp4a.40.2";if(!b){return a}return a},_m765:function(){return"audio<sri:"+this._m280._m125+", profile:"+this._m280._m1022+", channel:"+this._m280._m447+">"},_m1220:function(q){var g="";var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var o=q.byteLength;var f=o%3;var p=o-f;var n,l,k,h;var m;for(var e=0;e<p;e=e+3){m=(q[e]<<16)|(q[e+1]<<8)|q[e+2];n=(m&16515072)>>18;l=(m&258048)>>12;k=(m&4032)>>6;h=m&63;g+=j[n]+j[l]+j[k]+j[h]}if(f==1){m=q[p];n=(m&252)>>2;l=(m&3)<<4;g+=j[n]+j[l]+"=="}else{if(f==2){m=(q[p]<<8)|q[p+1];n=(m&64512)>>10;l=(m&1008)>>4;k=(m&15)<<2;g+=j[n]+j[l]+j[k]+"="}}return g},_m1257:function(a){return null},_m1088:function(f){var c=f._m55();var b=Boolean(c&64);c<<=8;c+=f._m55();var a=c&8191;c=f._m55();var g=Boolean(c&32);var e=Boolean(c&16);if(g){var d=f._m55();f.position+=d}if(e){return this._m461(a,b,f)}return null},_m461:function(b,a,c){if(b===0){if(a){this._m1166(c)}}else{if(b==this._m1176){if(a){this._m1162(c)}}else{if(b==this._m1108){this._m280._m461(a,c)}else{if(b==this._m1106){return this._m455._m461(a,c)}}}}return null},_m1166:function(d){var e=d._m55();var b=d._m55();var c=d._m80()&1023;var a=c;d.position+=5;a-=5;while(a>4){d._m80();this._m1176=d._m80()&8191;a-=4}},_m1162:function(b){var a=b._m55();var h=b._m55();if(h!=2){_m$cde5(_m$cde1("tools::ts2mp4::FileHandler::PAT pointed to PMT that isn't PMT"));return}var g=b._m80()&1023;var d=g;b.position+=7;d-=7;var f=b._m80()&4095;d-=2;b.position+=f;d-=f;while(d>4){var i=b._m55();var e=b._m80()&8191;var c=b._m80()&4095;d-=5;b.position+=c;d-=c;switch(i){case 27:this._m1106=e;break;case 15:this._m1108=e;break;default:_m$cde5(_m$cde1("tools::ts2mp4::FileHandler::Unsupported typeh {0} in PMT",i.toString(16)));break}}},_m980:function(a){this._m455._m461(false,null,true);this._m280._m461(false,null,true)}});p2p$.ns("$n3");p2p$.$n3.$c35=_m$cde18._m41({data:null,init:function(a){this.data=a},NALtype:function(){return this.data._m1018(0)&31},length:function(){return this.data.length},NALdata:function(){return this.data}});p2p$.ns("$n3");p2p$.$n3.$c49=_m$cde18._m41({type:0,audio:null,video:null,start:0,dataSize:0,fileData:null,fileType:true,config:null,_m912:0,dataOffset:0,_m478:0,_m566:0,_m616:0,_m560:0,_m283:0,_m1133:0,_m521:[],_m532:[],_m480:[],_m474:[],init:function(b){if(Object.prototype.toString.call(b)=="[object Object]"){for(var a in b){this[a]=b[a]}}},toBuffer:function(){var e=0;this._m521=[];this._m532=[];this._m480=[];this._m474=[];this.type=0;this.dataSize=0;this._m912=(this.video.items.length+this.audio.items.length)*8+2000;this.dataOffset=this._m912;var b;var c;for(b=0;b<this.video.items.length;b++){c=this.video.items[b];this.dataSize+=c.data.length}this._m566=this.dataSize;for(b=0;b<this.audio.items.length;b++){c=this.audio.items[b];this.dataSize+=c.data.length}this._m560=this.dataSize-this._m566;this.fileData=new Uint8Array(this.dataOffset+this.dataSize);var f=0;if(this._m283===0){f+=this._m1083(this.fileData,f);f+=this._m1045(this.fileData,f)}else{f+=this._m1039(this.fileData,f)}f+=this._m1165(this.fileData,f);e=f;f+=this._m933(this.fileData,f);this._m478=f+8;this._m616=this._m478+this._m566;for(b=0;b<this._m521.length;b++){this._m2(this.fileData,this._m521[b],this._m478)}for(b=0;b<this._m532.length;b++){this._m2(this.fileData,this._m532[b],this._m616)}for(b=0;b<this._m480.length;b++){this._m2(this.fileData,this._m480[b],this._m478-e)}for(b=0;b<this._m474.length;b++){this._m2(this.fileData,this._m474[b],this._m616-e)}var a=this._m1044(this.fileData,f);var d=new Uint8Array();d=this.fileData.subarray(0,a);return d},_m432:function(d,b,c){var a;if(c.className=="WebP2P.ts2mp4.ByteArray"){for(a=0;a<c.length;a++){d[b+a]=c._m1018(a)}}else{for(a=0;a<c.length;a++){d[b+a]=c[a]}}return c.length},_m11:function(d,b,c){for(var a=0;a<c.length;a++){d[b+a]=c.charCodeAt(a)}return c.length},_m23:function(e,c,d){var a=c;if(Object.prototype.toString.call(d)=="[object Array]"){for(var b=0;b<d.length;b++){a+=this._m23(e,a,d[b])}}else{e[a++]=d&255}return a-c},_m25:function(e,c,d){var a=c;if(Object.prototype.toString.call(d)=="[object Array]"){for(var b=0;b<d.length;b++){a+=this._m25(e,a,d[b])}}else{e[a++]=(d>>8)&255;e[a++]=d&255}return a-c},_m2:function(e,c,d){var a=c;if(Object.prototype.toString.call(d)=="[object Array]"){for(var b=0;b<d.length;b++){a+=this._m2(e,a,d[b])}}else{e[a++]=(d>>24)&255;e[a++]=(d>>16)&255;e[a++]=(d>>8)&255;e[a++]=d&255}return a-c},_m1083:function(a,c){var b=8;this._m11(a,c+4,"ftyp");b+=this._m11(a,c+b,"isom");b+=this._m2(a,c+b,1);b+=this._m11(a,c+b,"isommp42avc1");this._m2(a,c,b);return b},_m1039:function(a,c){var b=8;this._m11(a,c+4,"styp");b+=this._m11(a,c+b,"isom");b+=this._m2(a,c+b,1);b+=this._m11(a,c+b,"isommp42avc1");this._m2(a,c,b);return b},_m1045:function(a,c){var b=8;this._m11(a,c+4,"free");b+=this._m11(a,c+b,"IsoMedia File Produced with GPAC 0.5.1-DEV-rev5528");b+=this._m23(a,c+b,0);this._m2(a,c,b);return b},_m1165:function(a,c){var b=8;this._m11(a,c+4,"moov");b+=this._m977(a,c+b);if(this.type===0){b+=this._m898(a,c+b)}b+=this._m999(a,c+b,true);b+=this._m999(a,c+b,false);this._m2(a,c,b);return b},_m977:function(a,c){var b=8;this._m11(a,c+4,"mvhd");b+=this._m2(a,c+b,0);b+=this._m2(a,c+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,c+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,c+b,this.video.info.timeScale);b+=this._m2(a,c+b,this.type==1?this.video.info.duration:0);b+=this._m2(a,c+b,65536);b+=this._m25(a,c+b,256);b+=this._m25(a,c+b,0);b+=this._m2(a,c+b,[0,0]);b+=this._m2(a,c+b,[65536,0,0,0,65536,0,0,0,1073741824]);b+=this._m2(a,c+b,[0,0,0,0,0,0]);b+=this._m2(a,c+b,3);this._m2(a,c,b);return b},_m898:function(a,c){var b=8;this._m11(a,c+4,"mvex");b+=this._m804(a,c+b);b+=this._m718(a,c+b,true);b+=this._m718(a,c+b,false);this._m2(a,c,b);return b},_m804:function(a,c){var b=8;this._m11(a,c+4,"mehd");b+=this._m2(a,c+b,0);b+=this._m2(a,c+b,this._m283);this._m2(a,c,b);return b},_m718:function(a,f,e){var d=e?this.video:this.audio;var c=e?this._m566:this._m560;var b=8;this._m11(a,f+4,"trex");b+=this._m2(a,f+b,0);b+=this._m2(a,f+b,e?1:2);b+=this._m2(a,f+b,1);b+=this._m2(a,f+b,Math.ceil(d.info.duration/d.items.length));b+=this._m2(a,f+b,Math.ceil(c/d.items.length));b+=this._m2(a,f+b,e?65536:0);this._m2(a,f,b);return b},_m1193:function(a,d,c){var b=8;this._m11(a,d+4,"trep");b+=this._m2(a,d+b,0);b+=this._m2(a,d+b,c?1:2);this._m2(a,d,b);return b},_m999:function(a,d,c){var b=8;this._m11(a,d+4,"trak");b+=this._m964(a,d+b,c);b+=this._m1171(a,d+b,c);this._m2(a,d,b);return b},_m1271:function(a,d,c){var b=8;this._m11(a,d+4,"edts");b+=this._m971(a,d+b,c);this._m2(a,d,b);return b},_m971:function(a,e,d){var b=8;var c=d?this.video.info:this.audio.info;this._m11(a,e+4,"elst");b+=this._m2(a,e+b,0);b+=this._m2(a,e+b,1);b+=this._m2(a,e+b,c.duration);b+=this._m2(a,e+b,0);b+=this._m25(a,e+b,1);b+=this._m25(a,e+b,0);this._m2(a,e,b);return b},_m964:function(a,e,d){var b=8;var c=d?this.video.info:this.audio.info;this._m11(a,e+4,"tkhd");b+=this._m2(a,e+b,1);b+=this._m2(a,e+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,e+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,e+b,d?1:2);b+=this._m2(a,e+b,0);b+=this._m2(a,e+b,this.type==1?c.duration:0);b+=this._m2(a,e+b,[0,0]);b+=this._m25(a,e+b,0);b+=this._m25(a,e+b,0);b+=this._m25(a,e+b,d?0:256);b+=this._m25(a,e+b,0);b+=this._m2(a,e+b,[65536,0,0,0,65536,0,0,0,1073741824]);b+=this._m2(a,e+b,(c.width||0)<<16);b+=this._m2(a,e+b,(c.height||0)<<16);this._m2(a,e,b);return b},_m1171:function(a,d,c){var b=8;this._m11(a,d+4,"mdia");b+=this._m976(a,d+b,c);b+=this._m864(a,d+b,c);b+=this._m847(a,d+b,c);this._m2(a,d,b);return b},_m976:function(a,e,d){var b=8;var c=d?this.video.info:this.audio.info;this._m11(a,e+4,"mdhd");b+=this._m2(a,e+b,0);b+=this._m2(a,e+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,e+b,Math.round(new Date().getTime()/1000)+2082844800);b+=this._m2(a,e+b,c.timeScale);b+=this._m2(a,e+b,this.type==1?c.duration:0);b+=this._m25(a,e+b,21956);b+=this._m25(a,e+b,0);this._m2(a,e,b);return b},_m864:function(a,d,c){var b=8;this._m11(a,d+4,"hdlr");b+=this._m2(a,d+b,0);b+=this._m2(a,d+b,0);b+=this._m11(a,d+b,c?"vide":"soun");b+=this._m2(a,d+b,[0,0,0]);b+=this._m11(a,d+b,c?"VideoHandler":"SoundHandler");b+=this._m23(a,d+b,0);this._m2(a,d,b);return b},_m847:function(a,d,c){var b=8;this._m11(a,d+4,"minf");if(c){b+=this._m838(a,d+b)}else{b+=this._m839(a,d+b)}b+=this._m868(a,d+b,c);b+=this._m975(a,d+b,c);this._m2(a,d,b);return b},_m838:function(a,c){var b=8;this._m11(a,c+4,"vmhd");b+=this._m2(a,c+b,1);b+=this._m25(a,c+b,0);b+=this._m25(a,c+b,[0,0,0]);this._m2(a,c,b);return b},_m839:function(a,c){var b=8;this._m11(a,c+4,"smhd");b+=this._m2(a,c+b,0);b+=this._m25(a,c+b,0);b+=this._m25(a,c+b,0);this._m2(a,c,b);return b},_m868:function(a,d,c){var b=8;this._m11(a,d+4,"dinf");b+=this._m919(a,d+b,c);this._m2(a,d,b);return b},_m919:function(a,d,c){var b=8;this._m11(a,d+4,"dref");b+=this._m2(a,d+b,0);b+=this._m2(a,d+b,1);b+=this._m997(a,d+b,c);this._m2(a,d,b);return b},_m997:function(a,d,c){var b=8;this._m11(a,d+4,"url ");b+=this._m2(a,d+b,1);this._m2(a,d,b);return b},_m975:function(a,d,c){var b=8;this._m11(a,d+4,"stbl");b+=this._m805(a,d+b,c);b+=this._m878(a,d+b,c);b+=this._m928(a,d+b,c);b+=this._m1024(a,d+b,c);b+=this._m973(a,d+b,c);this._m2(a,d,b);return b},_m1241:function(a,f){var b=[];var d;var e;for(d=0;d<this.video.items.length;d++){e=this.video.items[d];e.sampleNumber=d+1;if(e.isKeyFrame){b.push(e)}}var c=8;this._m11(a,f+4,"stss");c+=this._m2(a,f+c,0);c+=this._m2(a,f+c,b.length);for(d=0;d<b.length;d++){e=b[d];c+=this._m2(a,f+c,e.sampleNumber)}this._m2(a,f,c);return c},_m805:function(a,d,c){var b=8;this._m11(a,d+4,"stsd");b+=this._m2(a,d+b,0);b+=this._m2(a,d+b,1);if(c){b+=this._m810(a,d+b)}else{b+=this._m836(a,d+b)}this._m2(a,d,b);return b},_m810:function(a,d){var c=8;this._m11(a,d+4,"avc1");c+=this._m23(a,d+c,[0,0,0,0,0,0]);c+=this._m25(a,d+c,1);c+=this._m25(a,d+c,0);c+=this._m25(a,d+c,0);c+=this._m2(a,d+c,[0,0,0]);c+=this._m25(a,d+c,this.video.info.width);c+=this._m25(a,d+c,this.video.info.height);c+=this._m2(a,d+c,4718592);c+=this._m2(a,d+c,4718592);c+=this._m2(a,d+c,0);c+=this._m25(a,d+c,1);for(var b=0;b<32;b++){c+=this._m23(a,d+c,0)}c+=this._m25(a,d+c,24);c+=this._m25(a,d+c,65535);c+=this._m674(a,d+c);this._m2(a,d,c);return c},_m674:function(a,c){var b=8;this._m11(a,c+4,"avcC");if(this.video.avcc){b+=this._m432(a,c+b,this.video.avcc)}else{var d=[103,66,192,21,217,65,224,142,154,128,128,128,160,0,0,3,0,32,0,0,3,3,209,226,197,203];b+=this._m23(a,c+b,1);b+=this._m23(a,c+b,66);b+=this._m23(a,c+b,192);b+=this._m23(a,c+b,21);b+=this._m23(a,c+b,255);b+=this._m23(a,c+b,225);b+=this._m25(a,c+b,d.length);b+=this._m23(a,c+b,d);b+=this._m23(a,c+b,1);b+=this._m25(a,c+b,4);b+=this._m23(a,c+b,[104,201,35,200])}this._m2(a,c,b);return b},_m836:function(a,c){var b=8;this._m11(a,c+4,"mp4a");b+=this._m23(a,c+b,[0,0,0,0,0,0]);b+=this._m25(a,c+b,1);b+=this._m2(a,c+b,[0,0]);b+=this._m25(a,c+b,this.audio.info.channelCount||2);b+=this._m25(a,c+b,this.audio.info.sampleSize||16);b+=this._m25(a,c+b,0);b+=this._m25(a,c+b,0);b+=this._m2(a,c+b,this.audio.info.timeScale<<16);b+=this._m640(a,c+b);this._m2(a,c,b);return b},_m640:function(a,c){var b=8;this._m11(a,c+4,"esds");b+=this._m2(a,c+b,0);b+=this._m717(a,c+b);this._m2(a,c,b);return b},_m717:function(a,c){var b=0;b+=this._m23(a,c+b,3);b+=this._m23(a,c+b,0);b+=this._m25(a,c+b,10);b+=this._m23(a,c+b,0);b+=this._m533(a,c+b);b+=this._m594(a,c+b);this._m23(a,c+1,b-2);return b},_m533:function(a,c){var b=0;b+=this._m23(a,c+b,4);b+=this._m23(a,c+b,0);b+=this._m23(a,c+b,64);b+=this._m23(a,c+b,20);b+=this._m23(a,c+b,[0,0,0]);b+=this._m2(a,c+b,this._m560*8000/this.audio.info.duration);b+=this._m2(a,c+b,this._m560*8000/this.audio.info.duration);b+=this._m493(a,c+b);this._m23(a,c+1,b-2);return b},_m493:function(a,c){var b=0;b+=this._m23(a,c+b,5);b+=this._m23(a,c+b,0);if(this.audio.aac){b+=this._m432(a,c+b,this.audio.aac)}else{b+=this._m25(a,c+b,4624)}this._m23(a,c+1,b-2);return b},_m594:function(a,c){var b=0;b+=this._m23(a,c+b,6);b+=this._m23(a,c+b,0);b+=this._m23(a,c+b,2);this._m23(a,c+1,b-2);return b},_m878:function(a,e,d){var b=8;var c=d?this.video:this.audio;this._m11(a,e+4,"stts");b+=this._m2(a,e+b,0);if(this.type==1){b+=this._m2(a,e+b,1);b+=this._m2(a,e+b,c.items.length);b+=this._m2(a,e+b,Math.ceil(c.info.duration/c.items.length))}else{b+=this._m2(a,e+b,0)}this._m2(a,e,b);return b},_m928:function(a,e,d){var b=8;var c=d?this.video:this.audio;this._m11(a,e+4,"stsc");b+=this._m2(a,e+b,0);if(this.type==1){b+=this._m2(a,e+b,1);b+=this._m2(a,e+b,1);b+=this._m2(a,e+b,c.items.length);b+=this._m2(a,e+b,1)}else{b+=this._m2(a,e+b,0)}this._m2(a,e,b);return b},_m1024:function(a,g,f){var c=8;var e=f?this.video:this.audio;this._m11(a,g+4,"stsz");c+=this._m2(a,g+c,0);c+=this._m2(a,g+c,0);if(this.type==1){c+=this._m2(a,g+c,e.items.length);for(var b=0;b<e.items.length;b++){var d=e.items[b];c+=this._m2(a,g+c,d.data.length)}}else{c+=this._m2(a,g+c,0)}this._m2(a,g,c);return c},_m973:function(a,d,c){var b=8;this._m11(a,d+4,"stco");b+=this._m2(a,d+b,0);if(this.type==1){b+=this._m2(a,d+b,1);if(c){this._m521.push(d+b)}else{this._m532.push(d+b)}b+=this._m2(a,d+b,0)}else{b+=this._m2(a,d+b,0)}this._m2(a,d,b);return b},_m933:function(a,c){this._m1133=c;var b=8;this._m11(a,c+4,"moof");b+=this._m762(a,c+b);if(this.type===0){b+=this._m1046(a,c+b,true);b+=this._m1046(a,c+b,false)}this._m2(a,c,b);return b},_m762:function(a,c){var b=8;this._m11(a,c+4,"mfhd");b+=this._m2(a,c+b,0);b+=this._m2(a,c+b,this._m283++);this._m2(a,c,b);return b},_m1046:function(a,d,c){var b=8;this._m11(a,d+4,"traf");b+=this._m1011(a,d+b,c);b+=this._m1150(a,d+b,c);b+=this._m1021(a,d+b,c);this._m2(a,d,b);return b},_m1011:function(a,d,c){var b=8;this._m11(a,d+4,"tfhd");b+=this._m2(a,d+b,131072);b+=this._m2(a,d+b,c?1:2);this._m2(a,d,b);return b},_m1150:function(b,h,g){var d=8;var f=g?this.video:this.audio;this._m11(b,h+4,"tfdt");d+=this._m2(b,h+d,0);var c=f.items.concat();c.sort(function(j,i){return j.timestamp-i.timestamp});var e=c[0].timestamp;var a=Math.ceil(e*f.info.timeScale/1000);d+=this._m2(b,h+d,a);this._m2(b,h,d);return d},_m1021:function(a,g,f){var c=8;var e=f?this.video:this.audio;var b;var d;this._m11(a,g+4,"trun");if(f){c+=this._m2(a,g+c,3589);c+=this._m2(a,g+c,e.items.length);this._m480.push(g+c);c+=this._m2(a,g+c,0);c+=this._m2(a,g+c,33554432);for(b=0;b<e.items.length;b++){d=e.items[b];c+=this._m2(a,g+c,d.data.length);if(d.isKeyFrame===true){c+=this._m2(a,g+c,33554432)}else{c+=this._m2(a,g+c,65536)}c+=this._m2(a,g+c,d.avccTimeOffset)}}else{c+=this._m2(a,g+c,513);c+=this._m2(a,g+c,e.items.length);this._m474.push(g+c);c+=this._m2(a,g+c,0);for(b=0;b<e.items.length;b++){d=e.items[b];c+=this._m2(a,g+c,d.data.length)}}this._m2(a,g,c);return c},_m1044:function(a,d){d+=this._m2(a,d,this.dataSize+8);d+=this._m11(a,d,"mdat");var b,c;for(b=0;b<this.video.items.length;b++){c=this.video.items[b];c.dataOffset=d;d+=this._m432(a,d,c.data)}for(b=0;b<this.audio.items.length;b++){c=this.audio.items[b];c.dataOffset=d;d+=this._m432(a,d,c.data)}return d},_m1280:function(a,c){var b=8;c+=this._m11(a,c+4,"mfra");b+=this._m755(a,c+b,true);b+=this._m755(a,c+b,false);b+=this._m956(a,c+b);this._m2(a,c+b,b);this._m2(a,c,b);return b},_m755:function(b,f,e){var c=8;var d=e?this.video:this.audio;var a=Math.ceil(d.items[0].timestamp*d.info.timeScale/1000);f+=this._m11(b,f+4,"tfra");c+=this._m2(b,f+c,0);c+=this._m2(b,f+c,e?1:2);c+=this._m2(b,f+c,0);c+=this._m2(b,f+c,1);c+=this._m2(b,f+c,a);c+=this._m2(b,f+c,this._m1133);c+=this._m23(b,f+c,1);c+=this._m23(b,f+c,1);c+=this._m23(b,f+c,d.items.length);this._m2(b,f,c);return c},_m956:function(a,c){var b=8;c+=this._m11(a,c+4,"mfro");b+=this._m2(a,c+b,0);b+=this._m2(a,c+b,0);this._m2(a,c,b);return b}});p2p$.ns("$n3");p2p$.$n3.$c51=_m$cde18._m41({_m460:null,_m329:null,_m276:null,_m544:null,_m823:null,_m816:null,_m564:null,_m1292:null,_m142:0,_m362:0,init:function(){this.reset()},reset:function(){this._m544=0;this._m460=new p2p$.$n3.$c24(1024);this._m329=null;this._m276=null;this._m823=[];this._m816=null;this._m564={width:640,height:352,timeScale:1000,duration:0};this._m142=0;this._m362=0},_m969:function(c,b,a){return((c&14)*Math.pow(2,29))+((b&65534)<<14)+((a&65534)>>1)},_m461:function(h,m,q){var t=0;if(h){if(m._m619()!=480){_m$cde5(_m$cde1("tools::ts2mp4::Video::PES start code not found or not AAC/AVC"))}m.position+=3;var f=(m._m55()&192)>>6;if(f!=3&&f!=2){_m$cde5(_m$cde1("tools::ts2mp4::Video::Video PES packet without PTS cannot be decoded, flags: {0}",f))}var e=m._m55();var d=m._m55();var c=m._m80();var b=m._m80();var w=this._m969(d,c,b);this._m142=Math.round(w/90);e-=5;if(f==3){d=m._m55();c=m._m80();b=m._m80();var k=this._m969(d,c,b);this._m362=this._m142-Math.round(k/90);e-=5}else{this._m362=0}m.position+=e}var s=0;if(!q){s=m.position}var j=[];var o=null;if(q){o=new p2p$.$n3.$c35(this._m460);if(o.NALtype()!==0){j.push(o)}this._m460=new p2p$.$n3.$c24(1024)}else{while(m._m813()>0){var r=m._m55();switch(this._m544){case 0:if(r===0){this._m544=1}break;case 1:if(r===0){this._m544=2}else{this._m544=0}break;case 2:if(r===0){break}else{if(r==1){this._m460._m308(m,s,m.position-s);s=m.position;if(this._m460.length>4){this._m460.length-=3;o=new p2p$.$n3.$c35(this._m460);if(o.NALtype()!==0){j.push(o)}}else{}this._m460=new p2p$.$n3.$c24(1024);this._m544=0;break}else{this._m544=0;break}}break;default:this._m544=0;break}}}if(!q&&m.position-s>0){this._m460._m308(m,s,m.position-s)}var a=null;var p=null;for(t=0;t<j.length;t++){o=j[t];switch(o.NALtype()){case 7:a=o;break;case 8:p=o;break;default:break}}var v=null;var l=null;if(a&&p){var u=a.length();var n=p.length();v={};v.timestamp=this._m142;v.isKeyFrame=true;var g=new p2p$.$n3.$c24(1024);g._m395(1);g._m308(a.NALdata(),1,3);g._m395(255);g._m395(225);g._m395(u>>8);g._m395(u);g._m308(a.NALdata(),0,u);g._m395(1);g._m395(n>>8);g._m395(n);g._m308(p.NALdata(),0,n);this._m816=g;this._m1164(a.NALdata(),0,u);v.data=g;l=v}for(t=0;t<j.length;t++){o=j[t];if(o.NALtype()==9){if(this._m329&&this._m276.length===0){if(l){_m$cde5(_m$cde1("tools::ts2mp4::Video::Avccts "+l.timestamp.toString()+" vtagts "+this._m329.timestamp.toString()))}}if(this._m329&&this._m276.length>0){this._m329.data=this._m276;this._m823.push(this._m329);this._m564.duration=this._m564.timeScale*this._m142/1000;if(l){l.timestamp=this._m329.timestamp;l=null}}this._m329={};this._m329.timestamp=this._m142;this._m329.avccTimeOffset=this._m362;this._m276=new p2p$.$n3.$c24(1024);this._m276._m758(o.length());this._m276._m308(o.NALdata())}else{if(o.NALtype()!=7&&o.NALtype()!=8){if(this._m329===null){this._m329={};this._m276=new p2p$.$n3.$c24(1024);this._m329.timestamp=this._m142;this._m329.avccTimeOffset=this._m362}if(o.NALtype()==5){this._m329.isKeyFrame=true}this._m276._m758(o.length());this._m276._m308(o.NALdata())}}}if(q){if(this._m329&&this._m276.length>0){this._m329.data=this._m276;this._m823.push(this._m329);this._m564.duration=this._m564.timeScale*this._m142/1000;if(l){l.timestamp=this._m329.timestamp;l=null}}this._m329=null}return this._m142},_m1164:function(a,c,b){}});p2p$.ns("$n4");p2p$.$n4.$c20=_m$cde18._m41({init:function(){},tidy:function(){},_m967:function(b,c){var e=b._m45();var d=b._m24();var a=b._m33();c._m7.set("p2p",e._m351?"1":"0");c._m7.set("gID",a._m62);c._m7.set("ver",p2p$.$n2.$c46.format("cde.{0}.{1}.{2}",p2p$.$n2.$c43._k12,p2p$.$n2.$c43._k13,p2p$.$n2.$c43._k14));c._m7.set("type",d._m456);c._m7.set("termid",p2p$.$n2.$c46.fromNumber(d._m139));c._m7.set("platid",d._m1001);c._m7.set("splatid",d._m865);c._m7.set("vtype",d._m1047);c._m7.set("vformat",d._m797);c._m7.set("geo",d._m946);if(a._m32!=p2p$.$n2.META_DATA_TYPE._k7){c._m7.set("gdur",p2p$.$n2.$c46.fromNumber(a._m208/1000))}c._m7.set("appid",e._m248);c._m7.set("cdeid",e._m636);c._m7.set("package",e._m282);c._m7.set("streamid",d._m1104);c._m7.set("p-rtmfp",d._m121?"0":"1");c._m7.set("p-cde",d._m48?"0":"1");c._m7.set("p-rtc",d._m72?"0":"1");c._m7.set("r",Math.floor(Math.random()*(1000000+1)));if(d._m364!=""){c._m7.set("p1",d._m364)}if(d._m365!=""){c._m7.set("p2",d._m365)}if(d._m366!=""){c._m7.set("p3",d._m366)}if(d._m1032!=""){c._m7.set("uuid",d._m1032)}if(d._m550!=""){c._m7.set("ch",d._m550)}}});p2p$.ns("$n4");p2p$.$n4.$c17Static={_k82:0,_k71:1,_k55:2,_k61:3,_k99:4,_k58:6,_k68:5,_k47:8,_k49:11,_k81:12};p2p$.$n4.$c17=p2p$.$n4.$c20._m41({_m869:0,_m760:0,_m817:0,_m966:"",_m705:0,init:function(){this._m869=0;this._m760=0;this._m817=0;this._m705=0;this._m966=""},tidy:function(){this._super();this._m869=0;this._m760=0;this._m817=0;this._m705=0},_m967:function(a,b){this._super(a,b);b._m429="/ClientStageInfo";b._m7.set("act",p2p$.$n2.$c46.fromNumber(this._m869));b._m7.set("err",p2p$.$n2.$c46.fromNumber(this._m760));b._m7.set("utime",p2p$.$n2.$c46.fromNumber(this._m817));b._m7.set("ip",this._m966);b._m7.set("port",p2p$.$n2.$c46.fromNumber(this._m705))}});p2p$.ns("$n4");p2p$.$n4.$c10=p2p$.$n4.$c20._m41({_m1014:false,_m347:0,_m479:0,_m172:0,_m236:0,_m220:0,_m194:0,_m271:0,_m141:0,_m191:0,_m175:0,_m152:0,_m639:0,_m164:0,_m218:0,_m211:0,_m176:0,_m449:0,_m343:0,_m255:0,_m197:0,_m529:0,_m399:0,_m475:0,_m376:0,_m345:0,_m285:0,_m431:0,_m350:0,_m525:0,_m392:0,_m375:0,_m301:0,_m481:0,_m377:0,_m779:"",_m540:0,_m1099:"",_m786:0,_m821:"",_m756:0,_m1120:"",_m1066:0,_m406:0,_m312:0,_m372:0,_m334:0,_m346:0,_m299:0,_m235:0,_m380:0,_m264:0,_m414:false,_m704:false,_m205:0,_m856:0,init:function(){this._m540=0;this._m786=0;this._m414=false;this._m205=0;this._m856=p2p$.$n2.$c47._m9();this.tidy();this._m647()},tidy:function(){this._super();this._m704=true;this._m1014=true;this._m347=0;this._m479=0;this._m172=0;this._m236=0;this._m220=0;this._m194=0;this._m271=0;this._m141=0;this._m191=0;this._m175=0;this._m152=0;this._m639=0;this._m164=0;this._m218=0;this._m211=0;this._m176=0;this._m406=0;this._m312=0;this._m372=0;this._m334=0;this._m346=0;this._m299=0;this._m235=0;this._m380=0;this._m264=0},_m647:function(){this._m449=0;this._m343=0;this._m255=0;this._m197=0;this._m529=0;this._m399=0;this._m475=0;this._m376=0;this._m345=0;this._m285=0;this._m431=0;this._m350=0;this._m525=0;this._m392=0;this._m375=0;this._m301=0;this._m481=0;this._m377=0},_m967:function(a,b){var c=a._m24();this._super(a,b);var d=0;if(!c._m48){d=c._m665?1:2}b._m429="/ClientTrafficInfo";b._m7.set("play",this._m1014?"1":"0");b._m7.set("csize",p2p$.$n2.$c46.fromNumber(this._m347));b._m7.set("dsize",p2p$.$n2.$c46.fromNumber(this._m172));b._m7.set("tsize",p2p$.$n2.$c46.fromNumber(this._m236));b._m7.set("bsize",p2p$.$n2.$c46.fromNumber(this._m220));b._m7.set("msize",p2p$.$n2.$c46.fromNumber(this._m194));b._m7.set("dnode",this._m343<0?"-1":p2p$.$n2.$c46.fromNumber(this._m343));b._m7.set("lnode",this._m449<0?"-1":p2p$.$n2.$c46.fromNumber(this._m449));b._m7.set("dnode-cde",this._m197<0?"-1":p2p$.$n2.$c46.fromNumber(this._m197));b._m7.set("lnode-cde",this._m255<0?"-1":p2p$.$n2.$c46.fromNumber(this._m255));b._m7.set("dnode-rtc",this._m197<0?"-1":p2p$.$n2.$c46.fromNumber(this._m399));b._m7.set("lnode-rtc",this._m255<0?"-1":p2p$.$n2.$c46.fromNumber(this._m529));b._m7.set("gip",this._m779);b._m7.set("gport",p2p$.$n2.$c46.fromNumber(this._m540));b._m7.set("rip",this._m1099);b._m7.set("rport",p2p$.$n2.$c46.fromNumber(this._m786));b._m7.set("gip",this._m821);b._m7.set("gport",p2p$.$n2.$c46.fromNumber(this._m756));b._m7.set("upnp",p2p$.$n2.$c46.fromNumber(d));b._m7.set("up-rtmfp",p2p$.$n2.$c46.fromNumber(this._m406));b._m7.set("up-cde",p2p$.$n2.$c46.fromNumber(this._m312));b._m7.set("up-rtc",p2p$.$n2.$c46.fromNumber(this._m372));b._m7.set("dsize-cde",p2p$.$n2.$c46.fromNumber(this._m141));b._m7.set("tsize-cde",p2p$.$n2.$c46.fromNumber(this._m191));b._m7.set("bsize-cde",p2p$.$n2.$c46.fromNumber(this._m175));b._m7.set("msize-cde",p2p$.$n2.$c46.fromNumber(this._m152));b._m7.set("dsize-rtc",p2p$.$n2.$c46.fromNumber(this._m164));b._m7.set("tsize-rtc",p2p$.$n2.$c46.fromNumber(this._m218));b._m7.set("bsize-rtc",p2p$.$n2.$c46.fromNumber(this._m211));b._m7.set("msize-rtc",p2p$.$n2.$c46.fromNumber(this._m176));b._m7.set("chk0",p2p$.$n2.$c46.fromNumber(this._m334));b._m7.set("chk1",p2p$.$n2.$c46.fromNumber(this._m264));b._m7.set("chk2",p2p$.$n2.$c46.fromNumber(this._m346));b._m7.set("chk3",p2p$.$n2.$c46.fromNumber(this._m299));b._m7.set("chk4","0");b._m7.set("chk5",p2p$.$n2.$c46.fromNumber(this._m235))},_m829:function(a,e,f,d){if(typeof d=="undefined"){d=true}var c=a._m24();if(this._m704){this._m647();this._m704=false}this._m414=true;this._m205=p2p$.$n2.$c47._m9();switch(e){case p2p$.$n8.PROTOCOL_TYPES._k5:this._m392++;this._m376+=f;this._m343=c._m815==""?-1:(this._m376/this._m392);break;case p2p$.$n8.PROTOCOL_TYPES._k3:this._m301++;this._m285+=f;this._m197=c._m85<=0?-1:(this._m285/this._m301);break;case p2p$.$n8.PROTOCOL_TYPES._k2:this._m377++;this._m350+=f;this._m399=c._m112<=0?-1:(this._m350/this._m377);break;default:break}var b=0;switch(e){case p2p$.$n8.PROTOCOL_TYPES._k5:b=c._m470;break;case p2p$.$n8.PROTOCOL_TYPES._k3:b=c._m105;break;case p2p$.$n8.PROTOCOL_TYPES._k2:b=c._m155;break;default:break}this._m1144(a,e,b)},_m1144:function(a,b,c){this._m414=true;this._m205=p2p$.$n2.$c47._m9();switch(b){case p2p$.$n8.PROTOCOL_TYPES._k5:this._m525++;this._m475+=c;this._m449=this._m475/this._m525;break;case p2p$.$n8.PROTOCOL_TYPES._k3:this._m375++;this._m345+=c;this._m255=this._m345/this._m375;break;case p2p$.$n8.PROTOCOL_TYPES._k2:this._m481++;this._m431+=c;this._m529=this._m431/this._m481;break;default:break}},_m1026:function(a,d,e,c,b){if(c<=0){return}if(typeof b=="undefined"){b=true}this._m414=true;this._m205=p2p$.$n2.$c47._m9();switch(d){case p2p$.$n8.PROTOCOL_TYPES._k8:this._m347+=c;break;case p2p$.$n8.PROTOCOL_TYPES._k5:this._m479+=c;switch(e){case p2p$.$n8.TERMINAL_TYPES._k20:this._m172+=c;break;case p2p$.$n8.TERMINAL_TYPES._k19:this._m236+=c;break;case p2p$.$n8.TERMINAL_TYPES._k18:this._m220+=c;break;case p2p$.$n8.TERMINAL_TYPES._k11:this._m194+=c;break;default:this._m172+=c;break}break;case p2p$.$n8.PROTOCOL_TYPES._k3:this._m271+=c;switch(e){case p2p$.$n8.TERMINAL_TYPES._k20:this._m141+=c;break;case p2p$.$n8.TERMINAL_TYPES._k19:this._m191+=c;break;case p2p$.$n8.TERMINAL_TYPES._k18:this._m175+=c;break;case p2p$.$n8.TERMINAL_TYPES._k11:this._m152+=c;break;default:this._m141+=c;break}break;case p2p$.$n8.PROTOCOL_TYPES._k2:this._m639+=c;switch(e){case p2p$.$n8.TERMINAL_TYPES._k20:this._m164+=c;break;case p2p$.$n8.TERMINAL_TYPES._k19:this._m218+=c;break;case p2p$.$n8.TERMINAL_TYPES._k18:this._m211+=c;break;case p2p$.$n8.TERMINAL_TYPES._k11:this._m176+=c;break;default:this._m164+=c;break}break;default:break}},_m1101:function(a,d,e,c,b){if(c<=0){return}if(typeof b=="undefined"){b=true}this._m414=true;this._m205=p2p$.$n2.$c47._m9();switch(d){case p2p$.$n8.PROTOCOL_TYPES._k5:this._m406+=c;break;case p2p$.$n8.PROTOCOL_TYPES._k3:this._m312+=c;break;case p2p$.$n8.PROTOCOL_TYPES._k2:this._m372+=c;break;default:break}},_m940:function(b,d,e,a,c){this._m334+=e;this._m205=p2p$.$n2.$c47._m9();if(typeof c=="undefined"){c=true}switch(d){case p2p$.$n8.PROTOCOL_TYPES._k8:this._m346+=a;break;case p2p$.$n8.PROTOCOL_TYPES._k5:this._m299+=a;break;case p2p$.$n8.PROTOCOL_TYPES._k3:this._m235+=a;break;case p2p$.$n8.PROTOCOL_TYPES._k2:this._m380+=a;break;default:this._m264+=a;break}},flush:function(a,b){if(!this._m414){return}a._m963(this);this.tidy()}});p2p$.ns("$n4");p2p$.$n4.$c14=_m$cde18._m41({_m34:null,_m66:null,_m8:null,_m3:null,_m193:null,_m77:null,_m911:"",init:function(c,b,a){this._m66=c;this._m3=a;this._m8=b;this._m911="http://"+c._m568("s.webp2p.letv.com");this._m193=[]},_m430:function(a){var b=this;this._m34=setTimeout(function(){b._m1079()},a)},_m597:function(){if(this._m77!=null||this._m193.length==0){return}if(this._m34){clearTimeout(this._m34);this._m34=null}this._m430(10*1000);var a=this._m193[0];this._m193.shift();var b;if(a.indexOf("http://")==0){b=a}else{b=this._m911+a}_m$cde5(_m$cde1("tools::collector::ReportClient::Send report, {0} pending item(s) to url({1})",this._m193.length,b));this._m77=new p2p$.$n1.$c7(b,this,"GET","text","collector::report");this._m77.load()},_m1079:function(){this._m77=null;this._m597()},_m106:function(a){if(this._m77!=a){_m$cde5(_m$cde1("tools::collector::ReportClient::expired http complete for tag({0}), channel({1}), ignore",a._m294,this._m3._m75));return true}this._m77=null;if(this._m34){clearTimeout(this._m34);this._m34=null}_m$cde5(_m$cde1("tools::collector::ReportClient::Report complete for tag({0}), channel({1}), url({2}), response code({3}), details({4}), size({5})",a._m294,this._m3._m75,a._m124,a._m40,a._m468,a._m35.length));this._m597();return true},_m45:function(){return this._m66},_m24:function(){return this._m8},_m33:function(){return this._m3},_m144:function(a){return true},exit:function(){if(this._m34){clearTimeout(this._m34);this._m34=null}if(this._m77!=null){this._m77=null}this._m193=[]},_m790:function(b){var a=new p2p$.$n1.$c58();b._m967(this,a);var c="";if(a._m7.find("act")){c=a._m7.get("act");a._m7.erase("act")}this._m193.push(a._m429+"?act="+c+a._m693(false));this._m597();return true},_m963:function(b){var a=new p2p$.$n1.$c58();b._m967(this,a);this._m193.push(a._m429+a._m693());this._m597()},_m1238:function(b){var a=new p2p$.$n1.$c58();b._m967(this,a);this._m193.push(a.toString());this._m597()},_m184:function(e,f,a,c){var b=new p2p$.$n4.$c17();var g=a.split(" ");var d="";if(g.length==1){d=g[0].split(":")}else{d=g[1].split(":")}b._m869=e;b._m760=f;b._m817=c;b._m966=d[0];b._m705=d.length==1?80:d[1];return this._m790(b)}});p2p$.ns("$n4");p2p$.$n4.$c8={_k36:0,_k31:1,_k46:2,_m126:0,_m335:5,_m695:0,_m321:0,_m320:0,_m318:0,_m363:0,_m658:0,_m340:0,_m546:false,_m1000:"/cde-console-connection",_m883:"",_m528:"",_m140:"",_m256:"",_m446:null,_m162:null,_m203:false,_m34:null,_m390:null,_m245:null,init:function(){if(this._m203){return}this._m203=true;var a=p2p$.$n1.$c23;this._m883="ws://"+a._m568("log.cde.letv.com")+this._m1000;this._m162=new p2p$.$n2.$c60();this._m162.set("needLogPipe",true);this._m162.set("logPipeLevel",255);this._m162.set("logPipeLimit",10000);this._m162.set("segmentStartWithPlayer",1)},open:function(b,c){this.init();if(!this._m446){this._m446={}}p2p$.$n5.$c50.apply(this._m446,b||{});if(this._m245){var a=p2p$.$n2.$c47._m9();if(this._m126==p2p$.$n2.ERROR_CODE._k4&&this._m318+30*1000>a){this._m939(c);this._m266();return true}}this.close(true);this._m939(c);this._m1151(this._m883)},close:function(a){if(this._m34){clearTimeout(this._m34);this._m34=null}if(this._m245){try{this._m245.close()}catch(b){}this._m245=null}this._m140="";if(a){this._m390=null}},_m939:function(a){if(!a){return}if(!this._m390){this._m390=[]}this._m390.push(a)},_m266:function(){for(var a=0;this._m390&&a<this._m390.length;a++){var b=this._m390[a];if(typeof(b)=="function"){b.call(this,this._m126,this._m256)}else{if(b&&b.fn){b.fn.apply(b.scope||this,(b.params||[]).concat([this._m126,this._m256]))}}}this._m390=null},_m635:function(a){if(this._m34){clearTimeout(this._m34);this._m34=null}var b=this;switch(a){case this._k36:this._m34=setTimeout(function(){b._m1027()},Math.max(this._m335,1)*1000);break;case this._k31:this._m34=setTimeout(function(){b._m1043()},10);break;case this._k46:this._m34=setTimeout(function(){b._m949()},10);default:break}},_m1027:function(){if(!this._m245){return}this._m944();this._m635(this._k36)},_m1043:function(){this.close(true)},_m949:function(){this.close(false);var a=this._m528+this._m1000;_m$cde5(_m$cde1("tools::collector::SupportSession::Redirect {0} times to open({1}) ...",this._m695,a));this._m1151(a)},_m1151:function(a){this._m363=0;this._m658=0;this._m340=0;this._m546=false;try{this._m245=new WebSocket(a)}catch(c){_m$cde15(_m$cde1("tools::collector::SupportSession::Open websocket failed: {0}",(c||"").toString()));this._m126=p2p$.$n2.ERROR_CODE._k44;this._m266();return}this._m318=p2p$.$n2.$c47._m9();var b=this;this._m245.onopen=function(d){b._m367(d)};this._m245.onclose=function(d){b._m185(d)};this._m245.onerror=function(d){b._m185(d)};this._m245.onmessage=function(e){var d=new FileReader();d.onload=function(){b._m291(new Uint8Array(this.result))};d.readAsArrayBuffer(e.data)}},_m367:function(b){_m$cde5(_m$cde1("tools::collector::SupportSession::Socket client open ok"));if(!this._m245){_m$cde5(_m$cde1("tools::collector::SupportSession::Socket client opened bu session closed"));return}var c=p2p$.$n1.$c23;this._m318=p2p$.$n2.$c47._m9();var a={};a.action="createSessionRequest";a.deviceMac="";a.deviceIp=c._m316;a.clientTime=Math.floor(new Date().getTime()/1000);a.clientVersion=c._m213;a.appId=c._m248;a.appVersion=c._m680;a.appChannel=c._m679;a.appPackageName=c._m282;a.hardwareType=c._m145;a.softwareType=c._m332;a.geo=c._m645;a.geoName=c._m436;a.contact=this._m446.contact||"";a.remarks=this._m446.remarks||"";var d=this._m857(JSON.stringify(a),"");this._m546=true;this._m245.send(d);return true},_m1224:function(a){if(!this._m245){return}this._m126=p2p$.$n2.ERROR_CODE._k30;this._m266();this._m635(this._k31);return true},_m291:function(a){this._m546=false;if(!this._m245){return}this._m318=p2p$.$n2.$c47._m9();a=this._m1093(a);if(!a){__ULOG_ERROR(_m$cde1("tools::collector::SupportSession","Decode socket message failed, size({0})"),size);this._m126=p2p$.$n2.ERROR_CODE._k23;this._m266();return}var c=a.params||{};if(c.serverTime){this._m321=c.serverTime}if(c.expireTime){this._m320=c.expireTime}if(c.reportInterval){this._m335=c.reportInterval}if(this._m335<=0){this._m335=5}var b=c.action||"";if(b=="createSessionResponse"){this._m126=c.errorCode||0;this._m528=c.redirectTo||"";this._m140=c.sessionId||"";this._m256=this._m140;if(this._m256){while(this._m256.length<10){this._m256="0"+this._m256}}_m$cde5(_m$cde1("tools::collector::SupportSession::Create socket session responsed, code({0}), redirect({1}), session id({2}), server time({3}), expire time({4}), interval({5} sec)",this._m126,this._m528,this._m140,p2p$.$n2.$c46._m503(this._m321*1000,"yyyy-M-d h:m:s"),p2p$.$n2.$c46._m503(this._m320*1000,"yyyy-M-d h:m:s"),this._m335));if(this._m528){if(this._m695>5){this._m126=p2p$.$n2.ERROR_CODE._k23;this._m266();this._m635(this._k31);return}this._m695++;this._m635(this._k46);return}this._m266();if(this._m340<=0){this._m635(this._k36);this._m944()}}else{if(b=="reportLogResponse"){}else{_m$cde5(_m$cde1("tools::collector::SupportSession::Socket message action({0}) not support yet",b));return}}if(this._m320<this._m321){this._m635(this._k31);_m$cde5(_m$cde1("tools::collector::SupportSession::Session expired, close from action({0})",b))}},_m185:function(){if(!this._m245){return}_m$cde5(_m$cde1("tools::collector::SupportSession::Socket client closed"));if(!this._m140){this._m126=p2p$.$n2.ERROR_CODE._k30;this._m266()}this.close(true);return true},_m944:function(){if(!this._m245||this._m546){return}var c={};this._m162.set("logPipeTime",this._m363);if(!window.pako&&window.pako.gzip){this._m162.set("ignoreChannels",true);this._m162.set("logPipeLimit",30)}else{this._m162.set("logPipeLimit",300)}this._m363=p2p$.$n15.$c18._m791(this._m162,c,this._m363);var b={};b.action="reportLogRequest";b.contentEncoding="none";b.clientTime=Math.floor(new Date().getTime()/1000);var g=JSON.stringify(c);var l=g.length;if(window.pako&&window.pako.gzip){var h=this._m552(g);var k=window.pako.gzip(h);if(k){g=k;b.contentEncoding="gzip"}}if(b.contentEncoding=="none"){var a=1024*60;if(g.length>a){g=g.substr(0,a)}}this._m658=new Date().getTime();this._m340++;var f=this._m857(JSON.stringify(b),g);this._m546=true;this._m245.send(f);try{var d=p2p$.$n2.$c59._m244._m420.length;var i=this._m320-this._m321;console.log("CDE: Support submit "+this._m340+" times, "+c.logs.length+"/"+d+" logs, "+g.length+"/"+l+"/"+f.size+" bytes, "+i+"s left ...")}catch(j){}},_m552:function(f){var b=new Uint8Array(f.length*3);var h=0;for(var e=0;e<f.length;e++){var g=f.charCodeAt(e);var d,c,a;if(g<=127){d=g>>0&127|0;b[h++]=d}else{if(g>=128&&g<=2047){d=g>>6&31|192;c=g>>0&63|128;b[h++]=d;b[h++]=c}else{d=g>>12&15|224;c=g>>6&63|128;a=g>>0&63|128;b[h++]=d;b[h++]=c;b[h++]=a}}}return b.subarray(0,h)},_m857:function(e,a){var d=0;e=this._m552(e);if(typeof(a)=="string"){a=this._m552(a)}var b=new Uint8Array(8+e.length+a.length);b[d]=(e.length>>24)&255;b[d+1]=(e.length>>16)&255;b[d+2]=(e.length>>8)&255;b[d+3]=e.length&255;d+=4;for(var c=0;c<e.length;c++){b[d+c]=e[c]}d+=e.length;b[d]=(a.length>>24)&255;b[d+1]=(a.length>>16)&255;b[d+2]=(a.length>>8)&255;b[d+3]=a.length&255;d+=4;for(var c=0;c<a.length;c++){b[d+c]=a[c]}d+=a.length;return new Blob([b])},_m1093:function(data){var result={params:null,body:null};var offset=0;if(offset+4>data.length){return result}var paramSize=(data[offset]<<24)+(data[offset]<<16)+(data[offset]<<8)+data[offset+3];offset+=4;if(offset+paramSize>data.length){return result}var paramsData="";for(var i=0;i<paramSize;i++){paramsData+=String.fromCharCode(data[offset+i])}offset+=paramSize;try{result.params=eval("("+paramsData+")")}catch(e){_m$cde15(_m$cde1("tools::collector::SupportSession::Decode message failed, json invalid: {0}",paramsData))}if(offset+4>data.length){return offset}var bodySize=(data[offset]<<24)+(data[offset]<<16)+(data[offset]<<8)+data[offset+3];if(offset+bodySize>data.length){return offset}if(bodySize>0){result.body=new Uint8Array(data,offset,bodySize)}offset+=bodySize;return result}};_m$cde18.apply(p2p$.$n1.$c4,{_m65:function(a){a.drmEnabled=this._m834;a.geo=this._m946;a.geoName=this._m795;a.clientIp=this._m316;a.gslbServerIp=this._m1123;a.metaServerIp=this._m729;a.deviceType=this._m145;a.osType=this._m332;a.statReportInterval=this._m289;a.specialPlayerTimeOffset=this._m86;a.specialPlayerTimeLimit=this._m113;a.liveStorageMemoryOnly=this._m143;a.vodStorageMemoryOnly=this._m154;a.downloadSpeedRatio=this._m129;a.p2pPeerId=this._m1190;a.p2pRtmfpPeerId=this._m815;a.p2pWebsocketPeerId=this._m675;a.p2pWebrtcPeerId=this._m774;a.p2pFetchRate=this._m488;a.p2pMaxPeers=this._m323;a.p2pUrgentSize=this._m89;a.p2pUploadEnabled=this._m151;a.p2pUploadLimit=this._m526;a.p2pUploadThrottleInit=this._m304;a.p2pUploadThrottleAverage=this._m262;a.p2pUploadMaxReserved=this._m330;a.p2pUrgentUploadEnabled=this._m214;a.p2pShareRangeInterval=this._m147;a.p2pMaxParallelRequestPieces=this._m157;a.p2pMaxUrgentRequestPieces=this._m174;a.cdnSlowThresholdRate=this._m327;a.cdnDisabled=this._m942;a.cdnMultiRequest=this._m296;a.cdnMultiMaxHost=this._m485;a.cdnStartTime=this._m909;a.playingPosition=this._m370;a.selectorServerHost=this._m373;a.gatherServerHost=this._m274;a.rtmfpServerHost=this._m781;a.trackerServerHost=this._m246;var b=new p2p$.$n1.$c58();b._m108(this._m115);a.webrtcServerHost=b._m201+":"+b._m161;a.protocolCdnDisabled=this._m265;a.protocolRtmfpDisabled=this._m121;a.protocolWebsocketDisabled=this._m48;a.protocolWebrtcDisabled=this._m72;a.selectorConnectedTime=this._m232;a.rtmfpServerConnectedTime=this._m196;a.webrtcServerConnectedTime=this._m112;a.gatherServerConnectedTime=this._m486;a.trackerServerConnectedTime=this._m85;a.cdnTotalNodeCount=this._m547;a.rtmfpTotalNodeCount=this._m470;a.webrtcTotalNodeCount=this._m155;a.websocketTotalNodeCount=this._m105;a.upnpMapCompleteTime=this._m667;a.upnpMapSuccess=this._m665;a.upnpMappedInPort=this._m740;a.upnpMappedOutPort=this._m719;a.upnpMappedAddress=this._m938}});p2p$.$n1.$c23._m65=function(a){a.debug=this._m867;a.p2pEnabled=this._m351;a.p2pUploadEnabled=this._m151;a.rtlStreamEnabled=this._m739;a.liveStorageMemoryOnly=this._m143;a.vodStorageMemoryOnly=this._m154;a.networkType=this._m534;a.externalAppId=this._m248;a.externalAppVersion=this._m680;a.externalAppChannel=this._m679;a.externalAppPackageName=this._m282;a.moduleVersion=this._m213;a.moduleId=this._m636;a.clientGeo=this._m645;a.clientGeoName=this._m436;a.clientIp=this._m316;a.deviceType=this._m145;a.osType=this._m332;a.rootDomain=this._m1161;a.globalProxyUrl=this._m1075;a.defaultGslbTss=this._m818;a.defaultGslbM3v=this._m819;a.hlsServerPort=this._m862;a.livePlayOffset=this._m95;a.specialPlayerTimeOffset=this._m86;a.specialPlayerTimeLimit=this._m113;a.downloadSpeedRatio=this._m129;a.customContextParams=this._m471;a.customMediaParams=this._m723;a.protocolCdnDisabled=this._m265;a.protocolRtmfpDisabled=this._m121;a.protocolWebsocketDisabled=this._m48;a.protocolWebrtcDisabled=this._m72};_m$cde18.apply(p2p$.$n1.$c32,{_m65:function(b,e,d,p){var f=d.incompleteOnly;p.updateTime=this._m205;p.segmentCount=this._m6.length;p.directCount=this._m777;p.pieceCount=this._m188.length+this._m187.length;p.tnPieceCount=this._m188.length;p.pnPieceCount=this._m187.length;p.p2pGroupId=this._m62;p.directDuration=this._m653;p.targetDuration=this._m649;p.totalGapDuration=this._m747;p.segmentFirstId=(this._m6.length>0)?this._m6[0].id_:0;p.segmentLastId=(this._m6.legnth>0)?this._m6[this._m6.length-1].id_:0;p.rangeParamsSupported=this._m132;p.verifyMethod=this._m338;var i=0;var a=0;var o=0;var h=0;var m=p.segments=[];for(var c=0,g=0;c<this._m6.length;c++){var k=this._m6[c];if(f&&k._m26>0){continue}if(b>=0&&k.id_<b){continue}if(e>0&&a>=e*1000){break}var l=m[g++]={};k._m65(l);i++;a+=k._m50;if(k._m26>0){o++}else{if(k._m119>0){h++}}}p.segmentDisplayCount=i;p.segmentDisplayDuration=a;p.segmentCompletedCount=o;p.segmentCompletingCount=h}});_m$cde18.apply(p2p$.$n1.$c16,{_m65:function(a){a.id=this.id_;a.index=this._m344;a.duration=this._m50;a.url=this._m42;a.pieceCount=this._m28.length;a.pieceTnCount=this._m605;a.piecePnCount=this._m487;a.size=this._m49;a.startTime=this._m39;a.startTimeActual=this._m358;a.lastActiveTime=this._m671;a.completedTime=this._m26;a.completedPieceCount=this._m119;a.completedSize=this._m249;a.startReceiveTime=this._m117;a.lastReceiveTime=this._m242;a.receiveSpeed=this._m727;a.beginOfMeta=this._m673;a.discontinuity=this._m295;var d=0;var b=a.pieces=[];for(var f=0;f<this._m28.length;f++){var c=this._m28[f];if(c._m26<=0&&c._m27>0){d++}var e=b[f]={};c._m65(e)}a.pendingPieceCount=d}});_m$cde18.apply(p2p$.$n1.$c27,{_m65:function(a){a.id=this.id_;a.index=this._m344;a.type=this._m32;a.offset=this._m273;a.size=this._m49;a.wild=this._m1184;a.checksum=this._m131;a.transferDepth=this._m859;a.shareInRanges=this._m355;a.receiveProtocol=this._m620;a.receiveByStable=this._m98;a.receiveStartTime=this._m27;a.playedTime=this._m703;a.completedTime=this._m26}});_m$cde18.apply(p2p$.$n12.$c2,{_m65:function(g,q){var b=g.get("simple");var p=g.get("gslb");var j=g.get("segmentStartWithPlayer")=="1";var h=g.get("maxDuration");if(j&&h<=0){h=300}q.id=this.id_;q.type=this._m87();q.opened=this._m78;q.paused=this._m565;q.groupType=this._m900;q.redirectMode=this._m608;q.directMetaMode=this._m69;q.playerHistoryKey=this._m743;q.icpCode=this._m896;q.channelUrl=this._m3._m353;q.channelPlayUrl=p2p$.$n2.$c46.format("/play?debug={0}&mcdn={1}&enc=base64&ext=m3u8&url={2}",this._m8._m867?1:0,this._m8._m296?1:0,p2p$.$n2.$c46._m1065(p2p$.$n2.$c46._m1118(this._m3._m353)));q.gslbRequestUrl=this._m331;q.gslbEncryptUrl=this._m519;q.createTime=this._m263;q.openTime=this._m950;q.activeTime=this._m17;q.urlTagTime=this._m848;q.gslbTryTimes=this._m385;q.metaTryTimes=this._m138;q.gslbServerResponseCode=this._m215;q.gslbServerErrorCode=this._m71;q.gslbServerErrorDetails=this._m382;q.checksumServerResponseCode=this._m315;q.metaServerResponseCode=this._m167;q.channelOpenedTime=this._m407;q.maxSleepTime=this._m601;q.playerFlushTime=this._m784;q.playerFlushInterval=this._m651;q.playerFlushMaxInterval=this._m571;q.playerInitialPosition=this._m592;q.playerSkipPosition=this._m507;q.playerSkipDuration=this._m685;q.playerSkipBeginSegmentId=this._m1132;q.playerSkipEndSegmentId=this._m1156;q.playerSegmentId=this._m768;q.urgentSegmentId=this._m30;q.urgentSegmentEndId=this._m70;q.urgentIncompleteCount=this._m68;q.otherPeerRequestCount=this._m311;q.completedSegmentId=this._m288;q.downloadedRate=this._m221._m379;q.downloadedDuration=this._m221._m513;q.mediaStartTime=this._m531;q.metaResponseCode=this._m427;q.metaResponseDetails=this._m904;q.metaResponseType=this._m989;q.peerReceiveTimeout=this._m225;q.gslbReloadInterval=this._m224*1000;q.gslbLoadTime=this._m491;q.gslbReloadTimes=this._m237;q.gslbConsumedTime=this._m588;q.checksumLoadTime=this._m754;q.metaLoadTime=this._m489;q.metaReloadTimes=this._m237;q.selfRanges=this._m300;if(p){q.gslbData=this._m8._m400}if(b){return}var i=q.context={};this._m8._m65(i);var a=q.statData={};this._m221._m65(a);var o=q.metaData={};this._m3._m65(j?this._m30:-1,h,g,o);var e=q.reportTraffic={};this._m96._m65(e);var k=q.stablePeers=[];for(var d=0;d<this._m58.length;d++){var l=this._m58[d];var c=k[d]={};l._m65(c)}var m=q.otherPeers=[];for(var d=0;d<this._m67.length;d++){var l=this._m67[d];var f=m[d]={};l._m65(f)}}});_m$cde18.apply(p2p$.$n12.$c1,{_m65:function(f,c){var b=c.manager={};b.defaultMultiMode=this._m741;b.channelCapacity=this._m794;b.downloadCapacity=this._m750;b.downloadParallelCount=this._m591;var d=c.channels=[];for(var g=0;g<this._m91.length;g++){var e=this._m91.element(g).value;var a=d[g]={};e._m65(f,a)}}});_m$cde18.apply(p2p$.$n12.$c15,{_m65:function(a){a.name=this._m29._m769();a.type=this._m29._m1157()._m87();a.remoteId=this._m29._m435();a.remoteAddress=this._m29._m134();a.remoteType=this._m29._m1094();a.lastReceiveSpeed=this._m12;a.lastReceiveTime=this._m242;a.lastSendTime=this._m726;a.pendingRequestCount=this._m36;a.totalReceiveBytes=this._m51;a.totalReceivePieces=this._m186;a.totalSendBytes=this._m160;a.totalSendPieces=this._m243;a.totalChecksumErrors=this._m472;a.totalInvalidErrors=this._m290;a.totalSendRanges=this._m615;a.totalSendRequests=this._m391;a.totalSendResponses=this._m512;a.totalReceiveRanges=this._m506;a.totalReceiveRequests=this._m443;a.totalReceiveResponses=this._m302;a.selfRanges=this._m300}});_m$cde18.apply(p2p$.$n12.$c36,{_m65:function(a){a.totalSendPieces=this._m243;a.totalSendBytes=this._m160;a.actualSendPieces=this._m428;a.actualSendBytes=this._m610;a.totalReceivePieces=this._m186;a.totalReceiveBytes=this._m51;a.actualReceivePieces=this._m464;a.actualReceiveBytes=this._m378;a.urgentReceiveBytes=this._m287;a.lastReceiveBytes=this._m342;a.shareSendRatio=this._m527;a.shareReceiveRatio=this._m537;a.avgSendSpeed=this._m733;a.avgReceiveSpeed=this._m614;a.urgentReceiveSpeed=this._m379;a.lastReceiveSpeed=this._m12;a.restrictedSendSpeed=this._m670;a.totalReceiveDuration=this._m453;a.downloadedDuration=this._m513;a.totalPlayedBytes=this._m582;a.totalPlayedPieces=this._m538;a.totalPlayedDuration=this._m473;var e=a.protocols=[];var b=p2p$.$n8.PROTOCOL_TYPES;for(var d=b._k38+1;d<b._k27;d++){var c=e[d]={};c.totalSendPieces=this._m229[d];c.totalSendBytes=this._m319[d];c.totalReceivePieces=this._m229[d];c.totalReceiveBytes=this._m130[d];c.shareSendRatio=this._m130[d]>0?(this._m319[d]/this._m130[d]):0;c.shareReceiveRatio=this._m51>0?(this._m130[d]/this._m51):0}}});_m$cde18.apply(p2p$.$n4.$c10,{_m65:function(a){a.playing=this._m1014;a.downloadSizeFromCdn=this._m347;a.downloadSizeByRtmfp=this._m479;a.downloadSizeByRtmfpFromPc=this._m172;a.downloadSizeByRtmfpFromTv=this._m236;a.downloadSizeByRtmfpFromBox=this._m220;a.downloadSizeByRtmfpFromMobile=this._m194;a.downloadSizeByWebsocket=this._m271;a.downloadSizeByWebsocketFromPc=this._m141;a.downloadSizeByWebsocketFromTv=this._m191;a.downloadSizeByWebsocketFromBox=this._m175;a.downloadSizeByWebsocketFromMobile=this._m152;a.downloadSizeByWebrtc=this._m271;a.downloadSizeByWebrtcFromPc=this._m164;a.downloadSizeByWebrtcFromTv=this._m218;a.downloadSizeByWebrtcFromBox=this._m211;a.downloadSizeByWebrtcFromMobile=this._m176;a.avgRtmfpNodes=this._m449;a.avgRtmfpSessions=this._m343;a.avgWebSocketNodes=this._m255;a.avgWebSocketSessions=this._m197;a.avgWebrtcNodes=this._m529;a.avgWebrtcSessions=this._m399;a.totalRtmfpNodes=this._m475;a.totalRtmfpSessions=this._m376;a.totalWebSocketNodes=this._m345;a.totalWebSocketSessions=this._m285;a.totalWebrtcNodes=this._m431;a.totalWebrtcSessions=this._m350;a.rtmfpNodeTimes=this._m525;a.rtmfpSessionTimes=this._m392;a.webSocketNodeTimes=this._m375;a.webSocketSessionTimes=this._m301;a.webrtcNodeTimes=this._m481;a.webrtcSessionTimes=this._m377;a.uploadSizeByRtmfp=this._m406;a.uploadSizeByWebsocket=this._m312;a.uploadSizeByWebrtc=this._m372;a.checksumSuccessCount=this._m334;a.checksumErrorsByCdn=this._m346;a.checksumErrorsByRtmfp=this._m299;a.checksumErrorsByWebsocket=this._m235;a.checksumErrorsByWebrtc=this._m380;a.checksumErrorsByUnknown=this._m264;a.updated=this._m414;a.nodesReset=this._m704;a.updateTime=this._m205;a.lastFlushTime=this._m856}});if(p2p$.$n4.$c8){p2p$.$n4.$c8._m65=function(a){a.errorCode=this._m126;a.serviceNumber=this._m256;a.sessionActiveTime=this._m318;a.sessionServerTime=this._m321;a.sessionExpireTime=this._m320;a.reportInterval=this._m335;a.lastPipeLogTime=this._m363;a.lastSubmitTime=this._m658;a.totalSubmitTimes=this._m340}}p2p$.ns("$n9");p2p$.$n9.$c53={_m386:0,_m1020:1000,_m467:0,_m396:300,_m1259:"",_m880:0,_m1267:0,_m1200:0,_m983:0,_m565:false,_m710:null,_m387:{_m169:1},_m7:{},_m91:{},_m1246:{},_m1216:{},_m244:null,_m894:null,_m832:null,_m1112:null,start:function(){this._m7={};this._m396=1000;this._m227=p2p$.$n15.$c18;if(this._m7.limitrc){this._m396=parseInt(this._m7.limitrc)}var a=this;$("#cde-online-status").click(function(){a._m1092()});this._m706();this._m1112=new p2p$.$n9.$c31({})},_m1264:function(){if(this._m244.isVisible()){this._m244.hide()}else{this._m244.show()}},_m1228:function(){if(this._m894.isVisible()){this._m894.hide()}else{this._m894.show()}},_m1217:function(){if(this._m832.isVisible()){this._m832.hide()}else{this._m832.show()}},_m706:function(){var a=this;setTimeout(function(){a._m1031()},10);this._m386=setInterval(function(){a._m1031()},this._m1020)},_m1060:function(){if(this._m386){clearInterval(this._m386);this._m880=0;this._m386=0}this._m467=0},_m1092:function(){if(this._m386){this._m1060()}else{this._m706()}if(this._m386){this._m565=false;$("#cde-online-status").html(" ...");$("#cde-online-status").css("color","red")}else{this._m565=true;$("#cde-online-status").html("");$("#cde-online-status").css("color","red")}},_m1031:function(){this._m1129();this._m467++;if(this._m467>=this._m396){this._m1060();this._m565=true;$("#cde-online-status").html("");$("#cde-online-status").css("color","red")}},_m1129:function(){var a=this._m227._m895("state/current?needCurrentProcess=1&segmentStartWithPlayer="+this._m387._m169+"&maxDuration=1500");this._m981(a);$("#cde-online-status").html(" - "+(this._m396-this._m467));$("#cde-online-status").css("color","green")},_m981:function(data){this._m710=typeof(data)=="string"?eval("("+data+")"):data;$("#cde-module-version").html(this._m710.module.version+"/Build "+this._m710.module.buildTime);$("#cde-current-time").html(p2p$.$n5.$c50._m226("Y-m-d H:i:s",this._m710.system.currentTime*1000));this._m922(data,data.system);for(var id in this._m91){this._m91[id].__removeMarked=true}for(var i=0;data.channels&&i<data.channels.length;i++){var itemData=data.channels[i];var channel=this._m91[itemData.id];if(!channel){channel=new p2p$.$n9.$c2(itemData,this._m227);channel.create(++this._m983,$("#cde-channels-layer"));this._m91[itemData.id]=channel}channel.__removeMarked=false;channel.update(itemData)}for(var id in this._m91){var channel=this._m91[id];if(channel.__removeMarked){channel.destroy();delete this._m91[id]}}},_m922:function(h,e){var d=0;$dom=$("#cde-system-status-more-1");var f=$dom.find(".row");var g=$(f[0]);var c=g.find(".value");if(e.cpu&&e.memory){$(c[d+0]).html((e.cpu.usagePercent||0).toFixed(1)+"%");$(c[d+1]).html(e.cpu.coreCount);$(c[d+2]).html((e.memory.usagePercent||0).toFixed(1)+"%");$(c[d+3]).html(p2p$.$n5.$c50.size(e.memory.totalBytes))}d+=4;if(e.memory&&e.process){var a=e.process.physicalMemorySize*100/e.memory.totalBytes;$(c[d+0]).html((e.process.usagePercent||0).toFixed(1)+"%");$(c[d+1]).html(a.toFixed(1)+"%");$(c[d+2]).html(p2p$.$n5.$c50.size(e.process.physicalMemorySize))}d+=3;if(e.storage&&e.storage["default"]){var b=e.storage["default"];var i=(b.dataSize*100/b.dataCapacity);$(c[d+0]).html(b.name.substr(0,1).toUpperCase());$(c[d+1]).html(i.toFixed(1)+"%");$(c[d+2]).html(p2p$.$n5.$c50.size(b.dataSize));$(c[d+3]).html(p2p$.$n5.$c50.size(b.dataCapacity))}d+=4;$dom=$("#cde-system-status-more-2");var f=$dom.find(".row");var g=$(f[0]);var c=g.find(".value");d=0;if(h.channels){$(c[d+0]).html(h.channels.length)}d+=2;if(h.enviroment){$(c[d+0]).html(h.enviroment.clientGeo+"/"+h.enviroment.clientIp);$(c[d+1]).html(h.enviroment.deviceType);$(c[d+2]).html((h.enviroment.osType+"").toUpperCase());$(c[d+3]).html(this._m918(h.enviroment.networkType));$(c[d+4]).html(h.enviroment.p2pEnabled?"Yes":"No");$(c[d+5]).html(h.enviroment.externalAppId);$(c[d+6]).html(h.enviroment.externalAppVersion);$(c[d+7]).html(h.enviroment.externalAppChannel);$(c[d+8]).html(h.enviroment.externalAppPackageName||"-")}d+=8},_m918:function(a){switch(a){case 1:return"Ethernet";case 2:return"Mobile";case 3:return"Wifi";case 4:return"Mobile 2G";case 5:return"Mobile 3G";case 6:return"Mobile 4G";case 7:return"Mobile 5G";default:return"UN"}}};p2p$.ns("$n9");p2p$.$n9.$c2=_m$cde18._m41({index:0,parent:null,dom:null,_m31:null,property:null,peers:null,_m1135:null,segments:null,pieces:null,init:function(b,a){this.property=b;this._m227=a},create:function(a,b){this.index=a;if(this.dom){this.destroy()}this._m1135=[{title:"",fieldIndex:"name"}];this.peers={};this.segments={};this.pieces=[];this.parent=b;this.dom=$('<div id="channel-'+this.property.id+'" class="channel-item" />');this.parent.append(this.dom);this._m1069()},destroy:function(){if(this.dom){this.dom.remove();this.dom=null}},_m87:function(){switch(this.property.type){case"vod":return"";case"live":return"";case"stream":return"";case"download":return"";default:return""}},_m1069:function(){this._m31={title:$(p2p$.$n5.$c50.format('<div id="channel-title" class="title" title=" URL: {0}"><a href="{1}" title=" M3U8" target="_blank">{2} {3}</a> <a title="" class="click-link">X</a>: {4}</div>',this.property.channelUrl,p2p$.$n5.$c50.format("http://{0}{1}",p2p$.$n9.$c53.host,(this.property.channelPlayUrl||"").replace(/debug=0/g,"debug=1")),this._m87(),this.index,p2p$.$n5.$c50._m1163((this.property.directMetaMode?this.property.channelUrl:this.property.gslbEncryptUrl)||this.property.channelUrl))),info:$('<div class = "info" />'),statData:$('<table class="stat" border="0"><tr><td colspan="18" class="title"></td></tr><tr class="row"><td class="prefix">:</td><td class="value" colspan="4"></td><td class="prefix">:</td><td class="value" colspan="4"></td><td class="prefix">P2P :</td><td class="value" colspan="1"></td><td class="prefix" align="right">:</td><td class="value" colspan="2" title="Fetch Rate  % /  /  / P2P.P2P-UIC "></td><td class="prefix">:</td><td class="value" colspan="1"></td></tr><tr class="row"><td class="prefix protocol-cdn">CDN:</td> <td class="prefix2">:</td><td class="value"></td> <td class="prefix2"></td><td class="value" style="padding-right:20px;"></td><td class="prefix protocol-webrtc">WebRTC:</td> <td class="prefix2">:</td><td class="value"></td> <td class="prefix2">:</td><td class="value" style="padding-right:20px;"></td><td class="prefix protocol-websocket">SOCKET:</td> <td class="prefix2">:</td><td class="value"></td> <td class="prefix2">:</td><td class="value" style="padding-right:20px;"></td><td class="prefix"></td><td></td><td></td></tr></table>'),pieces:$('<div class="pieces"><div class="switch-wrapper"><span class="switch-btn"></span></div></div>'),segments:$("<table class='segments' ><tr><td colspan='9' class='title'><span>(TS) ( 5 )</span><td></tr><tr class='header'><th>ID</th> <th></th> <th></th> <th> (s)</th> <th></th> <th></th> <th></th><th> /  / PIECE</th> <th></th></tr></table>"),peers:$("<table class='peers' ><tr class='title'><td colspan='13'> (<span class='peer-type-stats'>...</span>)</td></tr><tr class='header'><th></th> <th></th> <th> ID / QoS</th> <th>IP </th> <th></th> <th></th> <th></th> <th></th> <th> PIECE</th> <th></th> <th> PIECE</th><th> /  /  / </th> <th>: /</th></tr></table>")};for(var c in this._m31){this.dom.append(this._m31[c])}var d=this;var e=p2p$.$n9.$c53;var b=this._m31.pieces.children(".switch-wrapper");var a=b.children(".switch-btn");a.click(function(){e._m387._m169=e._m387._m169?0:1;d.reset(a,e._m387._m169);e._m1031()});this.reset(a,e._m387._m169);var f=$(this._m31.title.find(".click-link"));f.click(function(){d._m917()})},reset:function(a,c){a.html(c?"":"");if(this.pieces){for(var b=0;b<this.pieces.length;b++){this.pieces[b].remove()}}this.pieces=[];if(this.peers){for(var d in this.peers){this.peers[d].remove()}this.peers={}}},update:function(a){this.property=a;this._m1160();this._m1073();this._m1126();this._m1074();this._m935()},_m1160:function(){var c=this.property.liveStreamId||"";if(this.property.type!="live"){var b=p2p$.$n5.$c50._m1128(this.property.channelUrl);c=this._m978(b.vtype)||b.rateid}var a=this._m891(this.property.gslbServerErrorCode,this.property.gslbServerErrorDetails);var d=p2p$.$n5.$c50.format('<table><tr><td class="prefix"> ID:</td><td class="name" title="{1}">{0}</td></tr><tr><td class="prefix">:</td><td>{2}, <span class="extra">P2P Tracker:</span> {20},   <span class="extra">Webrtc:</span> {21} <span class="extra" title="{22}">Peer ID:</span> {23}</td></tr><tr><td class="prefix">:</td><td>{3} <span class="extra">()</span>,   HTTP: {17}, GSLB({31}): {18}/EC:{28}, M3U8({32}): {19}</td></tr><tr><td class="prefix">:</td><td>{4} ms <span class="extra">(GSLB +  M3U8)</span>,   {30} ms<span class="extra">(GSLB)</span></td></tr><tr><td class="prefix">:</td><td>{5} <span class="extra" title="GAP / M3U8 / TS  / ">() GAP:</span> {29}    <span class="extra">GSLB : </span>{24}, <span class="extra">: </span>{25} </td></tr><tr><td class="prefix">M3U8  1:</td><td><span class="extra">: </span>{26},  {6}  TS  <span class="extra">: </span>{7} ~ {8}, {9} , {10} , {11} ,  {12} </td></tr><tr><td class="prefix">M3U8  2:</td><td>{13}  PIECE, <span class="extra">P2P Group ID:</span> {14},   <span class="extra">Stream ID/Rate:</span> {27}</td></tr><tr><td class="prefix">:</td><td> TS {15}, <span class="extra">:</span>   {16}, UIC: {33}::{34}, <span title="P2P  PIECE ">{35}P</span></tr></table>',this.property.id+(this.property.context.drmEnabled?" - <i>DRM</i>":"")+(this.property.paused?" - ":""),this.property.selfRanges,p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.createTime),p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.activeTime),this.property.channelOpenedTime>0?Math.round((this.property.channelOpenedTime-this.property.createTime)):"-",p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.livePseudoPlayTime*1000),this.property.metaData.segmentCount,this.property.metaData.segmentFirstId,this.property.metaData.segmentLastId,this.property.metaData.segmentCompletedCount,this.property.metaData.segmentCompletingCount,this.property.metaData.segmentDisplayCount,Math.round(this.property.metaData.segmentDisplayDuration/1000),this.property.metaData.pieceCount,this.property.metaData.p2pGroupId,this.property.urgentSegmentId+"/"+this.property.playerSegmentId,p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.mediaStartTime),p2p$.$n5.$c50.format('<span class="{0}">{1}</span>',this.property.metaResponseCode==200?"status-ok":"status-error",this.property.metaResponseCode),p2p$.$n5.$c50.format('<span class="{0}">{1}</span>',this.property.gslbServerResponseCode==200?"status-ok":"status-error",this.property.gslbServerResponseCode),p2p$.$n5.$c50.format('<span class="{0}">{1}</span>',this.property.metaServerResponseCode==200?"status-ok":"status-error",this.property.metaServerResponseCode),this.property.context?this.property.context.gatherServerHost:"-",this.property.context?this.property.context.webrtcServerHost:"-",this.property.context?(this.property.context.p2pWebrtcPeerId||"..."):"-",this.property.context?(this.property.context.p2pWebrtcPeerId||"..."):"-",p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.gslbLoadTime),this.property.gslbReloadInterval/1000000/60,p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.metaLoadTime),c,p2p$.$n5.$c50.format('<span class="{0}" title="Error Code">{1}</span>',this.property.gslbServerErrorCode==0?"status-ok":"status-error",[this.property.gslbServerErrorCode,a].toString()),(this.property.metaData.totalGapDuration/1000)+" / "+(Math.round(this.property.playerFlushInterval/1000)/1000)+" / "+(this.property.liveSkipSegmentTime/1000)+" / "+(this.property.livePlayOffset||"-"),this.property.gslbConsumedTime?((this.property.gslbConsumedTime||0)):"-",this.property.context.gslbServerIp?this.property.context.gslbServerIp:"...",this.property.context.metaServerIp?this.property.context.metaServerIp:"...",typeof(this.property.urgentIncompleteCount)=="number"?this.property.urgentIncompleteCount:"-",typeof(this.property.urgentSegmentEndId)=="number"?this.property.urgentSegmentEndId:"-",typeof(this.property.otherPeerRequestCount)=="number"?this.property.otherPeerRequestCount:"-");this._m31.info.html(d)},_m1073:function(){if(!this.property.statData){return}var f=this._m31.statData.find(".row");var e=$(f[0]);var a=$(f[1]);var g="";if(this.property.context.p2pUploadLimit){g=p2p$.$n5.$c50.format('<span title="P2P , I:, A:, N:"> / I:{0}, A:{1}, N:{2}</span>',p2p$.$n5.$c50.speed(this.property.context.p2pUploadThrottleInit,true),p2p$.$n5.$c50.speed(this.property.context.p2pUploadThrottleAverage,true),p2p$.$n5.$c50.speed(this.property.statData.restrictedSendSpeed,true))}var b=e.find(".value");$(b[0]).html(p2p$.$n5.$c50.size(this.property.statData.totalReceiveBytes));$(b[1]).html((this.property.statData.totalSendBytes>0?p2p$.$n5.$c50.size(this.property.statData.totalSendBytes):"-")+g);$(b[2]).html((this.property.statData.shareReceiveRatio*100).toFixed(1)+"%");$(b[3]).html((this.property.context.p2pFetchRate*100).toFixed(1)+"% / "+this.property.context.p2pMaxPeers+" / "+(this.property.context.p2pUrgentSize||"-")+"s / "+(this.property.context.p2pMaxParallelRequestPieces||"-")+"."+(this.property.context.p2pMaxUrgentRequestPieces||"-"));$(b[4]).html((this.property.statData.shareSendRatio*100).toFixed(1)+"%");$(a.find(".protocol-cdn")[0]).css("color","#aa0000");var k=$(a.find(".protocol-webrtc")[0]);k.css("color",this.property.context.webrtcServerConnectedTime>0?"green":"");k.attr("title",this.property.context.p2pWebrtcPeerId+"\n"+this.property.selfRanges);var c=$(a.find(".protocol-websocket")[0]);var d=p2p$.$n5.$c50.format(", UPNP: {0}, Port: {1}/{2}, {3}, {4}",this.property.context.upnpMapSuccess?"Yes":"No",this.property.context.upnpMappedInPort,this.property.context.upnpMappedOutPort,this.property.context.upnpMappedAddress,p2p$.$n5.$c50._m226("Y-m-d H:i:s",this.property.context.upnpMapCompleteTime/1000));c.css("color",this.property.context.trackerServerConnectedTime>0?"#00bb00":"");c.attr("title",this.property.context.p2pWebsocketPeerId+d);var b=a.find(".value");for(var i=0;i<4;i++){var h=this.property.statData.protocols[i+1];if(!h){continue}var j=i;if(i==3){j=1}$(b[j*2]).html(p2p$.$n5.$c50.format("{0}, {1}%",p2p$.$n5.$c50.size(h.totalReceiveBytes),(h.shareReceiveRatio*100).toFixed(1)));if(j>0){$(b[j*2+1]).html(p2p$.$n5.$c50.format("{0}, {1}%",p2p$.$n5.$c50.size(h.totalSendBytes),(h.shareSendRatio*100).toFixed(1)))}}},_m1126:function(){var b=0;var l=p2p$.$n9.$c53;var h=this.property.metaData.segments;for(var g=0;g<h.length;g++){var k=h[g];b+=(k.pieceCount+1);if(b>1000&&l._m387._m169){break}}if(this.pieces.length<b){while(this.pieces.length<b){var a=$('<div class="piece-units">&nbsp;</div>');this.pieces.push(a);this._m31.pieces.append(a)}}var c=0;for(var g=0;g<h.length;g++){var k=h[g];if(c<this.pieces.length){var f=this.pieces[c];f.html(p2p$.$n5.$c50.format("<span>{0}</span>",k.id%10000));f.attr("class",k.discontinuity?"ts-discontinuity":(k.beginOfMeta?"ts-begin":"ts"));f.css("background-color","");c++}for(var e=0;e<k.pieces.length&&c<this.pieces.length;e++,c++){var m=k.pieces[e];var d="#ddd";if(m.completedTime>0){switch(m.receiveProtocol){case 1:d="#aa0000";break;case 2:case 4:d="green";break;case 3:d="#00aa00";break;default:d="#000000";break}}else{if(m.receiveStartTime>0){if(m.receiveByStable){d="blue"}else{d="orange"}}else{if(m.shareInRanges>0){d="#ffdddd"}}}var f=this.pieces[c];f.html(m.playedTime>0?"*":"&nbsp;");f.attr("class","piece-units");f.css("background-color",d);f.attr("title",p2p$.$n5.$c50.format("{0}/{1}/{2}, Share In Ranges: {3}",k.id,m.type==0?"tn":"pn",m.id,m.shareInRanges))}}while(c<this.pieces.length){var f=this.pieces[c];f.html("");f.attr("class","blank");f.css("background-color","");c++}},_m1074:function(){for(var b in this.segments){var k=this.segments[b];k.__removeMarked=true}var h=true;var e=0;var g=this.property.metaData.segments;for(var f=0;g&&f<g.length&&e<5;f++){var c=g[f];if(c.id<this.property.urgentSegmentId){continue}var d=this.segments[c.id];if(!d){d=$('<tr class="row" id="segment-item-'+c.id+'"><td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td><td></td> <td></td></tr>');this._m31.segments.append(d);this.segments[c.id]=d}d.__removeMarked=false;e++;var j="";if(this.property.livePseudoPlayTime>0){j=h?" *":"";if(c.startTime>this.property.livePseudoPlayTime*1000){h=false}}var a=d.children();$(a[0]).html(c.id);$(a[1]).html(p2p$.$n5.$c50.size(c.size||0));$(a[2]).html((c.startTime>86400000?p2p$.$n5.$c50._m226("Y-m-d H:i:s",c.startTime):p2p$.$n5.$c50._m1054(c.startTime/1000))+j);$(a[3]).html(c.duration/1000);$(a[4]).html(c.size>0?p2p$.$n5.$c50.speed(c.size*1000/c.duration,true):"-");$(a[5]).html((c.receiveSpeed>0)?p2p$.$n5.$c50.speed(c.receiveSpeed,true):"-");$(a[6]).html((c.lastReceiveTime&&c.lastReceiveTime>0)?p2p$.$n5.$c50._m226("Y-m-d H:i:s",c.lastReceiveTime):"-");$(a[7]).html((c.pendingPieceCount||0)+" / "+c.completedPieceCount+" / "+c.pieceCount);$(a[8]).html(Math.round(c.completedSize*100/c.size)+"%")}for(var b in this.segments){var k=this.segments[b];if(k.__removeMarked){k.remove();delete this.segments[b]}}},_m935:function(){for(var k in this.peers){var s=this.peers[k];s.__removeMarked=true}var c=p2p$.$n9.$c53._m1112;var l={};var f=this.property.stablePeers?this.property.stablePeers.concat(this.property.otherPeers||[]):[];for(var m=0;m<f.length;m++){var r=f[m];var o=this.peers[r.remoteId];if(!o){o=$('<tr class="row" id="peer-item-'+r.remoteId+'"><td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td><td></td> <td></td> <td></td> <td></td> <td></td> <td></td></tr>');this._m31.peers.append(o);this.peers[r.remoteId]=o}o.__removeMarked=false;l[r.type]=(l[r.type]||0)+1;var g=r.name||r.remoteType||"";var a=g;if(a.length>10&&a.indexOf("/")>0){var j=a.split("/");if(j[0].length>10){j[0]=j[0].substr(0,8)+"..."}a=j.join("/")}var u=o.children();var d=0;$(u[d++]).html(a);$(u[0]).attr("title",g);$(u[d++]).html(r.type);$(u[d]).attr("title",r.remoteId+"\n"+r.selfRanges);$(u[d++]).html(r.type=="cdn"?("QoS: "+this._m1085(r.remoteId)):r.remoteId.substr(0,10)+"...");$(u[d++]).html(r.remoteAddress=="Unknown"?(r.remoteId.substr(0,16)+"..."):r.remoteAddress);$(u[d++]).html(c._m1142(r.remoteAddress,this._m935,this));$(u[d++]).html(r.lastReceiveSpeed>0?p2p$.$n5.$c50.speed(r.lastReceiveSpeed,true):"-");$(u[d++]).html(p2p$.$n5.$c50._m226("Y-m-d H:i:s",r.lastReceiveTime));$(u[d++]).html(p2p$.$n5.$c50.size(r.totalReceiveBytes||0));$(u[d++]).html(r.totalReceivePieces);$(u[d++]).html(p2p$.$n5.$c50.size(r.totalSendBytes||0));$(u[d++]).html(r.totalSendPieces);var q=r.totalSendRanges+r.totalReceiveRanges+r.totalSendRequests+r.totalReceiveRequests+r.totalSendResponses+r.totalReceiveResponses;var t=p2p$.$n5.$c50.format("Range: {0}/{1}, Request: {2}/{3}, Response: {4}/{5}",r.totalSendRanges,r.totalReceiveRanges,r.totalSendRequests,r.totalReceiveRequests,r.totalSendResponses,r.totalReceiveResponses);$(u[d]).attr("title",t);$(u[d++]).html((r.pendingRequestCount||0)+" / "+r.totalReceiveResponses+" / "+r.totalSendRequests+" / "+q);$(u[d]).css("color",(r.totalChecksumErrors>0||r.totalInvalidErrors>0)?"red":"green");$(u[d++]).html(r.totalChecksumErrors+" / "+r.totalInvalidErrors)}for(var k in this.peers){var s=this.peers[k];if(s.__removeMarked){s.remove();delete this.peers[k]}}var h="";for(var p in l){var b=(p||"").toLowerCase();var e=l[b];var n=this.property.context[b+"TotalNodeCount"];if(h!=""){h+=", "}h+=p2p$.$n5.$c50.format("{0}: {1}/{2} ",b,e,(n>10000||!n)?"-":n)}var u=this._m31.peers.find("span.peer-type-stats");$(u[0]).html(h)},_m1085:function(b){if(!b){return"-"}var c=b.indexOf("&qos=");if(c<0){c=b.indexOf("?qos=")}if(c<0){return"-"}var a=b.indexOf("&",c+5);return b.substring(c+5,a)},_m891:function(b,c){var a={"-1":"",0:"",200:"HTTP 200",302:"HTTP Moved",400:"CDN",403:"",404:"",413:"",414:"",415:"",416:"ID,",417:",",418:"format,expect",419:",:platid, splatid",420:", Base64",421:", ",422:"/",423:", tm,key,mmsid",424:"URL",425:"URL, MD5",426:"format/expetct/platid/splatid",427:"/ token ",428:"LinkShell ",429:"LinkShell ",430:"",431:"Cookie",432:"LinkShell,MAC"};return a[b]||c||""},_m978:function(a){var b={1:"flv_350",2:"3gp_320X240",3:"flv_enp",4:"chinafilm_350",8:"flv_vip",9:"mp4",10:"flv_live",11:"union_low",12:"union_high",13:"mp4_800",16:"flv_1000",17:"flv_1300",18:"flv_720p",19:"mp4_1080p",20:"flv_1080p6m",21:"mp4_350",22:"mp4_1300",23:"mp4_800_db",24:"mp4_1300_db",25:"mp4_720p_db",26:"mp4_1080p6m_db",27:"flv_yuanhua",28:"mp4_yuanhua",29:"flv_720p_3d",30:"mp4_720p_3d",31:"flv_1080p6m_3d",32:"mp4_1080p6m_3d",33:"flv_1080p_3d",34:"mp4_1080p_3d",35:"flv_1080p3m",44:"flv_4k",45:"flv_4k_265",46:"flv_3m_3d",47:"h265_flv_800",48:"h265_flv_1300",49:"h265_flv_720p",50:"h265_flv_1080p",51:"mp4_720p",52:"mp4_1080p3m",53:"mp4_1080p6m",54:"mp4_4k",55:"mp4_4k_15m",57:"flv_180",58:"mp4_180",59:"mp4_4k_db",68:"baseline_marlin",69:"baseline_access",70:"180_marlin",71:"180_access",72:"350_marlin",73:"350_access",74:"800_marlin",75:"800_access",76:"1300_marlin",77:"1300_access",78:"720p_marlin",79:"720p_access",80:"1080p3m_marlin",81:"1080p3m_access",82:"1080p6m_marlin",83:"1080p6m_access",84:"1080p15m_marlin",85:"1080p15m_access",86:"4k_marlin",87:"4k_access",88:"4k15m_marlin",89:"4k15m_access",90:"4k30m_marlin",91:"4k30m_access",92:"800_db_marlin",93:"800_db_access",94:"1300_db_marlin",95:"1300_db_access",96:"720p_db_marlin",97:"720p_db_access",98:"1080p3m_db_marlin",99:"1080p3m_db_access",100:"1080p6m_db_marlin",101:"1080p6m_db_access",102:"1080p15m_db_marlin",103:"1080p15m_db_access",104:"4k_db_marlin",105:"4k_db_access",106:"4k15m_db_marlin",107:"4k15m_db_access",108:"4k30m_db_marlin",109:"4k30m_db_access",110:"720p_3d_marlin",111:"720p_3d_access",112:"1080p3m_3d_marlin",113:"1080p3m_3d_access",114:"1080p6m_3d_marlin",115:"1080p6m_3d_access",116:"1080p15m_3d_marlin",117:"1080p15m_3d_access",118:"4k_3d_marlin",119:"4k_3d_access",120:"4k15m_3d_marlin",121:"4k15m_3d_access",122:"4k30m_3d_marlin",123:"4k30m_3d_access",124:"mp4_180_logo",125:"mp4_350_logo",126:"mp4_800_logo"};return b[a]||""},_m917:function(){if(!confirm("")){return}this._m227._m772(this.property.channelUrl)}});p2p$.ns("$n9");p2p$.$n9.$c31=_m$cde18._m41({_m880:0,_m958:null,_m418:null,init:function(a){this._m958={};this._m418=[]},_m1142:function(b,c,a){if(b.indexOf(":")>=0){b=b.substr(0,b.indexOf(":"))}if(b.substr(0,1)=="*"){b=b.substr(1)}b=p2p$.$n5.$c50.trim(b);if(this._m958[b]){return this._m958[b]}this._m1245(b,c,a);return"..."},_m1245:function(c,d,b){if(this._m880){for(var a=0;a<this._m418.length;a++){if(this._m418[a]==c){return}}this._m418.push(c);return}this._m889(c,d,b)},_m889:function(ip,callback,scope){if(!ip&&this._m418.length==0){return}if(!ip){ip=this._m418[0];this._m418.shift()}var delegate=this;this._m880=$.ajax({url:"http://g3.letv.cn/?format=1&ajax=1&uip="+ip+"&random="+Math.random()}).done(function(data){if(typeof(data)=="string"){try{data=eval("("+data+")")}catch(e){}}var name=(data.desc||"-");var trimValues="-";if(name.substr(0,trimValues.length)==trimValues){name=name.substr(trimValues.length)}delegate._m958[ip]=name;delegate._m889(null,callback,scope);if(callback){callback.call(scope)}}).fail(function(){delegate._m958[ip]="-";delegate._m889(null,callback,scope);if(callback){callback.call(scope)}}).always(function(){delegate._m880=0})}});!function(a){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){define([],a)}else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pako=a()}}}(function(){return function a(g,b,h){function f(k,j){if(!b[k]){if(!g[k]){var e="function"==typeof require&&require;if(!j&&e){return e(k,!0)}if(c){return c(k,!0)}var m=new Error("Cannot find module '"+k+"'");throw m.code="MODULE_NOT_FOUND",m}var i=b[k]={exports:{}};g[k][0].call(i.exports,function(n){var l=g[k][1][n];return f(l?l:n)},i,i.exports,a,g,b,h)}return b[k].exports}for(var c="function"==typeof require&&require,d=0;d<h.length;d++){f(h[d])}return f}({1:[function(d,g,b){var h="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;b.assign=function(j){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var i=k.shift();if(i){if("object"!=typeof i){throw new TypeError(i+"must be non-object")}for(var l in i){i.hasOwnProperty(l)&&(j[l]=i[l])}}}return j},b.shrinkBuf=function(i,j){return i.length===j?i:i.subarray?i.subarray(0,j):(i.length=j,i)};var f={arraySet:function(l,o,j,p,m){if(o.subarray&&l.subarray){return void l.set(o.subarray(j,j+p),m)}for(var k=0;p>k;k++){l[m+k]=o[j+k]}},flattenChunks:function(l){var p,j,q,o,k,m;for(q=0,p=0,j=l.length;j>p;p++){q+=l[p].length}for(m=new Uint8Array(q),o=0,p=0,j=l.length;j>p;p++){k=l[p],m.set(k,o),o+=k.length}return m}},c={arraySet:function(l,o,j,p,m){for(var k=0;p>k;k++){l[m+k]=o[j+k]}},flattenChunks:function(e){return[].concat.apply([],e)}};b.setTyped=function(e){e?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,f)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,c))},b.setTyped(h)},{}],2:[function(p,k,m){function d(i,l){if(65537>l&&(i.subarray&&q||!i.subarray&&g)){return String.fromCharCode.apply(null,b.shrinkBuf(i,l))}for(var h="",o=0;l>o;o++){h+=String.fromCharCode(i[o])}return h}var b=p("./common"),g=!0,q=!0;try{String.fromCharCode.apply(null,[0])}catch(j){g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(j){q=!1}for(var f=new b.Buf8(256),c=0;256>c;c++){f[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1}f[254]=f[254]=1,m.string2buf=function(v){var y,r,z,u,x,w=v.length,o=0;for(u=0;w>u;u++){r=v.charCodeAt(u),55296===(64512&r)&&w>u+1&&(z=v.charCodeAt(u+1),56320===(64512&z)&&(r=65536+(r-55296<<10)+(z-56320),u++)),o+=128>r?1:2048>r?2:65536>r?3:4}for(y=new b.Buf8(o),x=0,u=0;o>x;u++){r=v.charCodeAt(u),55296===(64512&r)&&w>u+1&&(z=v.charCodeAt(u+1),56320===(64512&z)&&(r=65536+(r-55296<<10)+(z-56320),u++)),128>r?y[x++]=r:2048>r?(y[x++]=192|r>>>6,y[x++]=128|63&r):65536>r?(y[x++]=224|r>>>12,y[x++]=128|r>>>6&63,y[x++]=128|63&r):(y[x++]=240|r>>>18,y[x++]=128|r>>>12&63,y[x++]=128|r>>>6&63,y[x++]=128|63&r)}return y},m.buf2binstring=function(e){return d(e,e.length)},m.binstring2buf=function(i){for(var l=new b.Buf8(i.length),h=0,o=l.length;o>h;h++){l[h]=i.charCodeAt(h)}return l},m.buf2string=function(u,y){var l,x,n,w,v=y||u.length,z=new Array(2*v);for(x=0,l=0;v>l;){if(n=u[l++],128>n){z[x++]=n}else{if(w=f[n],w>4){z[x++]=65533,l+=w-1}else{for(n&=2===w?31:3===w?15:7;w>1&&v>l;){n=n<<6|63&u[l++],w--}w>1?z[x++]=65533:65536>n?z[x++]=n:(n-=65536,z[x++]=55296|n>>10&1023,z[x++]=56320|1023&n)}}}return d(z,x)},m.utf8border=function(i,l){var h;for(l=l||i.length,l>i.length&&(l=i.length),h=l-1;h>=0&&128===(192&i[h]);){h--}return 0>h?l:0===h?l:h+f[i[h]]>l?h:l}},{"./common":1}],3:[function(c,d,b){function f(j,m,g,o){for(var l=65535&j|0,h=j>>>16&65535|0,k=0;0!==g;){k=g>2000?2000:g,g-=k;do{l=l+m[o++]|0,h=h+l|0}while(--k);l%=65521,h%=65521}return l|h<<16|0}d.exports=f},{}],4:[function(d,g,b){function h(){for(var j,k=[],i=0;256>i;i++){j=i;for(var l=0;8>l;l++){j=1&j?3988292384^j>>>1:j>>>1}k[i]=j}return k}function f(j,o,i,p){var m=c,l=p+i;j=-1^j;for(var k=p;l>k;k++){j=j>>>8^m[255&(j^o[k])]}return -1^j}var c=h();g.exports=f},{}],5:[function(ao,aG,aL){function ax(b,c){return b.msg=a8[c],c}function aq(b){return(b<<1)-(b>4?9:0)}function aC(b){for(var c=b.length;--c>=0;){b[c]=0}}function ap(c){var d=c.state,b=d.pending;b>c.avail_out&&(b=c.avail_out),0!==b&&(aX.arraySet(c.output,d.pending_buf,d.pending_out,b,c.next_out),c.next_out+=b,d.pending_out+=b,c.total_out+=b,c.avail_out-=b,d.pending-=b,0===d.pending&&(d.pending_out=0))}function aD(b,c){aB._tr_flush_block(b,b.block_start>=0?b.block_start:-1,b.strstart-b.block_start,c),b.block_start=b.strstart,ap(b.strm)}function az(b,c){b.pending_buf[b.pending++]=c}function aw(b,c){b.pending_buf[b.pending++]=c>>>8&255,b.pending_buf[b.pending++]=255&c}function aM(c,f,b,g){var d=c.avail_in;return d>g&&(d=g),0===d?0:(c.avail_in-=d,aX.arraySet(f,c.input,c.next_in,d,b),1===c.state.wrap?c.adler=bc(c.adler,f,d,b):2===c.state.wrap&&(c.adler=aU(c.adler,f,d,b)),c.next_in+=d,c.total_in+=d,d)}function aH(B,v){var y,j,b=B.max_chain_length,m=B.strstart,C=B.prev_length,p=B.nice_match,k=B.strstart>B.w_size-al?B.strstart-(B.w_size-al):0,g=B.window,z=B.w_mask,w=B.prev,A=B.strstart+bo,q=g[m+C-1],x=g[m+C];B.prev_length>=B.good_match&&(b>>=2),p>B.lookahead&&(p=B.lookahead);do{if(y=v,g[y+C]===x&&g[y+C-1]===q&&g[y]===g[m]&&g[++y]===g[m+1]){m+=2,y++;do{}while(g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&g[++m]===g[++y]&&A>m);if(j=bo-(A-m),m=A-bo,j>C){if(B.match_start=v,C=j,j>=p){break}q=g[m+C-1],x=g[m+C]}}}while((v=w[v&z])>k&&0!==--b);return C<=B.lookahead?C:B.lookahead}function an(d){var h,b,j,g,c,f=d.w_size;do{if(g=d.window_size-d.lookahead-d.strstart,d.strstart>=f+(f-al)){aX.arraySet(d.window,d.window,f,f,0),d.match_start-=f,d.strstart-=f,d.block_start-=f,b=d.hash_size,h=b;do{j=d.head[--h],d.head[h]=j>=f?j-f:0}while(--b);b=f,h=b;do{j=d.prev[--h],d.prev[h]=j>=f?j-f:0}while(--b);g+=f}if(0===d.strm.avail_in){break}if(b=aM(d.strm,d.window,d.strstart+d.lookahead,g),d.lookahead+=b,d.lookahead+d.insert>=aN){for(c=d.strstart-d.insert,d.ins_h=d.window[c],d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+aN-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=c,c++,d.insert--,!(d.lookahead+d.insert<aN));){}}}while(d.lookahead<al&&0!==d.strm.avail_in)}function aF(c,d){var b=65535;for(b>c.pending_buf_size-5&&(b=c.pending_buf_size-5);;){if(c.lookahead<=1){if(an(c),0===c.lookahead&&d===bd){return aJ}if(0===c.lookahead){break}}c.strstart+=c.lookahead,c.lookahead=0;var f=c.block_start+b;if((0===c.strstart||c.strstart>=f)&&(c.lookahead=c.strstart-f,c.strstart=f,aD(c,!1),0===c.strm.avail_out)){return aJ}if(c.strstart-c.block_start>=c.w_size-al&&(aD(c,!1),0===c.strm.avail_out)){return aJ}}return c.insert=0,d===aV?(aD(c,!0),0===c.strm.avail_out?ab:bl):c.strstart>c.block_start&&(aD(c,!1),0===c.strm.avail_out)?aJ:aJ}function aI(c,d){for(var b,f;;){if(c.lookahead<al){if(an(c),c.lookahead<al&&d===bd){return aJ}if(0===c.lookahead){break}}if(b=0,c.lookahead>=aN&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+aN-1])&c.hash_mask,b=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),0!==b&&c.strstart-b<=c.w_size-al&&(c.match_length=aH(c,b)),c.match_length>=aN){if(f=aB._tr_tally(c,c.strstart-c.match_start,c.match_length-aN),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=aN){c.match_length--;do{c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+aN-1])&c.hash_mask,b=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart}while(0!==--c.match_length);c.strstart++}else{c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask}}else{f=aB._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++}if(f&&(aD(c,!1),0===c.strm.avail_out)){return aJ}}return c.insert=c.strstart<aN-1?c.strstart:aN-1,d===aV?(aD(c,!0),0===c.strm.avail_out?ab:bl):c.last_lit&&(aD(c,!1),0===c.strm.avail_out)?aJ:ae}function aE(c,f){for(var b,g,d;;){if(c.lookahead<al){if(an(c),c.lookahead<al&&f===bd){return aJ}if(0===c.lookahead){break}}if(b=0,c.lookahead>=aN&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+aN-1])&c.hash_mask,b=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=aN-1,0!==b&&c.prev_length<c.max_lazy_match&&c.strstart-b<=c.w_size-al&&(c.match_length=aH(c,b),c.match_length<=5&&(c.strategy===a0||c.match_length===aN&&c.strstart-c.match_start>4096)&&(c.match_length=aN-1)),c.prev_length>=aN&&c.match_length<=c.prev_length){d=c.strstart+c.lookahead-aN,g=aB._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-aN),c.lookahead-=c.prev_length-1,c.prev_length-=2;do{++c.strstart<=d&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+aN-1])&c.hash_mask,b=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart)}while(0!==--c.prev_length);if(c.match_available=0,c.match_length=aN-1,c.strstart++,g&&(aD(c,!1),0===c.strm.avail_out)){return aJ}}else{if(c.match_available){if(g=aB._tr_tally(c,0,c.window[c.strstart-1]),g&&aD(c,!1),c.strstart++,c.lookahead--,0===c.strm.avail_out){return aJ}}else{c.match_available=1,c.strstart++,c.lookahead--}}}return c.match_available&&(g=aB._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<aN-1?c.strstart:aN-1,f===aV?(aD(c,!0),0===c.strm.avail_out?ab:bl):c.last_lit&&(aD(c,!1),0===c.strm.avail_out)?aJ:ae}function av(d,h){for(var b,j,g,c,f=d.window;;){if(d.lookahead<=bo){if(an(d),d.lookahead<=bo&&h===bd){return aJ}if(0===d.lookahead){break}}if(d.match_length=0,d.lookahead>=aN&&d.strstart>0&&(g=d.strstart-1,j=f[g],j===f[++g]&&j===f[++g]&&j===f[++g])){c=d.strstart+bo;do{}while(j===f[++g]&&j===f[++g]&&j===f[++g]&&j===f[++g]&&j===f[++g]&&j===f[++g]&&j===f[++g]&&j===f[++g]&&c>g);d.match_length=bo-(c-g),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=aN?(b=aB._tr_tally(d,1,d.match_length-aN),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(b=aB._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),b&&(aD(d,!1),0===d.strm.avail_out)){return aJ}}return d.insert=0,h===aV?(aD(d,!0),0===d.strm.avail_out?ab:bl):d.last_lit&&(aD(d,!1),0===d.strm.avail_out)?aJ:ae}function ay(c,d){for(var b;;){if(0===c.lookahead&&(an(c),0===c.lookahead)){if(d===bd){return aJ}break}if(c.match_length=0,b=aB._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++,b&&(aD(c,!1),0===c.strm.avail_out)){return aJ}}return c.insert=0,d===aV?(aD(c,!0),0===c.strm.avail_out?ab:bl):c.last_lit&&(aD(c,!1),0===c.strm.avail_out)?aJ:ae}function aK(b){b.window_size=2*b.w_size,aC(b.head),b.max_lazy_match=be[b.level].max_lazy,b.good_match=be[b.level].good_length,b.nice_match=be[b.level].nice_length,b.max_chain_length=be[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=aN-1,b.match_available=0,b.ins_h=0}function am(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=aR,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new aX.Buf16(2*ag),this.dyn_dtree=new aX.Buf16(2*(2*aQ+1)),this.bl_tree=new aX.Buf16(2*(2*bp+1)),aC(this.dyn_ltree),aC(this.dyn_dtree),aC(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new aX.Buf16(bk+1),this.heap=new aX.Buf16(2*bf+1),aC(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new aX.Buf16(2*bf+1),aC(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ak(b){var c;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=aS,c=b.state,c.pending=0,c.pending_out=0,c.wrap<0&&(c.wrap=-c.wrap),c.status=c.wrap?ac:ad,b.adler=2===c.wrap?0:1,c.last_flush=bd,aB._tr_init(c),a3):ax(b,a9)}function ai(b){var c=ak(b);return c===a3&&aK(b.state),c}function ah(b,c){return b&&b.state?2!==b.state.wrap?a9:(b.state.gzhead=c,a3):a9}function aA(f,m,c,k,d,j){if(!f){return a9}var g=1;if(m===a4&&(m=6),0>k?(g=0,k=-k):k>15&&(g=2,k-=16),1>d||d>aP||c!==aR||8>k||k>15||0>m||m>9||0>j||j>aZ){return ax(f,a9)}8===k&&(k=9);var b=new am;return f.state=b,b.strm=f,b.wrap=g,b.gzhead=null,b.w_bits=k,b.w_size=1<<b.w_bits,b.w_mask=b.w_size-1,b.hash_bits=d+7,b.hash_size=1<<b.hash_bits,b.hash_mask=b.hash_size-1,b.hash_shift=~~((b.hash_bits+aN-1)/aN),b.window=new aX.Buf8(2*b.w_size),b.head=new aX.Buf16(b.hash_size),b.prev=new aX.Buf16(b.w_size),b.lit_bufsize=1<<d+6,b.pending_buf_size=4*b.lit_bufsize,b.pending_buf=new aX.Buf8(b.pending_buf_size),b.d_buf=b.lit_bufsize>>1,b.l_buf=3*b.lit_bufsize,b.level=m,b.strategy=j,b.method=c,ai(f)}function aj(b,c){return aA(b,c,aR,aO,bm,aT)}function bg(o,i){var l,b,m,j;if(!o||!o.state||i>a5||0>i){return o?ax(o,a9):a9}if(b=o.state,!o.output||!o.input&&0!==o.avail_in||b.status===bj&&i!==aV){return ax(o,0===o.avail_out?a6:a9)}if(b.strm=o,l=b.last_flush,b.last_flush=i,b.status===ac){if(2===b.wrap){o.adler=0,az(b,31),az(b,139),az(b,8),b.gzhead?(az(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),az(b,255&b.gzhead.time),az(b,b.gzhead.time>>8&255),az(b,b.gzhead.time>>16&255),az(b,b.gzhead.time>>24&255),az(b,9===b.level?2:b.strategy>=ba||b.level<2?4:0),az(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(az(b,255&b.gzhead.extra.length),az(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(o.adler=aU(o.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=ar):(az(b,0),az(b,0),az(b,0),az(b,0),az(b,0),az(b,9===b.level?2:b.strategy>=ba||b.level<2?4:0),az(b,a2),b.status=ad)}else{var n=aR+(b.w_bits-8<<4)<<8,g=-1;g=b.strategy>=ba||b.level<2?0:b.level<6?1:6===b.level?2:3,n|=g<<6,0!==b.strstart&&(n|=bq),n+=31-n%31,b.status=ad,aw(b,n),0!==b.strstart&&(aw(b,o.adler>>>16),aw(b,65535&o.adler)),o.adler=1}}if(b.status===ar){if(b.gzhead.extra){for(m=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),ap(o),m=b.pending,b.pending!==b.pending_buf_size));){az(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++}b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=bn)}else{b.status=bn}}if(b.status===bn){if(b.gzhead.name){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),ap(o),m=b.pending,b.pending===b.pending_buf_size)){j=1;break}j=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,az(b,j)}while(0!==j);b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),0===j&&(b.gzindex=0,b.status=af)}else{b.status=af}}if(b.status===af){if(b.gzhead.comment){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),ap(o),m=b.pending,b.pending===b.pending_buf_size)){j=1;break}j=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,az(b,j)}while(0!==j);b.gzhead.hcrc&&b.pending>m&&(o.adler=aU(o.adler,b.pending_buf,b.pending-m,m)),0===j&&(b.status=bi)}else{b.status=bi}}if(b.status===bi&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&ap(o),b.pending+2<=b.pending_buf_size&&(az(b,255&o.adler),az(b,o.adler>>8&255),o.adler=0,b.status=ad)):b.status=ad),0!==b.pending){if(ap(o),0===o.avail_out){return b.last_flush=-1,a3}}else{if(0===o.avail_in&&aq(i)<=aq(l)&&i!==aV){return ax(o,a6)}}if(b.status===bj&&0!==o.avail_in){return ax(o,a6)}if(0!==o.avail_in||0!==b.lookahead||i!==bd&&b.status!==bj){var k=b.strategy===ba?ay(b,i):b.strategy===a7?av(b,i):be[b.level].func(b,i);if((k===ab||k===bl)&&(b.status=bj),k===aJ||k===ab){return 0===o.avail_out&&(b.last_flush=-1),a3}if(k===ae&&(i===a1?aB._tr_align(b):i!==a5&&(aB._tr_stored_block(b,0,0,!1),i===au&&(aC(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),ap(o),0===o.avail_out)){return b.last_flush=-1,a3}}return i!==aV?a3:b.wrap<=0?aY:(2===b.wrap?(az(b,255&o.adler),az(b,o.adler>>8&255),az(b,o.adler>>16&255),az(b,o.adler>>24&255),az(b,255&o.total_in),az(b,o.total_in>>8&255),az(b,o.total_in>>16&255),az(b,o.total_in>>24&255)):(aw(b,o.adler>>>16),aw(b,65535&o.adler)),ap(o),b.wrap>0&&(b.wrap=-b.wrap),0!==b.pending?a3:aY)}function bh(b){var c;return b&&b.state?(c=b.state.status,c!==ac&&c!==ar&&c!==bn&&c!==af&&c!==bi&&c!==ad&&c!==bj?ax(b,a9):(b.state=null,c===ad?ax(b,bb):a3)):a9}var be,aX=ao("../utils/common"),aB=ao("./trees"),bc=ao("./adler32"),aU=ao("./crc32"),a8=ao("./messages"),bd=0,a1=1,au=3,aV=4,a5=5,a3=0,aY=1,a9=-2,bb=-3,a6=-5,a4=-1,a0=1,ba=2,a7=3,aZ=4,aT=0,aS=2,aR=8,aP=9,aO=15,bm=8,aW=29,br=256,bf=br+1+aW,aQ=30,bp=19,ag=2*bf+1,bk=15,aN=3,bo=258,al=bo+aN+1,bq=32,ac=42,ar=69,bn=73,af=91,bi=103,ad=113,bj=666,aJ=1,ae=2,ab=3,bl=4,a2=3,aa=function(c,f,b,g,d){this.good_length=c,this.max_lazy=f,this.nice_length=b,this.max_chain=g,this.func=d};be=[new aa(0,0,0,0,aF),new aa(4,4,8,4,aI),new aa(4,5,16,8,aI),new aa(4,6,32,32,aI),new aa(4,4,16,16,aE),new aa(8,16,32,32,aE),new aa(8,16,128,128,aE),new aa(8,32,128,256,aE),new aa(32,128,258,1024,aE),new aa(32,258,258,4096,aE)],aL.deflateInit=aj,aL.deflateInit2=aA,aL.deflateReset=ai,aL.deflateResetKeep=ak,aL.deflateSetHeader=ah,aL.deflate=bg,aL.deflateEnd=bh,aL.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(c,d,b){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(aV,be,bi){function a3(b){for(var c=b.length;--c>=0;){b[c]=0}}function aX(b){return 256>b?ay[b]:ay[256+(b>>>7)]}function a9(b,c){b.pending_buf[b.pending++]=255&c,b.pending_buf[b.pending++]=c>>>8&255}function aW(c,d,b){c.bi_valid>al-b?(c.bi_buf|=d<<c.bi_valid&65535,a9(c,c.bi_buf),c.bi_buf=d>>al-c.bi_valid,c.bi_valid+=b-al):(c.bi_buf|=d<<c.bi_valid&65535,c.bi_valid+=b)}function ba(c,d,b){aW(c,b[2*d],b[2*d+1])}function a5(c,d){var b=0;do{b|=1&c,c>>>=1,b<<=1}while(--d>0);return b>>>1}function a1(b){16===b.bi_valid?(a9(b,b.bi_buf),b.bi_buf=0,b.bi_valid=0):b.bi_valid>=8&&(b.pending_buf[b.pending++]=255&b.bi_buf,b.bi_buf>>=8,b.bi_valid-=8)}function bj(D,x){var A,k,b,p,E,q,m=x.dyn_tree,j=x.max_code,B=x.stat_desc.static_tree,y=x.stat_desc.has_stree,C=x.stat_desc.extra_bits,w=x.stat_desc.extra_base,z=x.stat_desc.max_length,v=0;for(p=0;av>=p;p++){D.bl_count[p]=0}for(m[2*D.heap[D.heap_max]+1]=0,A=D.heap_max+1;az>A;A++){k=D.heap[A],p=m[2*m[2*k+1]+1]+1,p>z&&(p=z,v++),m[2*k+1]=p,k>j||(D.bl_count[p]++,E=0,k>=w&&(E=C[k-w]),q=m[2*k],D.opt_len+=q*(p+E),y&&(D.static_len+=q*(B[2*k+1]+E)))}if(0!==v){do{for(p=z-1;0===D.bl_count[p];){p--}D.bl_count[p]--,D.bl_count[p+1]+=2,D.bl_count[z]--,v-=2}while(v>0);for(p=z;0!==p;p--){for(k=D.bl_count[p];0!==k;){b=D.heap[--A],b>j||(m[2*b+1]!==p&&(D.opt_len+=(p-m[2*b+1])*m[2*b],m[2*b+1]=p),k--)}}}}function bf(d,k,b){var l,j,c=new Array(av+1),g=0;for(l=1;av>=l;l++){c[l]=g=g+b[l-1]<<1}for(j=0;k>=j;j++){var f=d[2*j+1];0!==f&&(d[2*j]=a5(c[f]++,f))}}function aT(){var d,g,b,h,f,c=new Array(av+1);for(b=0,h=0;ax-1>h;h++){for(aJ[h]=b,d=0;d<1<<aN[h];d++){a2[b++]=h}}for(a2[b-1]=h,f=0,h=0;16>h;h++){for(aK[h]=f,d=0;d<1<<bc[h];d++){ay[f++]=h}}for(f>>=7;aq>h;h++){for(aK[h]=f<<7,d=0;d<1<<bc[h]-7;d++){ay[256+f++]=h}}for(g=0;av>=g;g++){c[g]=0}for(d=0;143>=d;){aL[2*d+1]=8,d++,c[8]++}for(;255>=d;){aL[2*d+1]=9,d++,c[9]++}for(;279>=d;){aL[2*d+1]=7,d++,c[7]++}for(;287>=d;){aL[2*d+1]=8,d++,c[8]++}for(bf(aL,au+1,c),d=0;aq>d;d++){aI[2*d+1]=5,aI[2*d]=a5(d,5)}aU=new aH(aL,aN,aA+1,au,av),ak=new aH(aI,bc,0,aq,av),aM=new aH(new Array(0),aZ,0,am,ae)}function bd(b){var c;for(c=0;au>c;c++){b.dyn_ltree[2*c]=0}for(c=0;aq>c;c++){b.dyn_dtree[2*c]=0}for(c=0;am>c;c++){b.bl_tree[2*c]=0}b.dyn_ltree[2*ad]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function bg(b){b.bi_valid>8?a9(b,b.bi_buf):b.bi_valid>0&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function bb(c,d,b,f){bg(c),f&&(a9(c,b),a9(c,~b)),aB.arraySet(c.pending_buf,c.window,d,b,c.pending),c.pending+=b}function a0(d,g,b,h){var f=2*g,c=2*b;return d[f]<d[c]||d[f]===d[c]&&h[g]<=h[b]}function a4(c,f,b){for(var g=c.heap[b],d=b<<1;d<=c.heap_len&&(d<c.heap_len&&a0(f,c.heap[d+1],c.heap[d],c.depth)&&d++,!a0(f,g,c.heap[d],c.depth));){c.heap[b]=c.heap[d],b=d,d<<=1}c.heap[b]=g}function bh(g,h,c){var k,f,b,j,d=0;if(0!==g.last_lit){do{k=g.pending_buf[g.d_buf+2*d]<<8|g.pending_buf[g.d_buf+2*d+1],f=g.pending_buf[g.l_buf+d],d++,0===k?ba(g,f,h):(b=a2[f],ba(g,b+aA+1,h),j=aN[b],0!==j&&(f-=aJ[b],aW(g,f,j)),k--,b=aX(k),ba(g,b,c),j=bc[b],0!==j&&(k-=aK[b],aW(g,k,j)))}while(d<g.last_lit)}ba(g,ad,h)}function aS(p,k){var m,d,b,g=k.dyn_tree,q=k.stat_desc.static_tree,j=k.stat_desc.has_stree,f=k.stat_desc.elems,c=-1;for(p.heap_len=0,p.heap_max=az,m=0;f>m;m++){0!==g[2*m]?(p.heap[++p.heap_len]=c=m,p.depth[m]=0):g[2*m+1]=0}for(;p.heap_len<2;){b=p.heap[++p.heap_len]=2>c?++c:0,g[2*b]=1,p.depth[b]=0,p.opt_len--,j&&(p.static_len-=q[2*b+1])}for(k.max_code=c,m=p.heap_len>>1;m>=1;m--){a4(p,g,m)}b=f;do{m=p.heap[1],p.heap[1]=p.heap[p.heap_len--],a4(p,g,1),d=p.heap[1],p.heap[--p.heap_max]=m,p.heap[--p.heap_max]=d,g[2*b]=g[2*m]+g[2*d],p.depth[b]=(p.depth[m]>=p.depth[d]?p.depth[m]:p.depth[d])+1,g[2*m+1]=g[2*d+1]=b,p.heap[1]=b++,a4(p,g,1)}while(p.heap_len>=2);p.heap[--p.heap_max]=p.heap[1],bj(p,k),bf(g,c,p.bl_count)}function aR(p,k,m){var d,b,g=-1,q=k[1],j=0,f=7,c=4;for(0===q&&(f=138,c=3),k[2*(m+1)+1]=65535,d=0;m>=d;d++){b=q,q=k[2*(d+1)+1],++j<f&&b===q||(c>j?p.bl_tree[2*b]+=j:0!==b?(b!==g&&p.bl_tree[2*b]++,p.bl_tree[2*ac]++):10>=j?p.bl_tree[2*ab]++:p.bl_tree[2*aa]++,j=0,g=b,0===q?(f=138,c=3):b===q?(f=6,c=3):(f=7,c=4))}}function aP(q,j,m){var f,b,h=-1,g=j[1],c=0,p=7,k=4;for(0===g&&(p=138,k=3),f=0;m>=f;f++){if(b=g,g=j[2*(f+1)+1],!(++c<p&&b===g)){if(k>c){do{ba(q,b,q.bl_tree)}while(0!==--c)}else{0!==b?(b!==h&&(ba(q,b,q.bl_tree),c--),ba(q,ac,q.bl_tree),aW(q,c-3,2)):10>=c?(ba(q,ab,q.bl_tree),aW(q,c-3,3)):(ba(q,aa,q.bl_tree),aW(q,c-11,7))}c=0,h=b,0===g?(p=138,k=3):b===g?(p=6,k=3):(p=7,k=4)}}}function aO(b){var c;for(aR(b,b.dyn_ltree,b.l_desc.max_code),aR(b,b.dyn_dtree,b.d_desc.max_code),aS(b,b.bl_desc),c=am-1;c>=3&&0===b.bl_tree[2*ah[c]+1];c--){}return b.opt_len+=3*(c+1)+5+5+4,c}function a6(c,f,b,g){var d;for(aW(c,f-257,5),aW(c,b-1,5),aW(c,g-4,4),d=0;g>d;d++){aW(c,c.bl_tree[2*ah[d]+1],3)}aP(c,c.dyn_ltree,f-1),aP(c,c.dyn_dtree,b-1)}function aQ(c){var d,b=4093624447;for(d=0;31>=d;d++,b>>>=1){if(1&b&&0!==c.dyn_ltree[2*d]){return aw}}if(0!==c.dyn_ltree[18]||0!==c.dyn_ltree[20]||0!==c.dyn_ltree[26]){return aC}for(d=32;aA>d;d++){if(0!==c.dyn_ltree[2*d]){return aC}}return aw}function aE(b){an||(aT(),an=!0),b.l_desc=new aG(b.dyn_ltree,aU),b.d_desc=new aG(b.dyn_dtree,ak),b.bl_desc=new aG(b.bl_tree,aM),b.bi_buf=0,b.bi_valid=0,bd(b)}function aF(c,d,b,f){aW(c,(aY<<1)+(f?1:0),3),bb(c,d,b,!0)}function aD(b){aW(b,ag<<1,3),ba(b,ad,aL),a1(b)}function ai(d,j,b,k){var g,c,f=0;d.level>0?(d.strm.data_type===ao&&(d.strm.data_type=aQ(d)),aS(d,d.l_desc),aS(d,d.d_desc),f=aO(d),g=d.opt_len+3+7>>>3,c=d.static_len+3+7>>>3,g>=c&&(g=c)):g=c=b+5,g>=b+4&&-1!==j?aF(d,j,b,k):d.strategy===af||c===g?(aW(d,(ag<<1)+(k?1:0),3),bh(d,aL,aI)):(aW(d,(ar<<1)+(k?1:0),3),a6(d,d.l_desc.max_code+1,d.d_desc.max_code+1,f+1),bh(d,d.dyn_ltree,d.dyn_dtree)),bd(d),k&&bg(d)}function a8(c,d,b){return c.pending_buf[c.d_buf+2*c.last_lit]=d>>>8&255,c.pending_buf[c.d_buf+2*c.last_lit+1]=255&d,c.pending_buf[c.l_buf+c.last_lit]=255&b,c.last_lit++,0===d?c.dyn_ltree[2*b]++:(c.matches++,d--,c.dyn_ltree[2*(a2[b]+aA+1)]++,c.dyn_dtree[2*aX(d)]++),c.last_lit===c.lit_bufsize-1}var aB=aV("../utils/common"),af=4,aw=0,aC=1,ao=2,aY=0,ag=1,ar=2,ap=3,aj=258,ax=29,aA=256,au=aA+1+ax,aq=30,am=19,az=2*au+1,av=15,al=16,ae=7,ad=256,ac=16,ab=17,aa=18,aN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],bc=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],aZ=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ah=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a7=512,aL=new Array(2*(au+2));a3(aL);var aI=new Array(2*aq);a3(aI);var ay=new Array(a7);a3(ay);var a2=new Array(aj-ap+1);a3(a2);var aJ=new Array(ax);a3(aJ);var aK=new Array(aq);a3(aK);var aU,ak,aM,aH=function(c,f,b,g,d){this.static_tree=c,this.extra_bits=f,this.extra_base=b,this.elems=g,this.max_length=d,this.has_stree=c&&c.length},aG=function(b,c){this.dyn_tree=b,this.max_code=0,this.stat_desc=c},an=!1;bi._tr_init=aE,bi._tr_stored_block=aF,bi._tr_flush_block=ai,bi._tr_tally=a8,bi._tr_align=aD},{"../utils/common":1}],8:[function(c,d,b){function f(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}d.exports=f},{}],"/lib/deflate.js":[function(x,J,N){function C(c,d){var b=new j(d);if(b.push(c,!0),b.err){throw b.msg}return b.result}function z(b,c){return c=c||{},c.raw=!0,C(b,c)}function F(b,c){return c=c||{},c.gzip=!0,C(b,c)}var y=x("./zlib/deflate.js"),G=x("./utils/common"),E=x("./utils/strings"),B=x("./zlib/messages"),O=x("./zlib/zstream"),K=Object.prototype.toString,q=0,I=4,L=0,H=1,A=2,D=-1,M=0,k=8,j=function(c){this.options=G.assign({level:D,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:M,to:""},c||{});var d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var b=y.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(b!==L){throw new Error(B[b])}d.header&&y.deflateSetHeader(this.strm,d.header)};j.prototype.push=function(d,g){var b,h,f=this.strm,c=this.options.chunkSize;if(this.ended){return !1}h=g===~~g?g:g===!0?I:q,"string"==typeof d?f.input=E.string2buf(d):"[object ArrayBuffer]"===K.call(d)?f.input=new Uint8Array(d):f.input=d,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new G.Buf8(c),f.next_out=0,f.avail_out=c),b=y.deflate(f,h),b!==H&&b!==L){return this.onEnd(b),this.ended=!0,!1}(0===f.avail_out||0===f.avail_in&&(h===I||h===A))&&this.onData("string"===this.options.to?E.buf2binstring(G.shrinkBuf(f.output,f.next_out)):G.shrinkBuf(f.output,f.next_out))}while((f.avail_in>0||0===f.avail_out)&&b!==H);return h===I?(b=y.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===L):h===A?(this.onEnd(L),f.avail_out=0,!0):!0},j.prototype.onData=function(b){this.chunks.push(b)},j.prototype.onEnd=function(b){b===L&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=G.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},N.Deflate=j,N.deflate=C,N.deflateRaw=z,N.gzip=F},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate.js":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")});var CdeLocalPlayer=_m$cde18._m41({_m92:null,_m4:null,_m77:null,_m42:"",_m44:null,init:function(b,a,c){this._m44=b;this._m92=a;this._m4=new p2p$.$n6.$c4();this._m77=null;this._m42=c},play:function(){_m$cde5(_m$cde1("CdeLocalPlayer::Start play ...",this._m42));this._m92.play()},pause:function(){this._m92.pause()},stop:function(){this._m92.pause()},seek:function(a){_m$cde5(_m$cde1("CdeLocalPlayer::seek ...({0})",a));this._m92.currentTime=a},getCurrentPosition:function(){return this._m92.currentTime},getDuration:function(){return this._m92.duration},getCurrentBuffered:function(){return -1},_m1115:function(){if(this._m77){this._m77.abort();this._m77=null}var b=CdeMediaHelper.parseUrl(this._m42);b._m7.set("format","1");b._m7.set("expect","3");b._m7.set("ajax","1");if(!b._m7.has("stream_id")){b._m7.set("tss","no")}var c=b.toString();_m$cde5(_m$cde1("CdeMediaPlayer::Start download gslb url: {0} ...",c));var e=this;this._m77=$.ajax({url:c,type:"GET",error:function(g,i,h){e._m742(data,i,h)},success:function(g,h){e._m742(g,h,"")}});var d=p2p$.$n1.$c23;var a=new p2p$.$n1.$c58();a._m181="http";a._m201=d._m568("s.webp2p.letv.com");a._m429="/ClientStageInfo";a._m7.set("act","0");a._m7.set("err","1");a._m7.set("utime",CdeMediaHelper._m394||0);a._m7.set("type",b._m7.has("stream_id")?"liv":"vod");a._m7.set("termid",b._m7.get("termid"));a._m7.set("platid",b._m7.get("platid"));a._m7.set("splatid",b._m7.get("splatid"));a._m7.set("vtype",b._m7.get("vtype")||"0");a._m7.set("streamid",b._m7.get("stream_id")||"");a._m7.set("ch",b._m7.get("ch")||"");a._m7.set("p1",b._m7.get("p1")||"");a._m7.set("p2",b._m7.get("p2")||"");a._m7.set("p3",b._m7.get("p3")||"");a._m7.set("uuid",b._m7.get("uuid")||"");a._m7.set("p2p","0");a._m7.set("appid",d._m248);a._m7.set("cdeid",d._m636);a._m7.set("package",d._m282);var f=a.toString();$.ajax({url:f.toString(),type:"GET",error:function(g,i,h){_m$cde5(_m$cde1("CdeMediaPlayer::Report stage failed({0}, url: {1}",i,f))},success:function(g,h){_m$cde5(_m$cde1("CdeMediaPlayer::Report stage ok({0}), url: {1}",h,f))}})},_m742:function(data,textStatus,errorThrown){_m$cde5(_m$cde1("CdeMediaPlayer::Download gslb {0}: {1}, {2} ...",data?"success":"failed",textStatus+"",errorThrown+""));if(!data){if(this._m44.onerror){this._m44.onerror(this)}return}try{var gslbData=(typeof(data)=="string")?eval("("+data+")"):data;var mediaUrl=gslbData.location;_m$cde5(_m$cde1("CdeMediaPlayer::Gslb responsed, error code({0}), details({1}), user ip({2}), url({3})",gslbData.ercode,gslbData.errinfo||"",gslbData.remote,mediaUrl));this._m92.src=mediaUrl;this._m1078(this._m92);this._m92.play()}catch(e){if(this._m44.onerror){this._m44.onerror(this)}}},_m1078:function(c){var a=this;var d=p2p$.$n13.PLAY_STATES.VideoEvent;for(var b=0;b<d.length;b++){_m$cde14(_m$cde1("CdeLocalPlayer::Add video event, type({0})",d[b]));try{c.addEventListener(d[b],function(e){a._m374(e)})}catch(f){_m$cde14(_m$cde1("CdeLocalPlayer::Add video event failed, type({0}), error({1})",d[b],(f||"none").toString()))}}},_m1223:function(c){var b=this;var d=p2p$.$n13.PLAY_STATES.VideoEvent;for(var a=0;a<d.length;a++){try{c.removeEventListener(d[a],function(e){b._m374(e)})}catch(f){_m$cde14(_m$cde1("CdeLocalPlayer::Remove video event failed, type({0}), error({1})",d[a],(f||"none").toString()))}}},_m374:function(a){var b=a.type;_m$cde14(_m$cde1("CdeLocalPlayer::Video status handler, type({0})",b));switch(b){case"abort":break;case"canplay":this._m405(a);break;case"canplaythrough":break;case"durationchange":this._m1058();break;case"emptied":break;case"ended":break;case"error":this._m792(a);break;case"loadeddata":this._m724(a);break;case"loadedmetadata":break;case"loadstart":break;case"pause":break;case"play":break;case"playing":break;case"progress":break;case"ratechange":break;case"seeked":this._m450(a);break;case"seeking":this._m408(a);break;case"stalled":break;case"suspend":break;case"timeupdate":this._m314(a);break;case"volumechange":break;case"waiting":break}},_m1058:function(){},_m724:function(){_m$cde5(_m$cde1("CdeLocalPlayer::Loaded data"));if(this._m44.onbufferstart){this._m44.onbufferstart()}this._m4._m20=p2p$.$n13.VIDEO_STATUS.loadeddata},_m405:function(){if(this._m4._m20==p2p$.$n13.VIDEO_STATUS.loadeddata){_m$cde5(_m$cde1("CdeLocalPlayer::Video can play"));this._m4._m20=p2p$.$n13.VIDEO_STATUS.canplay;if(this._m44.onbufferend){this._m44.onbufferend()}if(this._m44.onprepared){_m$cde5(_m$cde1("CdeLocalPlayer::Video onVideoCanPlay onprepared"));this._m44.onprepared()}if(this._m44._m100){this._m92.currentTime=this._m44._m100}else{}}},_m408:function(){var a=this._m92.currentTime?this._m92.currentTime.toFixed(1):0;if(this._m4._m20==p2p$.$n13.VIDEO_STATUS.canplay||this._m4._m20==p2p$.$n13.VIDEO_STATUS.seeking||this._m4._m20==p2p$.$n13.VIDEO_STATUS.seeked){if(this._m44.onbufferstart){this._m44.onbufferstart()}this._m4._m20=p2p$.$n13.VIDEO_STATUS.seeking}_m$cde5(_m$cde1("CdeLocalPlayer::Video seeking vTime({0}) videoStatus({1})",a,this._m4._m20))},_m450:function(){var a=this._m92.currentTime?this._m92.currentTime.toFixed(1):0;if(this._m4._m20==p2p$.$n13.VIDEO_STATUS.seeking){if(this._m44.onbufferend){this._m44.onbufferend()}this._m4._m20=p2p$.$n13.VIDEO_STATUS.seeked}_m$cde5(_m$cde1("CdeLocalPlayer::Video seeked  vTime({0}) videoStatus({1})",a,this._m4._m20))},_m314:function(){var b=this._m92.duration.toFixed(1);var c=this._m92.currentTime.toFixed(1);var a=(b-c).toFixed(1);_m$cde14(_m$cde1("CdeLocalPlayer::Video time update vTime({0}) vLength({1}) vRemaining({2})",c,b,a));if(Math.abs(a)<=0.5){if(this._m44._m892){this._m44._m892()}}},_m892:function(){_m$cde5(_m$cde1("CdeLocalPlayer::Ended"));if(this._m44.oncomplete){this._m44.oncomplete()}},_m792:function(a){var b=this._m92.error?this._m92.error.code:"unknown";_m$cde5(_m$cde1("CdeLocalPlayer::Error, code: {0}",b));if(this._m44.onerror){this._m44.onerror()}}});CdeMediaPlayer=_m$cde18._m41({onprepared:null,onbufferstart:null,onbufferend:null,oncomplete:null,onerror:null,_m42:null,_m785:null,_m159:false,_m227:null,_m82:null,_m539:null,_m46:null,_m572:false,_m100:0,_m1149:true,init:function(a,b,d){d=d||{};if((b.tagName+"").toLowerCase()=="video"){this._m539=b}else{this._m539=document.createElement("video");if(d&&d.playerAttributes){try{for(var f in d.playerAttributes){newVideo[f]=d.playerAttributes[f]}}catch(c){}}while(b.childNodes.length>0){b.removeChild(b.childNodes[0])}b.appendChild(this._m539)}if(d.localVideo){this._m572=d.localVideo}if(d.seekTo){this._m100=parseFloat(d.seekTo)||0}this._m42=a;this._m159=false;this._m227=p2p$.$n15.$c18;this._m227.init();if(this._m42){CdeMediaHelper.init(null,{fn:this._m604,scope:this})}},_m604:function(){if(!this._m42){return}_m$cde5(_m$cde1("CdeMediaPlayer::createPlayer..."));this._m159=true;if(this._m100){_m$cde5(_m$cde1("CdeMediaPlayer::createPlayer::Seek to({0})",this._m100))}if(this._m572||!CdeMediaHelper.supportPlayer()){this._m82=new CdeLocalPlayer(this,this._m539,this._m42);this._m82._m1115()}else{var b=new p2p$.$n6.$c37();b._m144(this,this._m42,this._m539,this._m227);this._m82=b._m604();this._m100=null}if(this._m46){for(var a=0;a<this._m46.length;a++){var c=this._m46[a];c.fn.apply(c.scope||this,c.params)}this._m46=null}},_m217:function(b,a,c){if(!this._m46){this._m46=[]}this._m46.push({fn:b,scope:a,params:c||[]})},getVideoStream:function(){return this._m227},play:function(a){if(!this._m42){return}if(!this._m159){this._m217(this.play,this,[a]);return}if(this._m82){this._m82.play()}},setSource:function(b,a){if(!this._m159&&this._m42){this._m42=b;this._m1149=a;return}this._m42=b;this._m1149=a;CdeMediaHelper.init(null,{fn:this._m604,scope:this})},pause:function(){if(!this._m42){return}if(!this._m159){this._m217(this.pause,this);return}if(this._m82){this._m82.pause()}},stop:function(){if(!this._m42){return}if(!this._m159){this._m217(this.stop,this);return}if(this._m82){this._m82.stop()}},release:function(){if(!this._m42){return}if(this._m785){clearTimeout(this._m785);this._m785=null}if(this._m82){this._m82.stop()}this._m82=null;this._m159=false;this._m227._m772(this._m42);this._m42=null},seek:function(a){if(!this._m42){return}if(!this._m159){this._m217(this.seek,this);return}if(this._m82){this._m82.seek(a)}},getCurrentPosition:function(){if(!this._m42){return}if(!this._m159){return -1}if(this._m82){return this._m82.getCurrentPosition()}},getDuration:function(){if(!this._m42){return}if(!this._m159){return -1}if(this._m82){return this._m82.getDuration()}},getCurrentBuffered:function(){if(!this._m42){return}if(!this._m159){return -1}if(this._m82){return this._m82.getCurrentBuffered()}}});CdeMediaHelper={_m203:false,_m394:-1,_m713:500,_m1067:false,_m46:null,init:function(g,k){if(this._m203){if(k){if(this.initCompleted()){k.fn.apply(k.scope,k.params)}else{this._m217(k)}}return}this._m203=true;this._m394=-1;g=g||{};var h=p2p$.$n1.$c23;var f=g.hasOwnProperty("logLevel")?g.logLevel:-1;var a="http://"+(g.logServer||"10.58.132.159:8000");p2p$.$n2.$c59.init(f,g.uploadLog?a:null);h._m144();_m$cde5(_m$cde1("CdeMediaHelper::Initialize, external app id({0}), version({1}), build({2})",g.appId,h._m213,p2p$.$n2.$c43._k89));if(g.appId||g.appId==0){h._m248=g.appId;h._m1153=parseInt(g.appId)}if(g.webrtcServer){h._m535=g.webrtcServer}if(g.localVideo){h._m732=g.localVideo}if(g.trackerServer){h._m511=g.trackerServer}if(g.stunServer){h._m617=g.stunServer}if(g.closeWebrtc){h._m426=g.closeWebrtc}if(g.closeWebsocket){h._m669=g.closeWebsocket}if(g.initializeTimeout){this._m713=Math.max(g.initializeTimeout,100)}this._m217(k);if(!this.supportMedia()){this._m606(false,0,"failed, not supported");return}try{var j=this;var b=null;var c=new MediaSource();var l=document.createElement("video");var d=new Date().getTime();c.addEventListener("sourceopen",function(){try{l.src=""}catch(m){}j._m606(true,Math.max(new Date().getTime()-d,0),"ok");clearTimeout(b);b=null});l.src=window.URL.createObjectURL(c);l.play();b=setTimeout(function(){if(j._m394>=0){return}j._m606(false,Math.max(new Date().getTime()-d,0),"timeout")},this._m713)}catch(i){j._m606(false,0,"exception: "+i)}},_m1192:function(){if(this._m46){for(var a=0;a<this._m46.length;a++){var b=this._m46[a];b.fn.apply(b.scope||this,b.params)}this._m46=null}},_m217:function(a){if(!a){return}if(!this._m46){this._m46=[]}this._m46.push(a)},_m606:function(a,e,c){_m$cde5(_m$cde1("CdeMediaHelper::MediaSource open {0}, used {1}ms",c,e));this._m1067=a;this._m394=e;if(this._m46){for(var b=0;b<this._m46.length;b++){var d=this._m46[b];d.fn.apply(d.scope||this,d.params)}this._m46=null}},initCompleted:function(){return this._m394>=0},supportPlayer:function(){return this._m1067},supportMedia:function(){var a=p2p$.$n1.$c23._m496();return a.mediasource&&(a.ts||a.mp4)},supportMediaSource:function(){var a=p2p$.$n1.$c23._m496();return a.mediasource},supportTs:function(){var a=p2p$.$n1.$c23._m496();return a.ts},supportMp4:function(){var a=p2p$.$n1.$c23._m496();return a.mp4},parseUrl:function(b){var a=new p2p$.$n1.$c58();a._m108(b);return a},submitSupportLog:function(a,b){p2p$.$n4.$c8.open(a,b)},showConsole:function(a){p2p$.$n9.$c53.start()}};})(); 
